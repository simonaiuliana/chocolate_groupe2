
<!-- saved from url=(0101)https://www.marmiton.org/recettes/recette_biscuits-sables-au-chocolat-canestrelli-italien_326959.aspx -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><script>function inherit(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n,Object.defineProperties(e,{uber:{get:function(){return t.prototype},enumerable:!1,configurable:!1},uberConstructor:{get:function(){return t},enumerable:!1,configurable:!1}}),e.prototype.constructor=e}function extend(e,t){for(var n=1;n<arguments.length;n++){t=arguments[n];if(t instanceof Object)for(var r in t)e[r]=t[r]}return e}function deep(e,t){for(var n in t)e[n]instanceof Object&&t[n]instanceof Object?deep(e[n],t[n]):e[n]=t[n]}function delayed(e,t){var n=null;return function(){n&&clearTimeout(n),n=setTimeout(e,t)}}function throttled(e,t){var n=null;return function(){n=n||setTimeout(function(){n=null,e()},t)}}function deferred(e,t,n,r){return function(){defer(e,t,n,r)}}function useAsap(){return"undefined"!=typeof creative&&creative.adapter&&creative.adapter.useAsap||"undefined"!=typeof adapter&&adapter.useAsap}function hasClass(e,t){return e.classList.contains(t)}function addClass(e,t){e.classList.add(t)}function removeClass(e,t){e.classList.remove(t)}function toggleClass(e,t){e.classList.toggle(t)}function cssurl(e){return"url('"+e.replace(/'/g,"\\'")+"')"}function camelize(e){return e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})}function ucfirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}function zeroPad(e,t){null==t&&(t=2);t=Math.max(0,t-(""+e).length);return(""+Math.pow(10,t)).slice(1)+e}function htmlentitize(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function removeHtmlTags(e){for(var t,n="(?:[^\"'>]|\"[^\"]*\"|'[^']*')*",r=new RegExp("<(?:!--(?:(?:-*[^->])*--+|-?)|script\\b"+n+">[\\s\\S]*?</script\\s*|style\\b"+n+">[\\s\\S]*?</style\\s*|/?[a-z]"+n+")>","gi");(e=(t=e).replace(r,""))!==t;);return e.replace(/</g,"&lt;")}function trim(e){return e.replace(/^\s+|\s+$/g,"")}function to_utf8(e){return unescape(encodeURIComponent(e))}function isRTLChar(e){return!!(e=String(e).charCodeAt(0))&&(1424<=e&&e<=1535||1536<=e&&e<=1791||1792<=e&&e<=1871||1872<=e&&e<=1919||2144<=e&&e<=2159||2208<=e&&e<=2303||64288<=e&&e<=64335||64336<=e&&e<=65023||65136<=e&&e<=65279||8207===e||8235===e||8238===e)}function isLTRChar(e){return!!(e=String(e).charCodeAt(0))&&(65<=e&&e<=90||97<=e&&e<=122||192<=e&&e<=214||216<=e&&e<=246||248<=e&&e<=696||768<=e&&e<=1424||2048<=e&&e<=8191||11264<=e&&e<=64284||65022<=e&&e<=65135||65277<=e&&e<=65535||8206===e||8234===e||8237===e)}function guessWritingDirection(e){for(var t=Math.min(25,e.length),n=0;n<t;n++){var r=e.charAt(n);if(isLTRChar(r))return"ltr";if(isRTLChar(r))return"rtl"}return null}function randInt(){return(Math.random()+"").slice(2)}function _isListenerOptionSupported(e){var t=_isListenerOptionSupported.opts;if(void 0===t[e]){t[e]=!1;try{window.addEventListener("listener-test",null,Object.defineProperty({},e,{get:function(){t[e]=!0}}))}catch(e){}}return t[e]}function _buildNativeListenerOptions(e){var t;return"object"!=typeof e?!!e:_isListenerOptionSupported("capture")?(t={capture:!!e.capture},_isListenerOptionSupported("passive")&&(t.passive=!!e.passive),t):!!e.capture}function _analyzeTouch(e){var t,n=Math.abs(e.firstTouch.x-e.lastTouch.x),r=Math.abs(e.firstTouch.y-e.lastTouch.y);return"y"===e.validAxis?t=r>e.minDistanceForSwipe:"x"===e.validAxis&&(t=n>e.minDistanceForSwipe),{isHorizontal:r<n,isConsideredSwipe:t}}function attach(e,t,n,r){t=getEventNames()[t.toLowerCase()]||t;e.addEventListener(t,n,_buildNativeListenerOptions(r))}function detach(e,t,n,r){t=getEventNames()[t.toLowerCase()]||t;e.removeEventListener(t,n,_buildNativeListenerOptions(r))}function once(t,n,r,o){attach(t,n,function e(){detach(t,n,e,o),r.apply(this,arguments)},o)}function trigger(e,t,n,r){var o=document.createEvent("HTMLEvents"),n=(o.initEvent(t,n,r),"on"+ucfirst(t));return"function"==typeof e[n]&&e[n](),e.dispatchEvent(o)}function fakeclick(t,e){var n=(e=e||window).document.createElement("a"),e=(n.cssText="visibility: hidden",n.addEventListener("click",function(e){t(),e.preventDefault(),e.stopPropagation(),n.parentNode.removeChild(n)},!0),e.document.body.appendChild(n),document.createEvent("MouseEvents"));e.initEvent("click",!0,!0),n.dispatchEvent(e)}function fakeClickAhrefBlank(e,t,n){t=t||noop;var r=(n=n||window).document.createElement("a"),e=(r.style.cssText="visibility: hidden",r.setAttribute("href",e),r.setAttribute("target","_blank"),r.addEventListener("click",function(e){e.stopPropagation(),t(),r.parentNode.removeChild(r)},!0),n.document.body.appendChild(r),n.document.createEvent("MouseEvents"));e.initEvent("click",!0,!0),r.dispatchEvent(e)}!function(a){if(!this.defer){try{for(;void 0!==a.parent.location.href&&a.parent.document!==a.document;)a=a.parent}catch(e){}e="function"==typeof(u=a).setImmediate;var t,n,r,o,i,c,u,e,s=u.MutationObserver?function(e){t=document.createElement("div"),new MutationObserver(function(){e(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:!e&&u.postMessage&&!u.importScripts&&u.addEventListener?(o="com.setImmediate"+Math.random(),i=0,c={},u.addEventListener("message",function(e){e.source===u&&0===e.data.indexOf(o)&&(e=e.data.split(":")[1],c[e](),delete c[e])},!1),function(e){var t=9007199254740991===i?0:++i;c[t]=e,u.postMessage(o+":"+t,"*")}):!e&&u.document&&"onreadystatechange"in document.createElement("script")?function(e){(n=document.createElement("script")).onreadystatechange=function(){n.onreadystatechange=null,n.parentNode.removeChild(n),n=null,e()},document.body.appendChild(n)}:(r=e&&setImmediate||setTimeout,function(e){r(e)});this.defer=function(e,t,n,r){var o,i,t=0|t;n&&(void 0!==defer.perf?i=defer.perf:"undefined"!=typeof creative?i=creative.perf:"undefined"!=typeof perf&&(i=perf),i&&!i._stopTrackingDefers&&(o=i.start("defer",{deferId:n,delay:t}))),e&&(i=function(){o&&o.end(),e()},r?s(i):a.setTimeout(i,t))}}}(window),Function.prototype.bind||Object.defineProperty(Function.prototype,"bind",{value:function(e){var t=this;return function(){return t.apply(e,arguments)}}}),function(t){t.getEventNames=function(){var e={};return"WebKitAnimationEvent"in t&&(e.animationstart="webkitAnimationStart",e.animationiteration="webkitAnimationIteration",e.animationend="webkitAnimationEnd"),"WebKitTransitionEvent"in t&&(e.transitionend="webkitTransitionEnd"),e}}(window),_isListenerOptionSupported.opts={};var getTimestamp=void 0===window.performance||void 0===window.performance.now?Date.now:window.performance.now.bind(window.performance);function noop(){}function nullai(e,t){t&&t()}function retTrue(){return!0}function retFalse(){return!1}function offset(e){var t=e.getBoundingClientRect(),e=e.ownerDocument,n=e.documentElement,e=e.defaultView;return{top:t.top+(e.pageYOffset||n.scrollTop)-(n.clientTop||0),left:t.left+(e.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}}function addCssRule(e,t,n){var r=document.createElement("style");r.textContent=e+" {"+t+"}",(n?n.document:document).getElementsByTagName("head")[0].appendChild(r)}function redrawAndroidIframe(){var e=document.createElement("style");document.body.appendChild(e),document.body.removeChild(e)}function parseQuery(e){var t={};return(e=e.replace(/\&$/,"").replace(/\+/g,"%20")).split("&").forEach(function(e){e=e.split("=").map(decodeURIComponent);t[e[0]]=e[1]}),t}function buildQuery(e){var t,n=[];for(t in e)n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&")}function postBlob(e,t){var n=new XMLHttpRequest;n.open("POST",creative.apiUrl+"blobs?base64=1"),n.setRequestHeader("Content-Type","application/octet-stream"),n.onreadystatechange=function(){4===n.readyState&&t(n.responseText,n.status)},n.send(e)}function tmpl(e,t){if(!e)return"";var n;if(-1==e.indexOf("<%"))n=function(){return e};else{var r=e.split(/<%\s*|\s*%>/g),o="var p = []; with(o) {\n",i=!1;r.forEach(function(e){i?"="==e[0]?o+="  p.push("+e.replace(/^=\s*|\s*$/g,"")+");\n":o+="  "+e+"\n":e&&(o+="  p.push('"+e.replace(/'/g,"\\'").split(/\r?\n/g).join("\\n');\n  p.push('")+"');\n"),i=!i}),o+='} return p.join("");';try{n=new Function("o",o)}catch(e){r=new Error("Cannot parse template! (see `template` property)");throw r.template=o,r}}return t?n(t):n}function flash(){var e=document.createElement("div");e.style.background="white",e.style.opacity=.005,e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.width="100%",e.style.height="100%",e.style.zIndex=2147483647,document.body.appendChild(e),setTimeout(function(){e.parentNode.removeChild(e)},0)}function crc32(e){"use strict";for(var t=-1,n=0,r=[0,-227835133,-516198153,324072436,-946170081,904991772,648144872,-724933397,-1965467441,2024987596,1809983544,-1719030981,1296289744,-1087877933,-1401372889,1578318884,274646895,-499825556,-244992104,51262619,-675000208,632279923,922689671,-996891772,-1702387808,1760304291,2075979607,-1982370732,1562183871,-1351185476,-1138329528,1313733451,549293790,-757723683,-1048117719,871202090,-416867903,357341890,102525238,-193467851,-1436232175,1477399826,1264559846,-1187764763,1845379342,-1617575411,-1933233671,2125378298,820201905,-1031222606,-774358714,598981189,-143008082,85089709,373468761,-467063462,-1170599554,1213305469,1526817161,-1452612982,2107672161,-1882520222,-1667500394,1861252501,1098587580,-1290756417,-1606390453,1378610760,-2032039261,1955203488,1742404180,-1783531177,-878557837,969524848,714683780,-655182201,205050476,-28094097,-318528869,526918040,1361435347,-1555146288,-1340167644,1114974503,-1765847604,1691668175,2005155131,-2047885768,-604208612,697762079,986182379,-928222744,476452099,-301099520,-44210700,255256311,1640403810,-1817374623,-2130844779,1922457750,-1503918979,1412925310,1197962378,-1257441399,-350237779,427051182,170179418,-129025959,746937522,-554770511,-843174843,1070968646,1905808397,-2081171698,-1868356358,1657317369,-1241332974,1147748369,1463399397,-1521340186,-79622974,153784257,444234805,-401473738,1021025245,-827320098,-572462294,797665321,-2097792136,1889384571,1674398607,-1851340660,1164749927,-1224265884,-1537745776,1446797203,137323447,-96149324,-384560320,461344835,-810158936,1037989803,781091935,-588970148,-1834419177,1623424788,1939049696,-2114449437,1429367560,-1487280117,-1274471425,1180866812,410100952,-367384613,-112536529,186734380,-538233913,763408580,1053836080,-860110797,-1572096602,1344288421,1131464017,-1323612590,1708204729,-1749376582,-2065018290,1988219213,680717673,-621187478,-911630946,1002577565,-284657034,493091189,238226049,-61306494,-1307217207,1082061258,1395524158,-1589280451,1972364758,-2015074603,-1800104671,1725896226,952904198,-894981883,-638100751,731699698,-11092711,222117402,510512622,-335130899,-1014159676,837199303,582374963,-790768336,68661723,-159632680,-450051796,390545967,1230274059,-1153434360,-1469116676,1510247935,-1899042540,2091215383,1878366691,-1650582816,-741088853,565732008,854102364,-1065151905,340358836,-433916489,-177076669,119113024,1493875044,-1419691417,-1204696685,1247431312,-1634718085,1828433272,2141937292,-1916740209,-483350502,291187481,34330861,-262120466,615137029,-691946490,-980332558,939183345,1776939221,-1685949482,-1999470558,2058945313,-1368168502,1545135305,1330124605,-1121741762,-210866315,17165430,307568514,-532767615,888469610,-962626711,-707819363,665062302,2042050490,-1948470087,-1735637171,1793573966,-1104306011,1279665062,1595330642,-1384295599],n=0;n<e.length;n++)t=t>>>8^r[255&(t^e.charCodeAt(n))];return(-1^t)>>>0}function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)}function isDefAndNotNull(e){return null!=e}function updateQueryStringParameter(e,t,n){t=encodeURIComponent(t),n=encodeURIComponent(n);var r=new RegExp("([?|&])"+t+"=.*?(&|$)","i");return separator=-1!==e.indexOf("?")?"&":"?",e.match(r)?e.replace(r,"$1"+t+"="+n+"$2"):e+separator+t+"="+n}function fetchShortenedUrl(r,e,t){t=t||noop;var n,o=!1,i=fetchShortenedUrl.inProgress,a=fetchShortenedUrl.cache;function c(t,n){i[r].forEach(function(e){e[t](n)}),delete i[r]}"http"==!r.slice(0,4)?t():a[r]?defer(function(){e(a[r])},0,"fetchShortenedUrl defer success callback"):(i[r]||(i[r]=[],o=!0),i[r].push({success:e,error:t}),o&&(t=(creative.runtimeParams.secure?creative.cachedApiUrl:creative.insecureCachedApiUrl)+"shortenedUrls/",o={url:r,fields:"shortUrlKey"},n={cbName:"shortener_"+btoa(to_utf8(r)).replace(/\//g,"$").replace(/\+/g,"_").replace(/=/g,"")},loadJSONP(t+"?"+buildQuery(o),n,function(e){e=creative.shareUrl+e.shortUrlKey;c("success",a[r]=e)},function(){requestCreateShortenedUrl(r,c)})))}function requestCreateShortenedUrl(t,n){var e=(creative.runtimeParams.secure?creative.apiUrl:creative.insecureApiUrl)+"shortenedUrls/",r=fetchShortenedUrl.cache,o=new XMLHttpRequest;o.open("POST",e),o.setRequestHeader("Content-Type","application/json; charset=utf-8"),o.onreadystatechange=function(){var e;4===o.readyState&&(201===o.status?(e=JSON.parse(o.responseText),e=creative.shareUrl+e.shortUrlKey,r[t]=e,n("success",e)):n("error"))},o.send(JSON.stringify({url:t}))}function isMediaPlaying(e){try{return 0<e.currentTime&&!e.paused&&!e.ended}catch(e){return!1}}function merge(){for(var e,t={},n=0;n<arguments.length;n+=1)if(null!=(e=arguments[n]))for(var r in e)t[r]=e[r];return t}function clamp(e,t,n){return Math.max(e,Math.min(t,n))}function lerp(e,t,n){return e+n*(t-e)}function map(e,t,n,r,o){return(o-e)/(t-e)*(r-n)+n}function step(e,t){return t<e?0:1}function pulse(e,t,n){return step(e,n)-step(t,n)}function smoothstep(e,t,n){n=clamp(0,1,(n-e)/(t-e));return n*n*n*((6*n-15)*n+10)}function bump(e,t,n){n=clamp(0,1,(n-e)/(t-e));return(Math.cos(Math.PI*n)+1)/2}function getWindowNesting(e){var t={iframe:e!==e.top,friendlyIframe:!1,iabFriendlyIframe:!1,hostileIframe:!1,iframeDepth:0};if(t.iframe){var n=e;try{for(t.friendlyIframe=!!e.top.location.href,t.iabFriendlyIframe=t.friendlyIframe&&void 0!==e.inDapIF&&e.inDapIF;void 0!==n.parent.location.href&&n.parent.document!==n.document;)n=n.parent,t.iframeDepth++;void 0===e.top.document&&(t.hostileIframe=!0)}catch(e){t.hostileIframe=!0}}return t}function isFetchSupported(){return!!(window.fetch&&window.URL&&URL.createObjectURL)}function isBeaconSupported(){return!(!window.navigator||!window.navigator.sendBeacon)}function isNativeImplementation(e){return"function"==typeof e&&-1<e.toString().indexOf("[native code]")}function getViewportGeometry(e,t){var n=deviceInfo.deviceType.desktop()&&"BackCompat"!=e.document.compatMode,r=deviceInfo.os.ios("9",null),o=e.document.documentElement||{};return{width:"win"!==t&&(n||r||"doc"===t)?o.clientWidth:e.innerWidth,height:"win"!==t&&(n||"doc"===t)?o.clientHeight:e.innerHeight,left:e.scrollX||o.scrollLeft||0,top:e.scrollY||o.scrollTop||0}}function safeQuerySelector(e,t){try{return e.querySelector(t)}catch(e){return null}}function safeQuerySelectorAll(e,t){try{return e.querySelectorAll(t)}catch(e){return[]}}function getElementRectRelativeToTopViewport(e){var t=e?CRect.adopt(e.getBoundingClientRect()):CRect.ZERO,n=e.ownerDocument&&e.ownerDocument.defaultView||null;try{for(;n&&n!==n.parent&&void 0!==n.parent.location.href&&n.parent.document!==n.document&&n.frameElement;){var r=CRect.adopt(n.frameElement.getBoundingClientRect());t.left+=r.left,t.top+=r.top,n=n.parent}}catch(e){}return t}Date.now||(Date.now=function(){return+new Date}),Array.prototype.waitForEach||Object.defineProperty(Array.prototype,"waitForEach",{value:function(o,i,a){var c=this.length;c?this.forEach(function(e,t,n){var r=!1;o.call(a,e,function(){if(r)throw"Called `done` multiple times for element "+t;r=!0,--c||i()},t,n)},a):i()}}),function(i){i.loadJS=function(t,e,n,r){var o=i.loadJS.externals,e={success:e||noop,error:n||noop};if(!/^[A-Za-z0-9]*:\/\/|^\/\//.test(t)){var n=creative.hostedFiles.filter(function(e){return e.filepath===t})[0];if(void 0===n)return console.warn('Hosted file "'+t+'" was not found.'),void e.error();if(!1!==n.loaded)return console.warn('Hosted file "'+t+'" is already loaded.'),void setTimeout(e.success,0);n.loaded=!0,t=creative.cachedApiUrl+"hostedFiles/"+creative.id+"/"+creative.version+"/"+t}t in o&&!r?o[t].loaded?setTimeout(e.success,0):o[t].cbs.push(e):(o[t]={cbs:[e]},(n=document.createElement("script")).type="text/javascript",n.onload=function(){o[t].loaded=!0,o[t].cbs.forEach(function(e){e.success()}),o[t].cbs=[]},n.onerror=function(){o[t].cbs.forEach(function(e){e.error()}),o[t].cbs=[],delete o[t]},n.src=t,i.loadJS.appendToRoot(n))},i.loadJS.externals={},i.loadJS.appendToRoot=function(e){return document.querySelector("head").appendChild(e)},i.loadJSONP=function(e,t,n,r){"function"==typeof t&&(r=n,n=t,t={});var o=t.cbName||"__jsonp"+randInt();e+=(-1==e.indexOf("?")?"?":"&")+(t.paramName||"jsonp")+"="+o,i[o]=function(e){n(e),delete i[o]},loadJS(e,noop,r,!0)}}(window),void 0===Function.prototype.name&&function(){var t=/^function\s+(\w+?)\s*?\(/;Object.defineProperty(Function.prototype,"name",{get:function(){var e=this.constructor.prototype.toString.call(this);return t.test(e)?e.match(t)[1]:""}})}(),fetchShortenedUrl.cache={},fetchShortenedUrl.inProgress={};;
function CTickerQueue(){this._queue=[],this._i=this.length}Object.defineProperty(CTickerQueue.prototype,"length",{get:function(){return this._queue.length}}),CTickerQueue.filterNulls=function(e){return null!==e},CTickerQueue.prototype._removeNulls=function(){this._queue=this._queue.filter(CTickerQueue.filterNulls)},CTickerQueue.prototype.process=function(e){if(this.length){for(this._i=0;this._i<this.length;this._i++)this._queue[this._i]&&this._queue[this._i](e);this._removeNulls()}},CTickerQueue.prototype.add=function(e){this._queue.indexOf(e)<0&&this._queue.push(e)},CTickerQueue.prototype.remove=function(e){e=this._queue.indexOf(e);~e&&(this._queue[e]=null)},CTickerQueue.prototype.empty=function(){this.length&&(this._queue.length=0)};;
function CTicker(e,t){this._win=t||window,e.environment&&e.isNative&&!e.isRequestAnimationFrameBroken&&!this._isDeviceUserAgentBlacklisted?this.raf=e.environment:this.raf=e.polyfill,this._queues={update:new CTickerQueue,nextUpdate:new CTickerQueue,render:new CTickerQueue,nextRender:new CTickerQueue,next:new CTickerQueue},this._tick=this._tick.bind(this),this.raf.nextFrame(this._tick)}Object.defineProperty(CTicker.prototype,"_isDeviceUserAgentBlacklisted",{get:function(){var t=this._win.navigator.userAgent;return["RAZR HD","SOL23","LG-D855","LG-D851","LG-D850","LG-D852","LGLS990","LGUS990","VS985 4G"].some(function(e){return-1<t.indexOf(e)})}}),CTicker.prototype.stop=function(){try{this._queues.update.empty(),this._queues.render.empty()}finally{this.raf.cancelFrame(this._tick)}},CTicker.prototype._tick=function(e){try{this._queues.update.process(e),this._queues.nextUpdate.process(e),this._queues.render.process(e),this._queues.nextRender.process(e),this._queues.next.process(e),this._queues.next.empty(),this._queues.nextRender.empty(),this._queues.nextUpdate.empty()}finally{this.raf.nextFrame(this._tick)}},CTicker.prototype.frame=function(e,t){this._queues[t=t||"render"].add(e)},CTicker.prototype.removeFrame=function(e,t){this._queues[t=t||"render"].remove(e)};;
function RequestAnimationFrameWrapper(e){this._lastTime=0,this._win=e,this._createRAFWrapper=this._createRAFWrapper.bind(this),this._createCAFWrapper=this._createCAFWrapper.bind(this);var e=this._extractFromWindow(this._win),t=this._createPolyfill();this.environment=this._wrapRafAndCaf(e),this.polyfill=this._wrapRafAndCaf(t),this.isNative=!!e&&this._isNative(e.nextFrame)}Object.defineProperty(RequestAnimationFrameWrapper.prototype,"isRequestAnimationFrameBroken",{get:function(){var e=getWindowNesting(this._win);return!(!deviceInfo.browser.firefox()||!e.hostileIframe)}}),RequestAnimationFrameWrapper.prototype._extractFromWindow=function(t){var r=t.requestAnimationFrame||null,n=t.cancelAnimationFrame||null;return["ms","moz","webkit","o"].forEach(function(e){r=r||t[e+"RequestAnimationFrame"]||null,n=n||t[e+"CancelAnimationFrame"]||t[e+"CancelRequestAnimationFrame"]||null}),{nextFrame:r,cancelFrame:n}},RequestAnimationFrameWrapper.prototype._createPolyfill=function(){var i=this;return{nextFrame:function(e){var t=getTimestamp(),r=Math.max(0,16-(t-i._lastTime)),n=i._win.setTimeout(function(){e(t+r)},r);return i._lastTime=t+r,n},cancelFrame:function(e){i._win.clearTimeout(e)}}},RequestAnimationFrameWrapper.prototype._isNative=function(e){return!!(e&&-1<Function.prototype.toString.call(e).indexOf("[native code]"))},RequestAnimationFrameWrapper.prototype._wrapRafAndCaf=function(e){return e&&e.nextFrame&&e.cancelFrame?{nextFrame:this._createRAFWrapper(e.nextFrame),cancelFrame:this._createCAFWrapper(e.cancelFrame)}:null},RequestAnimationFrameWrapper.prototype._createRAFWrapper=function(t){return function(e){return t.call(this._win,e)}.bind(this)},RequestAnimationFrameWrapper.prototype._createCAFWrapper=function(t){return function(e){t.call(this._win,e)}.bind(this)};;
function CPoint(t,i){this.x=+t||0,this.y=+i||0}function CRect(t,i,e,o){this.left=+t||0,this.top=+i||0,this.width=+e||0,this.height=+o||0}CPoint.offset=function(t){t=offset(t);return new CPoint(t.left,t.top)},CPoint.convertPointFromNodeToPage=function(t,i){return t&&void 0===t.x?(t=CPoint.offset(t),new CPoint((i?i.x:0)+(t?t.x:0),(i?i.y:0)+(t?t.y:0))):null},CPoint.convertPointFromPageToNode=function(t,i){return t&&void 0===t.x?(t=CPoint.offset(t),new CPoint((i?i.x:0)-(t?t.x:0),(i?i.y:0)-(t?t.y:0))):null},CPoint.sample=function(t,i,e){for(var o=Math.floor(Math.sqrt(t.width*i/t.height)),n=Math.floor(Math.sqrt(t.height*i/t.width)),h=t.width/o,r=t.height/n,s=0;s<n;s++)for(var f=0;f<o;f++)e((f+.5)*h+t.left,(s+.5)*r+t.top)},CPoint.epsilon=function(t,i,e){return Math.abs(t-i)<e},CPoint.prototype.equals=function(t){return CPoint.epsilon(this.x,t.x,.25)&&CPoint.epsilon(this.y,t.y,.25)},CRect.ZERO=new CRect,Object.defineProperties(CRect.prototype,{right:{get:function(){return this.left+this.width},set:function(t){var i=this.left;t<this.left&&(this.left=t,t=i),this.width=t-this.left},enumerable:!0},bottom:{get:function(){return this.top+this.height},set:function(t){var i=this.top;t<this.top&&(this.top=t,t=i),this.height=t-this.top},enumerable:!0},tl:{get:function(){return new CPoint(this.left,this.top)}},tr:{get:function(){return new CPoint(this.right,this.top)}},bl:{get:function(){return new CPoint(this.left,this.bottom)}},br:{get:function(){return new CPoint(this.right,this.bottom)}},area:{get:function(){return this.width*this.height}}}),CRect.adopt=function(t){return new CRect(t.left,t.top,t.width,t.height)},CRect.prototype.zero=function(){return 0===this.area},CRect.prototype.intersect=function(t){var i,e,o;return!!t&&(i=Math.max(this.left,t.left),e=Math.max(this.top,t.top),o=Math.min(this.right,t.right)-i,t=Math.min(this.bottom,t.bottom)-e,o<0||t<0?CRect.ZERO:new CRect(i,e,o,t))},CRect.prototype.copyFrom=function(t){this.left=t.left,this.top=t.top,this.width=t.width,this.height=t.height},CRect.prototype.relativeTo=function(t){return new CRect(this.left-t.left,this.top-t.top,this.width,this.height)},CRect.prototype.contains=function(t){return t instanceof CPoint?t.x>=this.left&&t.x<=this.right&&t.y>=this.top&&t.y<=this.bottom:t instanceof CRect?t.left>=this.left&&t.right<=this.right&&t.top>=this.top&&t.bottom<=this.bottom:void 0},CRect.prototype.map=function(t,i){var e=i.width/t.width,o=i.height/t.height;return new CRect((this.left-t.left)*e+i.left,(this.top-t.top)*o+i.top,this.width*e,this.height*o)},CRect.prototype.equals=function(t){return t&&this.left==t.left&&this.top==t.top&&this.right==t.right&&this.bottom==t.bottom},CRect.prototype.toString=function(){return"CRect: "+JSON.stringify(this)};;
window.CeltraDeviceInfo={},function(o){function s(e,n){this.os=new t(e.osName,e.osVersion),this.browser=new r(e.browserName,e.browserVersion,n),this.engine=new i(e.browserRenderingEngine,e.browserRenderingEngineVersion),this.deviceType=new a(e.deviceType,e.mobileDevice),this.vendor=e.vendor||"",this.model=e.model||"",this.userAgent=n}function t(e,n){this.name=e||"",this.version=n||"0"}function r(e,n,t){this.name=e||"",this.version=n||"0",this.userAgent=t}function i(e,n){this.name=e||"",this.version=n||"0"}function a(e,n){this.hardwareType=e||"",this.mobile=n||""}function h(e,n){var t,r,i;if(!e)return!0;if(0===n.length)i=r=null;else if(1===n.length)r=n[0],i=n[0];else{if(2!==n.length)throw"Invalid number of arguments";r=n[0],i=n[1]}function o(e){return parseInt(e.replace(/\D/g,""),10)}for(e=e.split(".").map(o),r=r?r.split(".").map(o):[],i=i?i.split(".").map(o):[],t=Math.max(r.length,i.length)-e.length;0<=t;t--)e.push(0);function s(e,n){for(var t=0;t<Math.min(e.length,n.length);t++){if(e[t]<n[t])return-1;if(e[t]>n[t])return 1}return 0}return!(-1===s(e,r)||1===s(e,i))}t.prototype.android=function(){return"Android"===this.name&&h(this.version,arguments)},t.prototype.osx=function(){return"OSX"===this.name&&h(this.version,arguments)},t.prototype.ios=function(){return"IOS"===this.name&&h(this.version,arguments)},t.prototype.windows=function(){return"Windows"===this.name&&h(this.version,arguments)},t.prototype.windowsPhone=function(){return"WindowsPhone"===this.name&&h(this.version,arguments)},t.prototype.linux=function(){return"Linux"===this.name},r.prototype.safari=function(){return"Safari"===this.name&&h(this.version,arguments)},r.prototype.chrome=function(){return 0===this.name.indexOf("Chrom")&&h(this.version,arguments)},r.prototype.ie=function(){return 0===this.name.indexOf("Internet Explorer")&&h(this.version,arguments)},r.prototype.android=function(){return"Android Browser"===this.name&&h(this.version,arguments)},r.prototype.samsung=function(){return"Samsung Browser"===this.name&&h(this.version,arguments)},r.prototype.opera=function(){return 0===this.name.indexOf("Opera")&&h(this.version,arguments)},r.prototype.silk=function(){return"Amazon Silk"===this.name&&h(this.version,arguments)},r.prototype.firefox=function(){return 0===this.name.indexOf("Firefox")&&h(this.version,arguments)},r.prototype.edge=function(){return"Edge"===this.name&&h(this.version,arguments)},r.prototype.miui=function(){return"MIUI Browser"===this.name&&h(this.version,arguments)},r.prototype.webView=function(){var e,n,t=null;return"iP"===(o.navigator.platform||"").substr(0,2)?(e=-1!==(e=this.userAgent).indexOf("Safari")&&-1!==e.indexOf("Version"),n=!/constructor/i.test(o.HTMLElement),e&&!o.navigator.standalone?t="iOS Safari or Safari Controller":(n||o.indexedDB)&&o.statusbar.visible?(o.webkit&&o.webkit.messageHandlers||n||o.indexedDB)&&(t="WKWebView"):t="UIWebView"):/^.*\/\d\.\d \(.*wv\).*/.test(this.userAgent)&&(t="AndroidWebView"),t},r.prototype.facebookApp=function(){var e=this.userAgent;return-1<e.indexOf("FBAN")||-1<e.indexOf("FBAV")},i.prototype.webkit=function(){return"WebKit"===this.name&&h(this.version,arguments)},i.prototype.gecko=function(){return"Gecko"===this.name&&h(this.version,arguments)},i.prototype.trident=function(){return"Trident"===this.name&&h(this.version,arguments)},i.prototype.presto=function(){return"Presto"===this.name&&h(this.version,arguments)},i.prototype.blink=function(){return"Blink"===this.name&&h(this.version,arguments)},a.prototype.phone=function(){return"Phone"===this.hardwareType},a.prototype.tablet=function(){return"Tablet"===this.hardwareType},a.prototype.desktop=function(){return"Desktop"===this.hardwareType},a.prototype.mobileDevice=function(){return!0===this.mobile},o.CeltraDeviceInfo.create=function(e,n){var t,r,i;return e=e||o.navigator.userAgent||"",r=n=n||{},-1===(t=e).indexOf("Playstation")&&(i=t.match(/\bSilk\/([0-9._-]+)\b/))&&(r.browserName="Amazon Silk",r.browserVersion=i[1]),r.browserName&&r.browserVersion&&(0===r.browserName.indexOf("Chrome")&&h(r.browserVersion,["28",null])||0===r.browserName.indexOf("Opera")&&h(r.browserVersion,["15",null]))&&(r.browserRenderingEngine="Blink"),r.browserRenderingEngineVersion||(r.browserRenderingEngineVersion=(i=(i=(i=t.match(/Trident\/([0-9.]+)/))||((i=t.match(/Presto\/([0-9.]+)/))||t.match(/AppleWebKit\/*([0-9.]+)/i)))||t.match(/Gecko\/*([0-9.]+)/))?i[1]:""),new s(n,e)}}(window);;
window.deviceInfo=CeltraDeviceInfo.create(window.navigator.userAgent,window.celtraDeviceInfoRuntimeParams);;
!function(e){e.celtra=e.celtra||{};var t={},u=(t.ios=i,t.android=r,t.webkit=function(){var e=n().match(/AppleWebKit\/*([0-9.]+)/i);return!!e&&a(e[1],arguments)},t.windowsPhone=o,t.gecko=function(){var e=n().match(/Gecko\/*([0-9.]+)/i);return!!e&&a(e[1],arguments)},t.windows=function(){var e=n().match(/MSIE ([0-9]{1,}[.0-9]{0,})|Trident.* rv:([0-9]{1,}[.0-9]{0,})/i);return!!e&&a(e[1]||e[2],arguments)},t.kindleSilk=function(){var e=n().match(/Silk\/([0-9.]+)/);return!!e&&a(e[1],arguments)},t.kindle=function(){var e=n().toLowerCase();return!!/kftt|kfot|kfjwi|kfjwa|kfso|kfth|kfapwi|kfthwi|kfsowi|kfthwa|kfapwa|kfap|sd4930ur/.test(e)&&a("2",arguments)},t.iframe=function(){return u.top!==e},t.desktop=function(){return!(r()||i()||o())},t.tablet=function(){return/iPad/.test(n())||550<("undefined"!=typeof offsetWidthOverride?offsetWidthOverride:(document.body.offsetWidth,Math.min(innerWidth,innerHeight)))},t.chromeBased=function(){if(!(i()||window.chrome&&"Google Inc."===window.navigator.vendor))return!1;var e;e=i()?n().match(/CriOS\/([0-9]+.)/):n().match(/Chrome\/([0-9]+.)/);return!!e&&a(e[1],arguments)},t.isHighDensityDisplay=function(){return 1<window.devicePixelRatio||window.matchMedia&&window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),(min--moz-device-pixel-ratio: 1.5),(-o-min-device-pixel-ratio: 3/2),(min-resolution: 1.5dppx)").matches},extend(e.celtra,t),delete t.webkit,extend(e,t),{max:e.Math.max,min:e.Math.min,userAgent:e.navigator.userAgent,top:e.top}),n=function(){return void 0!==e.userAgentOverride?e.userAgentOverride:u.userAgent};function i(){var e=n().match(/iP(ad|hone|od).*OS ([0-9_]+)/);return!!e&&a(e[2].replace(/_/g,"."),arguments)}function r(){var e=n().match(/Android ([0-9.]+)/);return!n().match(/Windows Phone/)&&!!e&&a(e[1],arguments)}function o(){var e=n().match(/Windows Phone ([0-9.]+)/);return!!e&&a(e[1],arguments)}function a(e,t){if(!e)return!0;if(0===t.length)r=i=null;else if(1===t.length)i=t[0],r=t[0];else{if(2!==t.length)throw"Invalid number of arguments";i=t[0],r=t[1]}function n(e){return parseInt(e.replace(/\D/g,""),10)}e=e.split(".").map(n);for(var i=i?i.split(".").map(n):[],r=r?r.split(".").map(n):[],o=u.max(i.length,r.length)-e.length;0<=o;o--)e.push(0);function a(e,t){for(var n=0;n<u.min(e.length,t.length);n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0}return!(-1===a(e,i)||1===a(e,r))}}(window);;
!function(n){var e=n.navigator.userAgent,r=function(){var e=n;try{for(;void 0!==e.parent.location.href&&e.parent.document!==e.document;)e=e.parent}catch(e){}return e}(),t=/rv:.*Gecko\//.test(e),i=/MSIE|Trident\//.test(e),o=/WebKit/.test(e),a=/^-?([mM]oz|[wW]eb[kK]it|[mM]s)-?/,l={},s=[],f=o?"webkit":i?"ms":t?"Moz":"",u=(e=e.match(/AppleWebKit\/(\d+)/))&&~~e[1]<540,c=["transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","backface-visibility","perspective","perspective-origin"],m=d();function d(){return r.getComputedStyle(r.document.body,null)}function p(e,t,i){if(!e)throw new Error("No element specified!");if(E(t)){if(!(t in e.style)&&p.BREAK_ON_ERROR)throw new Error("Invalid CSS attribute "+t);if(void 0===i)return e.style[t];e.style[t]=i}else{if(-1==s.indexOf(t)&&y(t),void 0===i)return e.style[l[t]];e.style[l[t]]=i}}function w(e,t){if(!e)throw new Error("No element specified!");var i,e=e.ownerDocument.defaultView.getComputedStyle(e,null);if(u&&-1<c.indexOf(t)&&(t="webkit"+v(t)),!e||"none"==e.display||!(n===r||(i=n.frameElement.ownerDocument.defaultView.getComputedStyle(n.frameElement,null))&&"none"!=i.display))return null;if(t in e||!p.BREAK_ON_ERROR)return E(t)?e[t]:(-1==s.indexOf(t)&&y(t),e[l[t]]);throw new Error("Invalid CSS attribute "+t)}function y(e){m=m||d();var t=f+v(e);if(u&&-1<c.indexOf(e))l[e]=t;else if(m&&e in m)l[e]=e;else if(m&&t in m)l[e]=t;else if(!m&&deviceInfo.browser.firefox)l[e]=e;else if(p.BREAK_ON_ERROR)throw new Error("Invalid CSS attribute "+e+' or iframe still display "none" in FF');s.push(e)}function E(e){return a.test(e)}function v(e){return(e+="")?e[0].toUpperCase()+e.slice(1):""}p.BREAK_ON_ERROR=!1,n.celtra=n.celtra||{},n.celtra.styler={css:p,computedCSS:w,isWebkit:o,isGecko:t,isIE:i},n.css=p,n.computedCSS=w}(window);;
function PerformanceTracker(t,e){this.trackingCenter=t,this.trackingEnabled=e.get("PerformanceTiming")||e.get("MonotypeOffloadFonts"),this._id=0}PerformanceTracker.prototype.start=function(t,e){var r=this,t={name:t,type:"interval",id:this._id++,startTime:Date.now(),args:e||[]};return t.end=function(){this.endTime=Date.now();var t=this.endTime-this.startTime;Logger("perf").log(this.name+"(#"+this.id+") "+t),r.collect(this)}.bind(t),t},PerformanceTracker.prototype.collect=function(t){this.trackingEnabled&&(t={name:"perfTiming",section:t.name,type:t.type,perfId:t.id,startTime:t.startTime,endTime:t.endTime,args:t.args},this.trackingCenter.trackNoLaterThan(t,1e3))},PerformanceTracker.prototype.mark=function(t){t=this.start(t);t.type="mark",t.endTime=t.startTime,this.collect(t)},PerformanceTracker.prototype.marks=function(t){return function(){this.mark(t)}.bind(this)};;
var EventEmitter={emit:function(e){var t,n=this._listeners;n&&n[e]&&(t=[].slice.call(arguments,1),n[e].forEach(function(e){if("undefined"!=typeof window)e.apply(window,t);else{if("undefined"==typeof self)throw"EventEmitter not supported in current scope.";e.apply(self,t)}}))},emits:function(e){var t=arguments;return function(){this.emit.apply(this,t)}.bind(this)},addListener:function(e,t){var n=this._listeners;(n=n||(this._listeners={}))[e]||(n[e]=[]),n[e].push(t)},removeListener:function(e,t){var n=this._listeners;n&&n[e]&&(n[e]=n[e].filter(function(e){return e!==t}))},once:function(t,n){var i=this;i.on(t,function e(){i.off(t,e),n.apply(this,arguments)})},onAll:function(e,t){e.split(" ").waitForEach(function(e,t){this.once(e,t)},t,this)}};EventEmitter.on=EventEmitter.addListener,EventEmitter.off=EventEmitter.removeListener,EventEmitter.addEventListener=EventEmitter.addListener,EventEmitter.removeEventListener=EventEmitter.removeListener,"undefined"!=typeof module&&null!==module&&(module.exports=EventEmitter);;
function TaskScheduler(){this.hub=extend({},EventEmitter)}TaskScheduler.prototype.when=function(){var n=this,e=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return{run:function(t){e.waitForEach(function(t,e){n.hub.once(t,e)},t)}}},TaskScheduler.prototype.notify=function(t){this.paused||this.hub.emit(t)},TaskScheduler.prototype.notifies=function(t){return function(){this.notify(t)}.bind(this)},TaskScheduler.prototype.pause=function(){this._paused=!0};;
function TrackingCenter(e,t,n,i,s,r){this._sessionId=e,this._accountId=t,this._trackingUrl=i,this._trackers=s,this._purpose=n,this._flushCycle=null,this._flushCycleLength=1e4,this._useBatching=r,this._usePixel=!0,this.windowForPixels=window,this._instantiation=randInt(),this._eventIndex=0,this._pendingEvents=[],this._eventsInProgress=[],this._pendingPixels=[],this._waitingTrackingRequests=0,this._isBeaconSupported=this.windowForPixels.navigator&&this.windowForPixels.navigator.sendBeacon,this._decrementWaiting=this._decrementWaiting.bind(this),this.flush=this.flush.bind(this),this.batchFlush=this.batchFlush.bind(this),this._flushPixels=this._flushPixels.bind(this)}extend(TrackingCenter.prototype,EventEmitter),TrackingCenter.eventCountLimit=1e3,TrackingCenter.prototype.setExperimentStatus=function(e){var t;e&&e.get&&(t=e.get("BatchTrackingRequests"),this._useBatching=t?"control"!==t.chosenVariant.slice(0,7):this._useBatching,t=t&&"Beacon"===t.chosenVariant.slice(-6),e=e.get("TrackWithBeaconAPI")||t,this._useBeacon=e&&this._isBeaconSupported,this._usePixel=!(t&&this._useBeacon))},TrackingCenter.prototype.batchFlush=function(){this._useBatching?this.flush():noop()},TrackingCenter.prototype.startBatchFlushCycle=function(e){this._useBatching&&(this.windowForPixels.setTimeout(this.flush,e),this._flushCycle=this.windowForPixels.setTimeout(this.flush,this._flushCycleLength))},TrackingCenter.prototype.isTrackingLimitReached=function(){return this._eventIndex>=TrackingCenter.eventCountLimit},TrackingCenter.prototype._createTrackingEvent=function(e){return e=JSON.parse(JSON.stringify(e)),extend({sessionId:this._sessionId,accountId:this._accountId,stream:"adEvents",instantiation:this._instantiation,index:this._eventIndex++,clientTimestamp:new Date/1e3},e)},TrackingCenter.prototype._addEventPendingToQueues=function(e){e=this._resolvePixelsAndEventsForQueue([e]);this.isTrackingLimitReached()&&e.events.push(this._createTrackingEvent({name:"eventLimitReached"})),e.events.forEach(function(e){Logger("tracking").log("Queuing event "+JSON.stringify(e))}),e.pixels.forEach(function(e){Logger("tracking").log("Queuing pixel "+JSON.stringify(e))}),this._pendingEvents=this._pendingEvents.concat(e.events),this._pendingPixels=this._pendingPixels.concat(e.pixels)},TrackingCenter.prototype.track=function(e,t){this.trackNoLaterThan(e,0,t)},TrackingCenter.prototype.trackNoLaterThan=function(e,t,n){var i,s,r;this.isTrackingLimitReached()?console.warn("Tracking limit reached: "+TrackingCenter.eventCountLimit+" events."):(i=t,parseInt(i,10)!==i?t=1500:t<0&&(t=0),n=n||noop,"live"!==this._purpose?(i=this._createTrackingEvent(e),Logger("tracking").log("Ignoring non-live event "+JSON.stringify(i)),defer(n)):(s=null,this._addEventPendingToQueues(e),r=this.windowForPixels,this.once("trackingQueueEmptied",function(){s&&(r.clearTimeout(s),s=null),n()}.bind(this)),s=this._useBatching?r.setTimeout(this._flushPixels,t):r.setTimeout(this.flush,t)))},TrackingCenter.prototype._resolvePixelsAndEventsForQueue=function(e){var o=this;return function e(t,n,i){var s,r;return 0==t.length?{events:n,pixels:i}:(s=t[0],s=o._createTrackingEvent(s),r=o._trackers.urlsAndEventsFor(s),e(t.slice(1).concat(r.events||[]),n.concat(s),i.concat(r.urls||[])))}(e,[],[])},TrackingCenter.prototype._fireBeacon=function(e,t){this.windowForPixels.navigator.sendBeacon(e),t()},TrackingCenter.prototype._firePixel=function(e,t){function n(){i.onload=i.onerror=null,t()}var i=this.windowForPixels.document.createElement("img");i.onload=i.onerror=n;try{i.src=e}catch(e){n()}},TrackingCenter.prototype._decrementWaiting=function(){0<this._waitingTrackingRequests&&(--this._waitingTrackingRequests||this.emit("trackingQueueEmptied"))},TrackingCenter.prototype.flush=function(e,t,n){var i,s=this,r=e||noop,o=(t=void 0===t?this._usePixel:t,n=void 0===n?this._useBeacon:n,s._pendingEvents);s._pendingEvents=[],s._eventsInProgress=s._eventsInProgress.concat(o),o.length&&(s._waitingTrackingRequests++,this._useBatching&&(this.windowForPixels.clearTimeout(this._flushCycle),r=function(){s._flushCycle=s.windowForPixels.setTimeout(s.flush,s._flushCycleLength),(e||noop)()}),i=function(){s._eventsInProgress=s._eventsInProgress.filter(function(e){return-1===o.indexOf(e)}),s._decrementWaiting()},n&&s._fireBeacon(s._getTrackerBeaconUrl(o),i),t&&s._firePixel(s._getTrackerPixelUrl(o),i)),s._flushPixels(),0===s._waitingTrackingRequests?this.windowForPixels.setTimeout(r,0):this.once("trackingQueueEmptied",r)},TrackingCenter.prototype.flushWithBeacon=function(e){this._isBeaconSupported?this.flush(e,!1,!0):this.flush(e)},TrackingCenter.prototype._flushPixels=function(){var t=this;t._pendingPixels.forEach(function(e){t._waitingTrackingRequests++,t._firePixel(e,t._decrementWaiting)}),t._pendingPixels=[]},TrackingCenter.prototype._getTrackerUrl=function(e){return base64json=this.windowForPixels.btoa(to_utf8(JSON.stringify(e))),this._trackingUrl+"json/"+base64json+"?crc32c="+crc32(base64json)},TrackingCenter.prototype._getTrackerPixelUrl=function(e){return this._getTrackerUrl({events:e})},TrackingCenter.prototype._getTrackerBeaconUrl=function(e){return this._getTrackerUrl({events:e.map(function(e){e=JSON.parse(JSON.stringify(e));return e.beacon=!0,e})})},TrackingCenter.prototype._getTrackerRedirectUrl=function(e,t,n,i){e={events:e,pixels:t,dest:n};return(i=i||{}).jsRedirectFunc&&(e.redirectFunc=i.jsRedirectFunc),this._getTrackerUrl(e)},TrackingCenter.prototype.wrapRedirectPageUrl=function(e,t){e=this._getTrackerRedirectUrl(this._pendingEvents.concat(this._eventsInProgress),this._pendingPixels,e,t);return this._useBeacon?this.flush(void 0,!1):(this._pendingEvents=[],this._pendingPixels=[]),e};;
function Experiments(t,e){for(var n in this._instances={},t)this._instances[n]=new Experiment(n,t[n],e);e.setExperimentStatus(this)}function Experiment(t,e,n){this.key=t,this.chosenVariant=e,this._trackingCenter=n,this._variantExposedTracked=!1,this._variantSucceededTracked=!1,this.trackExposure=function(){this._track("variantExposed")}.bind(this),this.trackSuccess=function(){this._track("variantSucceeded")}.bind(this)}Experiments.prototype.get=function(t,e){t=[t].concat(e||[]).map(function(t){return(t=encodeURIComponent(t)).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/!/g,"%21").replace(/~/g,"%7E")}).join("/");return this._instances[t]||null},Experiment.prototype._track=function(t){this["_"+t+"Tracked"]||(this["_"+t+"Tracked"]=!0,this._trackingCenter.track({name:t,experimentKey:this.key,variant:this.chosenVariant}))};;
function TouchEventSimulator(t){this.el=t,this.doc=t.ownerDocument||t,this.win=this.doc.defaultView,this.touch=null,this._initialised=!1,this._firstEventFired=!1,this.handleFirstEvent=this.handleFirstEvent.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.handleMouseOut=this.handleMouseOut.bind(this),this.handlePointerDown=this.handlePointerDown.bind(this),this.handlePointerMove=this.handlePointerMove.bind(this),this.handlePointerUp=this.handlePointerUp.bind(this),this.handlePointerCancel=this.handlePointerCancel.bind(this),this.captureBubbleEvents=this.captureBubbleEvents.bind(this)}TouchEventSimulator.mode=null,TouchEventSimulator.prototype.start=function(){this._initialised?"function"==typeof Logger&&Logger("TouchEventSimulator").warn("Touch event simulator already initialised!"):("function"==typeof Logger&&Logger("TouchEventSimulator").log("Enabling touch event simulation"),this.doc.defaultView.msPointerEnabled?this.startPointers():this.startMouse(),this.el.addEventListener("touchstart",this.captureBubbleEvents,!1),this.el.addEventListener("touchmove",this.captureBubbleEvents,!1),this.el.addEventListener("touchend",this.captureBubbleEvents,!1),this.el.addEventListener("touchcancel",this.captureBubbleEvents,!1),this.el.addEventListener("tap",this.captureBubbleEvents,!1))},TouchEventSimulator.prototype.stop=function(){this._initialised?("function"==typeof Logger&&Logger("TouchEventSimulator").log("Disabling touch event simulation"),this.win&&this.win.msPointerEnabled?this.stopPointers():this.stopMouse(),this.el.removeEventListener("touchstart",this.captureBubbleEvents,!1),this.el.removeEventListener("touchmove",this.captureBubbleEvents,!1),this.el.removeEventListener("touchend",this.captureBubbleEvents,!1),this.el.removeEventListener("touchcancel",this.captureBubbleEvents,!1),this.el.removeEventListener("tap",this.captureBubbleEvents,!1)):"function"==typeof Logger&&Logger("TouchEventSimulator").warn("Touch event simulator not running!")},TouchEventSimulator.prototype.captureBubbleEvents=function(t){t.stopPropagation(),t.preventDefault()},TouchEventSimulator.prototype.startMouse=function(){this.el.addEventListener("mousedown",this.handleMouseDown,!0),this.el.addEventListener("mousemove",this.handleMouseMove,!0),this.el.addEventListener("mouseup",this.handleMouseUp,!0),this.el.addEventListener("mouseout",this.handleMouseOut,!0),this.el.addEventListener("dragstart",this.handleDragStart,!0),this._initialised=!0},TouchEventSimulator.prototype.stopMouse=function(){this.el.removeEventListener("mousedown",this.handleMouseDown,!0),this.el.removeEventListener("mousemove",this.handleMouseMove,!0),this.el.removeEventListener("mouseup",this.handleMouseUp,!0),this.el.removeEventListener("mouseout",this.handleMouseOut,!0),this.el.removeEventListener("dragstart",this.handleDragStart,!0),this._initialised=!1},TouchEventSimulator.prototype.startPointers=function(){this.el.addEventListener("MSPointerDown",this.handlePointerDown,!0),this.el.addEventListener("MSPointerMove",this.handlePointerMove,!0),this.el.addEventListener("MSPointerUp",this.handlePointerUp,!0),this.el.addEventListener("MSPointerCancel",this.handlePointerCancel,!0),this._initialised=!0},TouchEventSimulator.prototype.stopPointers=function(){this.el.removeEventListener("MSPointerDown",this.handlePointerDown,!0),this.el.removeEventListener("MSPointerMove",this.handlePointerMove,!0),this.el.removeEventListener("MSPointerUp",this.handlePointerUp,!0),this.el.removeEventListener("MSPointerCancel",this.handlePointerCancel,!0),this._initialised=!1},TouchEventSimulator.prototype.init=function(){this.doc.defaultView.navigator.msPointerEnabled?this.start():(this.el.addEventListener("touchstart",this.handleFirstEvent,!0),this.el.addEventListener("mousedown",this.handleFirstEvent,!0))},TouchEventSimulator.prototype.updateTouchCoordinates=function(t){this.touch.screenX=t.screenX,this.touch.screenY=t.screenY,this.touch.pageX=t.pageX,this.touch.pageY=t.pageY,this.touch.clientX=t.clientX,this.touch.clientY=t.clientY},TouchEventSimulator.prototype.ignorables=["select","input","textarea"],TouchEventSimulator.prototype.isFormElement=function(t){return-1<this.ignorables.indexOf(t.nodeName.toLowerCase())},TouchEventSimulator.prototype.isIgnorable=function(t){for(var e=t;e&&e instanceof HTMLElement;e=e.parentNode)if(hasClass(e,"ignore-toucheventsimulator"))return!0;return!1},TouchEventSimulator.prototype.handleFirstEvent=function(t){this._firstEventFired||(this._firstEventFired=!0,this.el.removeEventListener("touchstart",this.handleFirstEvent,!0),this.el.removeEventListener("mousedown",this.handleFirstEvent,!0),"touch"!=TouchEventSimulator.mode&&"mousedown"==t.type?(TouchEventSimulator.mode="mouse",this.start(),this.handleMouseDown(t)):TouchEventSimulator.mode="touch")},TouchEventSimulator.prototype.handleMouseDown=function(t){0!=t.button||this.isIgnorable(t.target)||(this.touch={identifier:0,target:t.target},this.updateTouchCoordinates(t),t.stopPropagation(),this.isFormElement(t.target)||t.preventDefault(),this.fireTouchEvent("touchstart",t))},TouchEventSimulator.prototype.handleMouseMove=function(t){this.touch&&0==t.button&&(this.updateTouchCoordinates(t),t.stopPropagation(),t.preventDefault(),this.fireTouchEvent("touchmove",t))},TouchEventSimulator.prototype.handleMouseUp=function(t){this.touch&&0==t.button&&(this.updateTouchCoordinates(t),t.stopPropagation(),t.preventDefault(),this.fireTouchEvent("touchend",t),this.touch=null)},TouchEventSimulator.prototype.handleMouseOut=function(t){this.touch&&0==t.button&&(t.clientX<=0||t.clientX>=this.win.innerWidth||t.clientY<=0||t.clientY>=this.win.innerHeight)&&this.cancelInteraction()},TouchEventSimulator.prototype.handleDragStart=function(t){return t.preventDefault(),!1},TouchEventSimulator.prototype.handlePointerDown=function(t){0==t.button&&(this.touch={identifier:0,target:t.target},this.updateTouchCoordinates(t),this.fireTouchEvent("touchstart",t))},TouchEventSimulator.prototype.handlePointerMove=function(t){this.touch&&0==t.button&&(this.updateTouchCoordinates(t),this.fireTouchEvent("touchmove",t))},TouchEventSimulator.prototype.handlePointerUp=function(t){this.touch&&0==t.button&&(this.updateTouchCoordinates(t),this.fireTouchEvent("touchend",t))},TouchEventSimulator.prototype.handlePointerCancel=function(t){this.touch&&0==t.button&&(this.updateTouchCoordinates(t),this.fireTouchEvent("touchcancel",t),this.touch=null)},TouchEventSimulator.prototype.fireTouchEvent=function(t,e){var n=this.doc.createEvent("HTMLEvents");n.initEvent(t,!0,!0),"touchend"==t||"touchcancel"==t?(n.touches=n.targetTouches=[],n.changedTouches=[this.touch]):n.touches=n.targetTouches=n.changedTouches=[this.touch],e.target.dispatchEvent(n)},TouchEventSimulator.prototype.cancelInteraction=function(){this.touch&&(this.fireTouchEvent("touchcancel",this.touch),this.touch=null)};;
function AggregatorTracking(t){this._trackingCenter=t}AggregatorTracking.prototype.trackAggregator=function(t,r,g){"object"==typeof r&&(g=r,r=void 0),this._trackingCenter.track({name:"aggregator",metric:t,value:r=void 0!==r?r:1,customDimensions:g=g||{}})},AggregatorTracking.prototype.trackAggregatorTime=function(t,r,g){this.trackAggregator(t,Math.round(r),g)},AggregatorTracking.prototype.trackAggregatorUsingTimer=function(t,r){var g=new Date;return function(){this.trackAggregatorTime(t,new Date-g,r)}.bind(this)},AggregatorTracking.prototype.trackAggregatorMagicTriplet=function(r,g,e){this.trackAggregator(r+"Attempts",g);var a=new Date;return function(){var t=new Date-a;(!e||t<e)&&(this.trackAggregator(r+"Successes",g),this.trackAggregatorTime(r+"Time",t,g))}.bind(this)};;
function Logger(e){if(!(this instanceof Logger))return new Logger(e);e=e||"";var n=noop;(0<=Logger.enabledNames.indexOf(e)||0<=Logger.enabledNames.indexOf("all"))&&(n=function(){var e=[].slice.apply(arguments);e.unshift(Logger._ts()+" ["+Logger.sessionId+(this.name?" "+this.name:"")+"]"),console.log.apply(console,e)}),this.name=e,this.log=n,this.warn=n,this.debug=n,this.error=n}Logger._ts=function(){var e=new Date;function n(e,n){for(e+="";e.length<n;)e="0"+e;return e}return e.getFullYear()+"-"+n(e.getMonth()+1,2)+"-"+n(e.getDate(),2)+" "+n(e.getHours(),2)+":"+n(e.getMinutes(),2)+":"+n(e.getSeconds(),2)+"."+n(e.getTime()-1e3*Math.floor(e.getTime()/1e3),3)},Logger.init=function(e,n){Logger.enabledNames=e,Logger.sessionId=n||(Math.random()+"").slice(15)},Logger.initFromRuntimeParams=function(e){Logger.init(e.debug?e.debug.split(","):[],e.sessionId)};;
function InViewObject(t,e){this.view=t,this.inViewParent=e,this._init()}extend(InViewObject.prototype,EventEmitter),InViewObject.prototype._init=function(){this.rectInView=CRect.ZERO,this.areaInViewRatio=0,this.active=!1,this._maxPossibleDimensions={width:0,height:0,area:0},this.computeRectInView=this.computeRectInView.bind(this),this.start=this.start.bind(this),this.stop=this.stop.bind(this)},InViewObject.prototype.getNode=function(){return this.view.getNode()},InViewObject.prototype.getParentMaxPossDims=function(){return this.inViewParent?this.inViewParent.getMaxPossibleDimensions():this.adapter.getViewportRect()},InViewObject.prototype.computeRectInView=function(){var t=this.inViewParent.getRectInView(),e=this.getBoundingClientRect(),t=t.intersect(e),i=!1,e=(this.rectInView.equals(t)||(this.rectInView=t,i=!0),this._computeMaxPossibleDimensions(e,this.getParentMaxPossDims()),0<this._maxPossibleDimensions.area?t.area/this._maxPossibleDimensions.area:0),n=!1;e!==this.areaInViewRatio&&(this.areaInViewRatio=e,n=!0),i&&(this.emit("rectInViewChanged",t),Logger("InViewObject").debug(this.view.toString()+", rectInViewChanged: "+this.rectInView.toString())),n&&(this.emit("areaInViewRatioChanged",e),Logger("InViewObject").debug(this.view.toString()+", areaInViewRatioChanged: "+e))},InViewObject.prototype.getBoundingClientRect=function(){var t=this.getNode();return t?CRect.adopt(t.getBoundingClientRect()):CRect.ZERO},InViewObject.prototype.getMaxPossibleDimensions=function(){return this._maxPossibleDimensions},InViewObject.prototype._computeMaxPossibleDimensions=function(t,e){this._maxPossibleDimensions.width=Math.min(e.width,t.width),this._maxPossibleDimensions.height=Math.min(e.height,t.height),this._maxPossibleDimensions.area=this._maxPossibleDimensions.width*this._maxPossibleDimensions.height},InViewObject.prototype.getRectInView=function(){return this.rectInView},InViewObject.prototype.getAreaInViewRatio=function(){return this.areaInViewRatio},InViewObject.prototype.start=function(){this.active||(this._start(),this.active=!0,this.computeRectInView())},InViewObject.prototype._start=function(){this.inViewParent.on("rectInViewChanged",this.computeRectInView),this.inViewParent.on("areaInViewRatioChanged",this.computeRectInView)},InViewObject.prototype.stop=function(){this.active&&(this.computeRectInView(),this._stop(),this.active=!1)},InViewObject.prototype._stop=function(){this.inViewParent.off("rectInViewChanged",this.computeRectInView),this.inViewParent.off("areaInViewRatioChanged",this.computeRectInView)};;
function AdViewableTimeObserver(e){this._tracker=e,this._readyToShow=!1,this._adapter}function AdViewableInViewObjectObserver(e){AdViewableInViewObjectObserver.uberConstructor.apply(this,arguments),this._inViewObjects=[],this._viewableInViewObjects=[]}function AdViewableUnitObserver(e){AdViewableUnitObserver.uberConstructor.apply(this,arguments),this._units=[],this._viewableUnits=[],this._containerIsViewable=!1}AdViewableTimeObserver.prototype.readyToShow=function(e){throw new Error("AdViewableInViewObjectObserver.readyToShow not implemented!")},AdViewableTimeObserver.prototype.registerUnit=function(e){throw new Error("AdViewableInViewObjectObserver.registerUnit not implemented!")},AdViewableTimeObserver.prototype.registerAdapter=function(e){throw new Error("AdViewableTimeObserver.registerAdapter not implemented!")},AdViewableTimeObserver.prototype.stop=function(){this._tracker.stop()},inherit(AdViewableInViewObjectObserver,AdViewableTimeObserver),AdViewableInViewObjectObserver.prototype.registerAdapter=function(e){this._adapter=e;var t=this._tracker;e.mediaState.on("videoStarted",function(){this._tryStartTracker()}.bind(this)),e.mediaState.on("videoStopped",function(){0===this._viewableInViewObjects.length&&t.stop()}.bind(this))},AdViewableInViewObjectObserver.prototype.readyToShow=function(){this._readyToShow=!0,this._tryStartTracker()},AdViewableInViewObjectObserver.prototype.registerUnit=function(e){var r=e.inView,e=this._inViewObjects,a=this._viewableInViewObjects,n=this._tracker;-1===e.indexOf(r)&&(e.push(r),!(-1!==a.indexOf(r))&&0<r.getAreaInViewRatio()&&a.push(r),this._tryStartTracker(),r.on("areaInViewRatioChanged",function(e){var t=a.indexOf(r),i=-1!==t;!i&&0<e?(a.push(r),this._tryStartTracker()):0===e&&i&&(a.splice(t,1),0===a.length&&n.stop())}.bind(this)))},AdViewableInViewObjectObserver.prototype._tryStartTracker=function(){var e=this._adapter,e=e&&e.mediaState.playingVideo;return!(!this._readyToShow||!(0<this._viewableInViewObjects.length||e))&&(this._tracker.start(),!0)},inherit(AdViewableUnitObserver,AdViewableTimeObserver),AdViewableUnitObserver.prototype.registerAdapter=function(e){this._adapter=e,this._containerIsViewable=e.containerIsViewable;var t=this._tracker;e.on("containerViewableChange",function(e){(this._containerIsViewable=e)?this._tryStartTracker():t.stop()}.bind(this)),e.mediaState.on("videoStarted",function(){this._tryStartTracker()}.bind(this)),e.mediaState.on("videoStopped",function(){this._adapter.containerIsViewable&&0!==this._viewableUnits.length||t.stop()}.bind(this))},AdViewableUnitObserver.prototype.readyToShow=function(){this._readyToShow=!0,this._tryStartTracker()},AdViewableUnitObserver.prototype.registerUnit=function(t){if(!this._adapter)throw new Error("adapter was not registered yet!");var e=this._units,i=this._viewableUnits,r=this._tracker;-1===e.indexOf(t)&&(e.push(t),-1===i.indexOf(t)&&t._visible&&(i.push(t),this._tryStartTracker()),t.on("appeared",function(){-1===i.indexOf(t)&&(i.push(t),this._tryStartTracker())}.bind(this)),t.on("disappeared",function(){var e=i.indexOf(t);-1!==e&&(i.splice(e,1),0===i.length&&r.stop())}.bind(this)))},AdViewableUnitObserver.prototype._tryStartTracker=function(){var e=this._adapter;return!!(e&&(e.containerIsViewable||e.mediaState.playingVideo)&&this._readyToShow&&0<this._viewableUnits.length)&&(this._tracker.start(),!0)};;
function AdViewableTimeTracker(i,e,t,n){this._trackingCenter=i,this._raf=e,this._win=t,this._intervals=n||{3e3:1e3,1e4:2e3,63e3:3e3},this._isRunning=!1,this._viewableMilliseconds=0,this._fromTime=0,this._pendingPingTimeoutId,this._pendingPingRafId,this._maxRafLatency=500}AdViewableTimeTracker.eventName="viewableTime",AdViewableTimeTracker.TrackingData=function(i,e){return{name:AdViewableTimeTracker.eventName,from:i/1e3,to:(e=e<i?i:e)/1e3}},AdViewableTimeTracker.prototype.start=function(){this._isRunning||(this._isRunning=!0,this._fromTime=Date.now(),0===this._viewableMilliseconds?this._initPing():this._setNextPing())},AdViewableTimeTracker.prototype.stop=function(){var i,e;this._clearPendingPing(),this._isRunning&&-1!==this._getPingInterval()&&(e=(i=Date.now())-this._fromTime,this._viewableMilliseconds+=e,e=new AdViewableTimeTracker.TrackingData(this._fromTime,i),this._track(e)),this._isRunning=!1},AdViewableTimeTracker.prototype._initPing=function(){var i=this._fromTime,e=this._getPingInterval(),t=new AdViewableTimeTracker.TrackingData(this._fromTime,i);this._pendingPingRafId=this._raf.nextFrame(function(){this._track(t),this._setFromTimeForNextPing(i,e),this._setNextPing()}.bind(this))},AdViewableTimeTracker.prototype._setNextPing=function(){this._clearPendingPing();var t=this._getPingInterval();this._isRunning&&-1!==t&&(this._pendingPingTimeoutId=this._win.setTimeout(function(){var e;this._isRunning&&(e=Date.now(),this._viewableMilliseconds+=t,this._normalizeFromTime(e,t),this._pendingPingRafId=this._raf.nextFrame(function(){var i=new AdViewableTimeTracker.TrackingData(this._fromTime,e);this._track(i),this._setFromTimeForNextPing(e,t),this._setNextPing()}.bind(this)))}.bind(this),t))},AdViewableTimeTracker.prototype._normalizeFromTime=function(i,e){var t=i-this._fromTime;e+this._maxRafLatency<t&&(this._fromTime=i)},AdViewableTimeTracker.prototype._setFromTimeForNextPing=function(i,e){var t=Date.now();this._fromTime=e<t-i?t:i},AdViewableTimeTracker.prototype._getPingInterval=function(){var e=this._viewableMilliseconds,t=this._intervals,i=Object.keys(this._intervals),n=+i[i.length-1],r=-1;return i.some(function(i){return e<+i&&(r=t[i],n<e+r&&(r=-1),!0)}),r},AdViewableTimeTracker.prototype._clearPendingPing=function(){this._raf.cancelFrame(this._pendingPingRafId),this._win.clearTimeout(this._pendingPingTimeoutId)},AdViewableTimeTracker.prototype._track=function(i){this._trackingCenter.track(i)};;
!function(t){var i=e.prototype;function e(){this.playingVideo=!1}extend(i,EventEmitter),i.stopVideo=function(){this.playingVideo=!1,this.emit("videoStopped")},i.startVideo=function(){this.playingVideo=!0,this.emit("videoStarted")},t.MediaState=e}(window);;
!function(e){"use strict";function t(e,r,t,n){if(-1===["PUT","DELETE"].indexOf(e))throw new Error("Unsupported request method: "+e);if(void 0===creative.runtimeParams.customAudiences[r])throw new Error('Custom audience "'+r+'" is not used by the creative.');creative.runtimeParams.customAudiences[r]={userExists:t,userData:n};var i,u,s,o=creative.secure?creative.customAudiencesUrl:creative.insecureCustomAudiencesUrl,c="/audiences/"+r,a=creative.userIdentifiers;for(i in a)for(var d in a[i])d=a[u=i][d],s=void 0,(s=new XMLHttpRequest).open(e,o+c+"/"+encodeURIComponent(u)+"/"+encodeURIComponent(d)+"?"+creative.authTokenUrlParam),s.send(n)}var r={toString:function(){return"[Clazz CustomAudiences]"}};r.addUser=function(e,r){creative.runtimeParams.userOptOut||t("PUT",e,!0,r)},r.removeUser=function(e){creative.runtimeParams.userOptOut||t("DELETE",e,!1)},e.CustomAudiences=r}(window);;
function ReportingObserverWrapper(e){this._reportTypes=["intervention"],this._processReport=e,this._processReports=this._processReports.bind(this),this._emptyQueueAndProcessReports=this._emptyQueueAndProcessReports.bind(this),this._childObservers=[]}ReportingObserverWrapper.prototype._processReports=function(e){e.forEach(function(e){e=this._getReportId(e);e&&this._processReport(e)}.bind(this))},ReportingObserverWrapper.prototype._getReportId=function(e){var r,t,s=e.type;return-1!==this._reportTypes.indexOf(s)&&(r=ReportingObserverWrapper.reportValidators[s],t=e.body,r&&t)?Object.keys(r).filter(function(e){e=r[e];return e&&e(t)})[0]:null},ReportingObserverWrapper.prototype._emptyQueueAndProcessReports=function(){this._childObservers.forEach(function(e){e=e.takeRecords();this._processReports(e)},this)},ReportingObserverWrapper.prototype.createChildObserverAndStartObserving=function(e){"ReportingObserver"in e&&((e=new e.ReportingObserver(this._processReports,{types:this._reportTypes,buffered:!0})).observe(),this._childObservers.push(e))},ReportingObserverWrapper.prototype.start=function(){this._childObservers.forEach(function(e){e.observe()}),window.addEventListener("beforeunload",this._emptyQueueAndProcessReports),window.addEventListener("unload",this._emptyQueueAndProcessReports)},ReportingObserverWrapper.prototype.stop=function(){this._childObservers.forEach(function(e){e.disconnect()}),window.removeEventListener("beforeunload",this._emptyQueueAndProcessReports),window.removeEventListener("unload",this._emptyQueueAndProcessReports)},ReportingObserverWrapper.reportValidators={intervention:{heavyAdCPUIntervention:function(e){return"HeavyAdIntervention"===e.id&&-1<e.message.indexOf("CPU usage")&&-1===e.message.indexOf("future version")},heavyAdNetworkIntervention:function(e){return"HeavyAdIntervention"===e.id&&-1<e.message.indexOf("network usage")&&-1===e.message.indexOf("future version")}}};;
!function(){var A=[".video-player-wrapper {","    position: absolute;","    width: 100%;","    height: 100%;","    background: #000;","    top: 0;","    left: 0;","    overflow: hidden;","}",".video-player-engine {","    position: absolute;","    width: 100%;","    height: 100%;","    min-height: 100%;","    top: 0;","    left: 0;","    margin: 0;","    padding: 0;","    overflow: hidden;","}",".video-player-engine video,",".video-player-engine .canvasContainer","{","    position: relative;","    width: 100%;","    height: 100%;","    min-height: 100%;","    background: #000;","    top: 0;","    left: 0;","}",".video-player-engine-fit video","{","    background: transparent;","}",".video-player-poster {","    position: absolute;","    background-size: contain;","    background-repeat: no-repeat no-repeat;","    background-position: center center;","}",".video-player-fitting-crop .video-player-poster {","    background-size: cover;","}",".video-player-engine canvas {","    position: relative;","    width: 100%;","    background: #000;","    top: 0;","    left: 0;","}",".video-player-engine canvas {","    image-rendering: optimizeSpeed;","    image-rendering: -moz-crisp-edges;","    -ms-interpolation-mode: nearest-neighbor;","    image-rendering: optimize-contrast;","    image-rendering: -webkit-pixelated;","    image-rendering: crisp-edges;","    image-rendering: -webkit-optimize-speed;","    image-rendering: -webkit-optimize-contrast;","}",".video-player-wrapper-empty {","    background-color: #000;","}",".video-player-wrapper-empty::after {",'    content: "";',"    position: absolute;","    top: 0;","    left: 0;","    right: 0;","    bottom: 0;",'    background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyOCAyOCIgd2lkdGg9IjI4IiBoZWlnaHQ9IjI4Ij48cGF0aCBmaWxsPSIjY2NjIiBkPSJNMSAxNGMwIDcuMiA1LjggMTMgMTMgMTNzMTMtNS44IDEzLTEzUzIxLjIgMSAxNCAxIDEgNi44IDEgMTR6bTI0IDBjMCA2LjEtNC45IDExLTExIDExUzMgMjAuMSAzIDE0IDcuOSAzIDE0IDNzMTEgNC45IDExIDExem0tMTQtNHY4bDctNC03LTR6Ii8+PC9zdmc+");',"    background-repeat: no-repeat;","    background-position: center;","}",".video-controls-container {","    position: absolute;","    width: 100%;","    height: 100%;","    top: 0;","    left: 0;","    font-size: 14px;","}",".video-basic-controls-wrapper {","    position: absolute;","    width: 100%;","    height: 100%;","}",".video-controls-slider-container {","    position: absolute;","    width: 100%;","    height: 8px;","    bottom: -1px;","    left: 0;","    background: #111;","}",".video-controls-progress-bar {","    opacity: 0.3;","}",".video-controls-progress-bar,",".video-controls-time-bar {","    position: absolute;","    width: 0;","    top: 0;","    left: 0;","    height: 100%;","}","@-webkit-keyframes video-player-spin{","    0%   { -webkit-transform: rotate(0deg); }","    100% { -webkit-transform: rotate(359deg); }","}","@-moz-keyframes video-player-spin{","    0%   { -moz-transform: rotate(0deg); }","    100% { -moz-transform: rotate(359deg); }","}","@keyframes video-player-spin{","    0%   { transform: rotate(0deg); }","    100% { transform: rotate(359deg); }","}",".video-player-spinner-big,",".video-player-spinner-small {","    display: block;","    position: absolute;","    top: 50%;","    left: 50%;","    -webkit-animation: video-player-spin 1.5s infinite linear;","    animation: video-player-spin 1.5s infinite linear;","}",".video-player-spinner-big {","    width: 35px;","    height: 35px;","    margin-top: -17px;","    margin-left: -17px;",'    background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAQAAAC00HvSAAADTklEQVR4AZWVTWgcZRyHn/c/7zubbDbJJsTEioiIH7EGq6EIRqwWqbRClXrx4E0QxYt3b4qK9qgoePDmwRYVS6xFW7Ueeqj0kqIVQYwljTVt0o/dZD9n3r/zshGSGpOd54GZ0+9h/qcxbMh03PfK4LPl8cFy0SJsialxIyfHRz+6Y6pkDR0xXWQ8azlaGvt0fF9sMsiTsazh2933fzEyKICu2+bKfP/izg96IlDA6JXmhdPVY81T6Xk2wAuCz1zFTNOh+PKD71sRMIZqY3aa59iERYtktvDrMm735LGCNQaE38/O7WGRzRBCJljrhCyB0l2HXKSgxpw7zt4xNmcBZNUSlU4XGPl4aEhRVc595fd6tvKm8LAEY4qrR0V3T87YyGDMn2d4mC6ZL9JDmEm6gBcYPhiJqlJdnt8/T7dSQ0JEhQEQ4m2Ph4jq3GdDi0N0Lw21arHSL0jP84WCZlQqV1+6Sh5ZRoix9PiiLe1TBbj0w4gnJ4v1qBeQqN8W79HQYeU78tPAIqBFWxwNFbR1mvy0iMEY+qyNvRK4SH68cQAGiaz64MTCBHndkRhngr3SbnYyM6Mz5NYah81EWnXN8D66OSKvxBrjMpH6X+ozNd4Rk1dKxgW1KbVfskpGYapAXqNRXGakdal/o1kHX95VJq/RbcYFWZLGkVY1fE+hvPT6Enmc2y5lnIk0TS8LraXjeM0ceqY6UKVrrbsvRHD+gvViqbyTtvDex4PD7w3Tre4xUzYOhyS/JUiCP3/pkPd49eVH2m+36cbqLrcdR2Rs8qutWcRiqbxRm9c0HDZywLxp2MrGE/FDxoo1VivJTEKCmSYQPXDrJ+LIQppeO3n9NZb5P+LC0+5eEm2Tar12mCvr/lPxU9veNRIy6luXK0f4kA1I9hR2Sp9PSLJIo/4lsxAwR/kX++TYWyZWT6qZrb9rp9pnkj/8dSqUon5zi73TTUhJs4QGV+qfh8h/MmAmRg7GYyGiXpPMlLbP3rS1Y6oJLU3Upxebh1lYs/yataQ9pVcH9hsJqdVMmHYS7ZAm0Ubjx9YJEtZgprmRaKz3hb5HpTeESHyIZYFOIq00f2qe4BqBTTMdrJuKJ+3t0bAUsH7FV5KFZLb9c3oWzwb8AzjvQbz9lli3AAAAAElFTkSuQmCC");',"}",".video-player-spinner-small {","    width: 18px;","    height: 18px;","    margin-top: -9px;","    margin-left: -9px;",'    background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAQAAAD8x0bcAAABeElEQVR4AXXSv2sTYRjA8e89997lcuR60eJQUdpFQQoqdHRWhAoddPBPcHRwE8TZxcXJf0BEsIjuQUQQtZMOpREM9RKL1RrqJbkf771nEGnKJf1+hmd5eKaHSe/vtzf30k63Q9X/8XZte6f8V/QrokopILq9/CB0+nnUip/l7zioUJgxrBbu6rnnodvp9G6wwaG04AEJRvAWHjXcr+3tC3pDcxhmzGcOpH7rxOm9uHfN3repIkMkwJPguljfXwVbAdOaBm3V7VD8pVE2fDpkNhJcQqXqOi+2OKrxJRxVFkXB0Ql1tKS/QZaE2fAkQGS4KbZ3xWM2+xRzpDJYz5Pw6mBxwLQ/vlq2XLMj6ZP9T7VjzYfGN1Qo97IslD9NV8j6d0e7wUrzsSwKExyv3XTOl1n2AWO1AHdt/p4Kkm/xy/xN2cMwb591Lkqj+JGs0wbrNQCy0rjjnQHdN7EZkYOJs8/ZC7pwsASgVp1L6qRVK9NiV3/RHyc/8RftSMiO8WZLaAAAAABJRU5ErkJggg==");',"}",".video-controls-hiddable,",".video-controls-unhiddable {","    width: 100%;","    height: 100%;","}",".video-basic-controls-wrapper .center-button {","    position: absolute;","    width: 4em;","    height: 4em;","    border-top-left-radius: 2em;","    border-top-right-radius: 2em;","    border-bottom-left-radius: 2em;","    border-bottom-right-radius: 2em;","    background: #111;","    margin: auto;","    top: 0;","    left: 0;","    bottom: 0;","    right: 0;","    text-align: center;","    cursor: pointer;","    opacity: 0.8;","    z-index: 1;","}",".center-button div {","    position: relative;","    width: 100%;","    color: white;","    font-size: 2em;","    top: 0.5em;","}",".center-button .celtra-icon-play { left: 0.1em;}",".center-button .celtra-icon-replay { top: 0.62em; left:0.05em}",".video-basic-controls-wrapper .custom-button {","    position: absolute;","    height: 100%;","    width: 100%;","    top: 0;","    left: 0;","    cursor: pointer;","    opacity: 0.8;","}",".custom-button img {","    margin: auto;","    position: absolute;","    top: 0;","    right: 0;","    bottom: 0;","    left: 0;","}",".video-controls-button {","    position: absolute;","    cursor: pointer;","    font-size: 1.5em;","    color: white;","    width: 2.5em;","    height: 2.5em;","}",".video-controls-desktop .video-controls-button div {","    margin-top: -0.5em;","}",".ie-click-event {","    background-color: rgba(255,255,255,0);","}",".video-controls-button-shadow {","    text-shadow: 1px 1px 3px #000;","}",".video-controls-button-top-right {","    right: 0;","    top: 0;","}",".video-controls-desktop .video-controls-button-top-right {","    margin-right: 0.5em;","    margin-top: 0.5em;","    width: 1.5em;","    height: 1.5em;","}",".video-controls-button-bottom-right {","    right: 0;","    bottom: 0;","}",".video-controls-desktop .video-controls-button-bottom-right {","    margin-right: 0.5em;","    margin-bottom: 0.75em;","    width: 1.5em;","    height: 1.5em;","}",".video-controls-button div {","    position: absolute;","    height: 50%;","    width: 100%;","    left: 0;","    text-align: center;","    top:  50%;","    margin-top: -0.75em;","    vertical-align: middle;","}",".video-controls-button .celtra-icon-close {","    font-size: 0.7em;","    left: 0.07412em;","}",".video-controls-button .celtra-icon-enter-full-screen,",".video-controls-button .celtra-icon-exit-full-screen {","    left: 0.09em;","}",".video-controls-pending {","    animation: video-controls-pending 1s infinite linear;","}","@-webkit-keyframes video-controls-pending {","    0%   { opacity: 1 }","    50% { opacity: 0 }","    100%   { opacity: 1 }","}","@keyframes video-controls-pending {","    0%   { opacity: 1 }","    50% { opacity: 0 }","    100%   { opacity: 1 }","}","@font-face {",'    font-family: "celtraicons";','    src:url("data:application/font-woff;base64,d09GRk9UVE8AAAqEAAoAAAAACjwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABDRkYgAAAA9AAABq8AAAavkHaHf09TLzIAAAekAAAAYAAAAGAIIvzDY21hcAAACAQAAABMAAAATBpVzGRnYXNwAAAIUAAAAAgAAAAIAAAAEGhlYWQAAAhYAAAANgAAADb/fCRYaGhlYQAACJAAAAAkAAAAJAPjAfJobXR4AAAItAAAAEgAAABIHLIB9G1heHAAAAj8AAAABgAAAAYAElAAbmFtZQAACQQAAAFdAAABXWEQuipwb3N0AAAKZAAAACAAAAAgAAMAAAEABAQAAQEBDGNlbHRyYWljb25zAAECAAEAOvgcAvgbA/gYBB4KABlT/4uLHgoAGVP/i4sMB4pq+JX4dAUdAAAA0A8dAAAA1REdAAAACR0AAAamEgATAQEMFxkbHiMoLTI3PEFGS1BVWl9kY2VsdHJhaWNvbnNjZWx0cmFpY29uc3UwdTF1MjB1RTYwMHVFNjAxdUU2MDJ1RTYwM3VFNjA0dUU2MDV1RTYwNnVFNjA3dUU2MDh1RTYwOXVFNjBBdUU2MEJ1RTYwQ3VFNjBEAAACAYkAEAASAgABAAQABwAKAA0ASwCpAPUCGAJDAs0DBQPvA/sEHgRFBG0E2wWp/JQO/JQO/JQO+5QOi/dUFYs/rUbAXAi1uwVjrnK/i8SL9eHh9YvAi7t2rmgIQ0P3VIuL91RAQAVduUuoRIv7IYv7B/sHi/shCA6L9+kVi/tP9wiK9yD7G4v4Yvsg+x4F93qoFWRkBaZ0nGqLZYtlempwdAiyZAWvrKK6i8CLwHS6Z6wI19cVZWUFuWCoTotIi0huTl1gCLFlBcO/rtaL3YvdaNVTwAgOPPdt+HQVRYtNamNXCF65i/se9x6LUcQFqra8p8SL54vWQIsuiy9AQC+LPItJwXnVCFmLBZ0m5D71i/cLi+3ti/cLi/cMKez7C4sIDvhf95UVg4uDh4WFhYWHg4uDi4KPg5GFkYWTiJOLlIuTjpGRkZGOk4uUi5OIk4WRhZGDj4KLCEveFfutiwWIi4iJiImIiIqIi4gIi/thBYuIjIiOiI6JjomOiwj3rYsFj4uOjY2Njo6MjouOCIv3YQWLjoqOiI6JjYiNh4sI++c+FYeLiYmLhwiLSwWLho2Jj4uQi42Ni5AIi8sFi4+JjYaLCIX3BxX4LYsFmYuXhpWBloGQf4t9CIv7YQWLfYZ/gIGBgX+GfYsI/C2LBX2Lf5CBlYGVhpeLmQiL92EFi5mQl5WVlZWXkJmLCPcO+zsVi3OVdZx8CJmaBX6Wg5yLnYutp6esi5yLm4SWgAh0dMiLi8hzcwV9mnaUdItei2dmi14IDvgl9/EVd5/7EfsR+xH3EXd39xH7EfsR+xGfd/cR9xH3EfsRn5/7EfcRBQ74lfgVFXiCd4Z1iKGYnKCTo3Z/dYJzh3ifb5hti1GLXFyLUYuDjIKMhDSPPrVXy4J7hXmLeAiLZp5rp3h6jHuQfZKLi4uLi4qLWK9hu4GCiYKJgYuEi4WMhIyZYbJtuYpnb116WosIg4uCjIOMum3CecaL91aL9Pc1i/cfi4+LkIuPoJqdnZmhCA73t2sVi/ef0IuV2zyLi74Fi6KRm62LCLWLi9MFhIxyjW2LTothZotGCItQRouLO9CLi/uf3osFDveznxWLlIiShJGFkoSOgouCi4OIhYSFhYiEi4KLgo6EkYSRhZOIlIuUi5KOkZGSko6Si5QI3ssVi/etBYuPio6IjYmOiIyHiwj7YYsFiIuIioiIiYmKiIuHCIv7rQWLh4yIjYmOiI6KjosI92GLBY+LjoyNjo6NjI6Ljwg+9+cVi4+JjYeLCEuLBYaLiYmLh4uHjYiQiwjLiwWPi42Oi48I9weRFYv8LQWLfYZ/gYGBgX+GfYsI+2GLBX2Lf5CBlYGVhpeLmQiL+C0Fi5mQl5WVlpWWkJmLCPdhiwWZi5eGlYGVgZB/i30IDtlqFYv4lfgI+5EFDqL4dBX3R4uL/JX7R4uL+JUF97aLFfdHi4v8lftHi4v4lQUO5/fAFVpZ91mMivdXW1s53SgpBfeY+04VjPtXvLzdOe3uOd27uwUO90v4HhW8u/tWi4v7Vbu63Drt7QX3Z/vHFYr3VVtaOt0pKdw6XFsFDvhSyhWotJy+i8KL1WzOWLoIaWkFtWSlVYtOi2F/ZXZrCGiuBZeikqWLp4u6drZrqQhoaAWjdppti2mLfYd9hn8IO9mL90kyMfsg9yFvb/h4/HmoqEjOBfw494QVi/s984r3E/sOi/ca+zL3MgUO+I/QFYuLi4uLiwj7L/cv9y/3LwWLi4uLi4uNjYyNjI2NkYqRhpAIQtQFhpCFjIWJiYqJiomJi4uLi4uLCPsv+y/7L/cvBYuLi4uLi4mNiYyJjIWNhYqGhghCQgWGhoqFjYWMiYyJjYmLi4uLi4sI9y/7L/sv+y8Fi4uLi4uLiYmKiYqJiYWMhZCGCNRCBZCGkYqRjY2MjYyNjYuLi4uLiwj3L/cv9y/7LwWLi4uLi4uNiY2KjYqRiZGMkJAI1NQFkJCMkYmRio2KjYmNCA74lBT4lBWLDAoAAAMCAAGQAAUAAAFMAWYAAABHAUwBZgAAAPUAGQCEAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAA5g0B4P/g/+AB4AAgAAAAAQAAAAAAAAAAAAAAIAAAAAAAAgAAAAMAAAAUAAMAAQAAABQABAA4AAAACgAIAAIAAgABACDmDf/9//8AAAAAACDmAP/9//8AAf/jGgQAAwABAAAAAAAAAAAAAAABAAH//wAPAAEAAAABAAAXLCAzXw889QALAgAAAAAAzy5xzgAAAADPLnHO////3wIBAeAAAAAIAAIAAAAAAAAAAQAAAeD/4AAAAgD/////AgEAAQAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAABAAAAAgAAAAIAAAABsQAAAgD//wIAAG8CAAAAAgAAiwIAAGUCAABOAgAAFwIAAAoCAAAmAgAAAAIAAAEAAFAAABIAAAAAAA4ArgABAAAAAAABABYAAAABAAAAAAACAA4AYwABAAAAAAADABYALAABAAAAAAAEABYAcQABAAAAAAAFABYAFgABAAAAAAAGAAsAQgABAAAAAAAKACgAhwADAAEECQABABYAAAADAAEECQACAA4AYwADAAEECQADABYALAADAAEECQAEABYAcQADAAEECQAFABYAFgADAAEECQAGABYATQADAAEECQAKACgAhwBjAGUAbAB0AHIAYQBpAGMAbwBuAHMAVgBlAHIAcwBpAG8AbgAgADEALgAwAGMAZQBsAHQAcgBhAGkAYwBvAG4Ac2NlbHRyYWljb25zAGMAZQBsAHQAcgBhAGkAYwBvAG4AcwBSAGUAZwB1AGwAYQByAGMAZQBsAHQAcgBhAGkAYwBvAG4AcwBHAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4AAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=="),','        url("data:font/truetype;base64,AAEAAAALAIAAAwAwT1MvMggi/MMAAAC8AAAAYGNtYXAaVcxkAAABHAAAAExnYXNwAAAAEAAAAWgAAAAIZ2x5ZtKQLWwAAAFwAAAJfGhlYWT/fCRYAAAK7AAAADZoaGVhA+MB8gAACyQAAAAkaG10eByyAfQAAAtIAAAASGxvY2EUzhFSAAALkAAAACZtYXhwABgAwAAAC7gAAAAgbmFtZWEQuioAAAvYAAABXXBvc3QAAwAAAAANOAAAACAAAwIAAZAABQAAAUwBZgAAAEcBTAFmAAAA9QAZAIQAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADmDQHg/+D/4AHgACAAAAABAAAAAAAAAAAAAAAgAAAAAAACAAAAAwAAABQAAwABAAAAFAAEADgAAAAKAAgAAgACAAEAIOYN//3//wAAAAAAIOYA//3//wAB/+MaBAADAAEAAAAAAAAAAAAAAAEAAf//AA8AAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAACAAHAACMAADcUHgIXNy4DNTQ+AjMyHgIXBzM1By4DIyIOAhUADBcgFCoPGBEJHjRGKBQmIh8NSMBLESkuMhs1XUYowB02MSoSMA0gJSgWKEY0HggOFQ1IwEsRHBQKKEZdNQADAAAAEgIBAeAABQAcADMAABMVHwERBzcHHgMVFA4CBxc+AzU0LgInNwceAxUUDgIHFz4DNTQuAicAdIyM5icKEQsGBgsRCicNFhAICBAWDUwmERwTCwsTHBEmFSEYDQ0YIRUBVbsBhwHOih0nCBUYGw4OGxgVCCcNHSIlFBQlIh0NTCYQJyswGRkwKycQJhQvNTofHzo1LxQAAAABAAAALgGyAeAALQAAEyIOAgcnFTMnPgMzMh4CFRQOAiMiLgInIx4DMzI+AjU0LgIj2RoxLCYPLYo6DB0jKBUiPS4aGi49Ih41Kx4HMgcmOUcoLU86IyM6Ty0B4AwWHxQuijkQGhMKGy09IyI9LhoTIi8cJkEvHCM6Ty0tTzsiAAX//wBHAf8BegAoAFUAbACZAL0AAAEiDgIHDgMVFB4CFx4DMzI+Ajc+AzU0LgInLgMjJyEiDgIHDgMdARQeAhceAzMhMj4CNT4CND0BPAEuASc0LgIjBSIOAh0BFB4CMzI+Aj0BNC4CIychMh4CFx4DHQEUDgIHDgMjISIuAicuAz0BND4CNz4DMxcUHgIXNy4DNTQ+AjMyHgIXBzM1By4DIyIOAhUBywMGBgUCAgQCAgICBAICBQYGAwQGBgUCAgQCAQECBAICBQYGBED+5wEDAgIBAQEBAQEBAQEBAgIDAQEZAgICAwECAQECAQMCAgL+rQEDAQEBAQMBAgICAQECAgIGAZkGCQkJAwQGBAICBAYEAwkJCQb+ZwUKCQgEBAUEAgIEBQQECAkKBXoDCAoGDgUIBQMKEBcMBwwLCgQXPRgFDQ8QCREdFwwBAQICAwMCBQYGAwQGBgUCAgQCAQECBAICBQYGBAMGBgUCAwMCAlMBAQEBAQICAwHNAQMCAgEBAQEBAQEBAQECAgMBzQEDAgIBAQEBAU0BAQMBQAICAgEBAgICQAEDAQFzAgQFBAQICQoFzQUKCQgEBAUEAgIEBQQECAkKBc0FCgkIBAQFBAKnCREQDgUPBAsLDQcNFhEKAwUGBBc9GAYJBgMNFh4RAAAAAQBvAE8BkQFxAAsAAAEnBycHFwcXNxc3JwGRFH19FH19FH19FH0BXRR9fRR9fRR9fRR9AAEAAAARAgEBsgBpAAABDgMjPgM3DgMjLgMHJg4CFRwBHgEVLgMnDgMVFB4CFwYuAic0FDQUNRQeAhciBiIGJwYmBiYHHgM3DgMHJgYmBiceAxc+AzUwPAI1PgM3AgEHDw8QCAgPCwoDCBAREQkHEhMWCxYmHRABASA+NzATBAUEAgcMEgoGDQwLBQwXHxIDBwcHBAIFBQUDBRQZHxIOHiEjEwMGBwYDESYpKxZJb0wnCA4NDAYBgQMGAwQEDQ4SCAMJBgYGDgcGAQESGycVBAUHBQQCEB4mGQcMDg0IDRoWFAYBAwMFAgEBAQIBFCEdEQUCAgEBAgECAQ8bEg0BCxANBQEBAQIBAg0QDQYBATZXaTYFAgQBBwsPDgkAAQCL/+ABdQHgABwAAAURMzcjNTQ+AjsBNSIuAiMiDgIdASMVMxEzASNFCk8DCQ8NKgMLERQLFyYbD0VFUyABC1AzCQ4LBUgBAQEOGycaO1D+9QAABABl/+EBmAHgACgAVQBsAJkAACU0LgInLgMjIg4CBw4DFRQeAhceAzMyPgI3PgM1NxE0LgInLgIiKwEqAQ4BBw4CFBURHAEeARceAjI7AToBPgE3PgM1AzQuAisBIg4CFRQeAjsBMj4CNTcRFA4CBw4DKwEiLgInLgM1ETQ+Ajc+AzsBMh4CFx4DFQEfAQMDAwIFBgYDBAYFBgICBAIBAQIEAgIGBQYEAwYGBQIDAwMBUwEBAQEBAgIDAc0BAgMCAQEBAQEBAQECAwIBzQEDAgIBAQEBAU0BAQMBQAICAgEBAgICQAEDAQFzAgMGBAQICQoFzQUKCQgEAwYEAgIEBgMECAkKBc0FCgkIBAQGAwIUAwYGBQIDAwMBAQMDAwIFBgYDAwcFBQMCBAIBAQIEAgMFBQcDQAEZAgICAgEBAgEBAgEBAgICAv7nAQMCAgEBAgEBAgEBAgIDAQFTAQMBAQEBAwECAgIBAQICAgb+ZwUKCQgEBAYDAgIDBgQECAkKBQGZBQoJCAQEBgQBAQQGBAQICQoFAAAAAQBO/98BwgHgAAIAABcRBU4BdCECAf0AAgAX/98B7AHgAAQACQAAEzMTIxMhMwMjAxeyAbQBASG0AbIBAeD9/wIB/f8CAQAAAgAK/+AB9AHgAAYADQAAEwczJwcnBwUXNxc3JzdcMcUBMFJjAQQBMVJiUjABLDHEMVNjucQyU2RRMQAAAgAmAAUB3AG6AAYADQAAEzcHFTcXNxMnBycHFwe3McIwUWLTATBRYlEvAYoxAcAuUGH+zsAwUWFSLwAAAgAA/98CAQHgADMAOQAAJT4DNTQuAicHHgMVFA4CByc+AzU0LgInBx4DFRQOAgcnNQcnBwE3JyUVHwE1JwG+CxEMBgsVHxMiDxoRCgUIDAgjBAcFAwcOFAwjCQ4LBQEDAwJQWYwcAeQdQ/5caH+ePxAiJiYWGzUvLBAhECEoKxcPHxsbCyIKERQTDBAjHhsLIgkSFxcNBQsJCgRNtluOHf4cHETvqAJ5hZ8AAAEAAf/hAf8B3wCEAAAlOAMxJzc4AzE+AzU2NC4BLwEuAiIHIg4CBzgDMQcnOAMxLgMjJiIOAQ8BDgIUFxQeAhc4AzEXBzgDMQ4DFQYUHgEfAR4CMjcyPgI3OAMxNxc4AzEeAzMWMj4BPwE+AjQnNC4CJwH7m5sBAQEBAQECAkkCBAQFAgEBAgEBm5sBAQIBAQIFBAQCSQICAQEBAQEBm5sBAQEBAQECAkkCBAQFAgEBAgEBm5sBAQIBAQIFBAQCSQICAQEBAQEBRZubAQECAQECBQQEAkkCAgEBAQEBAZubAQEBAQEBAgJJAgQEBQIBAQIBAZubAQECAQECBQQEAkkCAgEBAQEBAZubAQEBAQEBAgJJAgQEBQIBAQIBAQAAAAEAAAABAAAoDgB8Xw889QALAgAAAAAAzy5xzgAAAADPLnHO////3wIBAeAAAAAIAAIAAAAAAAAAAQAAAeD/4AAAAgD/////AgEAAQAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAABAAAAAgAAAAIAAAABsQAAAgD//wIAAG8CAAAAAgAAiwIAAGUCAABOAgAAFwIAAAoCAAAmAgAAAAIAAAEAAAAAAAoAFAAeAFIAoADgAdoB9AKCAqwDeAOEA5wDugPYBC4EvgAAAAEAAAASAL4ABQAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAOAK4AAQAAAAAAAQAWAAAAAQAAAAAAAgAOAGMAAQAAAAAAAwAWACwAAQAAAAAABAAWAHEAAQAAAAAABQAWABYAAQAAAAAABgALAEIAAQAAAAAACgAoAIcAAwABBAkAAQAWAAAAAwABBAkAAgAOAGMAAwABBAkAAwAWACwAAwABBAkABAAWAHEAAwABBAkABQAWABYAAwABBAkABgAWAE0AAwABBAkACgAoAIcAYwBlAGwAdAByAGEAaQBjAG8AbgBzAFYAZQByAHMAaQBvAG4AIAAxAC4AMABjAGUAbAB0AHIAYQBpAGMAbwBuAHNjZWx0cmFpY29ucwBjAGUAbAB0AHIAYQBpAGMAbwBuAHMAUgBlAGcAdQBsAGEAcgBjAGUAbAB0AHIAYQBpAGMAbwBuAHMARwBlAG4AZQByAGEAdABlAGQAIABiAHkAIABJAGMAbwBNAG8AbwBuAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=");',"    font-weight: normal;","    font-style: normal;","}",'[class^="celtra-icon-"], [class*=" celtra-icon-"] {','    font-family: "celtraicons";',"    speak: none;","    font-style: normal;","    font-weight: normal;","    font-variant: normal;","    text-transform: none;","    line-height: 1;","    -webkit-font-smoothing: antialiased;","    -moz-osx-font-smoothing: grayscale;","}",'.celtra-icon-redo:before { content: "\\e600"; }','.celtra-icon-close:before { content: "\\e60d"; }','.celtra-icon-go-landscape:before { content: "\\e603"; }','.celtra-icon-twitter:before { content: "\\e605"; }','.celtra-icon-facebook:before { content: "\\e606"; }','.celtra-icon-phone:before { content: "\\e607"; }','.celtra-icon-play:before { content: "\\e608"; }','.celtra-icon-pause:before { content: "\\e609"; }','.celtra-icon-exit-full-screen:before { content: "\\e60a"; }','.celtra-icon-enter-full-screen:before { content: "\\e60b"; }','.celtra-icon-unmute:before { content: "\\e60c"; }','.celtra-icon-mute:before { content: "\\e601"; }','.celtra-icon-replay:before { content: "\\e602"; }','.celtra-icon-close2:before { content: "\\e604"; }',".spinner .center-button {","    display: none;","}",".web-audio .celtra-icon-mute, .web-audio .celtra-icon-unmute { color: red; }",""].join("\n");this.VideoPlayerCss=A}();;
!function(){var o={};new Image;o.ZINDEX_MAX=2147483647,o.LANDSCAPE=1,o.PORTRAIT=2,o.ENDED=0,o.PLAYING=1,o.PAUSED=2,o.BUFFERING=3,o.VIDEO_CUED=5,o.UNSTARTED=6,o.SEEKING=7,o.STATE={0:"ENDED",1:"PLAYING",2:"PAUSED",3:"BUFFERING",5:"VIDEO_CUED",6:"UNSTARTED",7:"SEEKING"},o.TRUTHY_REGEX=/^(yes|true|1)$/i,o.isTruthy=function(t){return o.TRUTHY_REGEX.test(t)},o.isTouchDevice=!!("ontouchstart"in window),o.validFor=function(t,e,n){var i=Date.now()+e;return function(){Date.now()<=i&&t.apply(n||null,arguments)}},o.exists=function(t,e){return-1!==t.indexOf(e)},o.lastCall=0,o.deduplicate=function(t,e,n){return function(){Date.now()-o.lastCall>e&&(t.apply(n,arguments),o.lastCall=Date.now())}},o.isFunction=function(t){return"function"==typeof t},o.constantly=function(t){return function(){return t}},o.hash=function(){for(var t=Array.prototype.slice.apply(arguments),e=0,n=0;n<t.length;n+=1)e+=1e3*t[n]+e<<1;return e},o.curry=Function.prototype.curry||function(){var t=this,e=Array.prototype.slice.call(arguments);return function(){return t.apply(this,e.concat(Array.prototype.slice.call(arguments)))}},o.offset=function(t,e){var t=t.getBoundingClientRect()||{top:0,left:0},e=e||document,n=e.documentElement,e=e.defaultView;return{top:t.top+(e.pageYOffset||n.scrollTop)-(n.clientTop||0),left:t.left+(e.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}},o.attachHandlers=function(e,n,t){for(var i in t){var r=isArray(t[i])?t[i]:[t[i]];r.forEach(function(t){t=e[t];t&&n.on(i,t.bind(e))})}},o.idempotented=function(e,n){var i=!1;if(o.isFunction(e))return function(){var t;i||(t=Array.prototype.slice.call(arguments),i=!0,e.call(n||window,t))};throw"idempotented called with no function."},o.delayed=function(e,n,i){var r=null;return function(){var t=arguments;clearTimeout(r),r=setTimeout(function(){e.apply(i,t)},n)}},o.swapClass=function(t,e,n){hasClass(t,e)?(removeClass(t,e),addClass(t,n)):(removeClass(t,n),addClass(t,e))},o.memoize=function(r){return function(){var t,e=Array.prototype.slice.call(arguments),n="",i=e.length;for(r.memoize=r.memoize||{};i--;)n+=(t=e[i])===Object(t)?JSON.stringify(t):t,r.memoize||(r.memoize={});return n in r.memoize?r.memoize[n]:r.memoize[n]=r.apply(this,e)}},o.toMMSS=function(t){var e=Math.floor(t/36e5),n=Math.floor((t-36e5*e)/60),t=Math.round(t-36e5*e-60*n);return(n=n<10?"0"+n:n)+":"+(t=t<10?"0"+t:t)},o.fitComponent=function(t,e,n,i,r){var o,a,l,c=0<1-n/i*(e/t),r=(!!r?!c:c)?(o=n,l=0,i-(a=Math.ceil(e*(n/t)))):(a=i,l=n-(o=Math.ceil(t*(i/e))),0);return{width:Math.ceil(o),height:Math.ceil(a),marginHorizontal:l>>1,marginVertical:r>>1}},o.removeUnits=function(t){return parseInt(t.replace(/[a-z]+/,""))},o.capitaliseFirstLetter=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},o.createHandlerName=function(t,e){return(e=e||"on")+o.capitaliseFirstLetter(t)},o.forEach=function(t,e,n){for(var i in t)e.call(n,t[i],i,t)},o.changeStyle=function(t,e,n){for(var i,r=0;r<n.length;r+=1)(i=n[r])&&(i.style[t]=e)},o.show=function(){o.changeStyle("display","",arguments)},o.hide=function(){o.changeStyle("display","none",arguments)},o.showCursor=function(t){o.changeStyle("cursor","",t)},o.hideCursor=function(t){o.changeStyle("cursor","none",t)},o.removeElements=function(){for(var t=0;t<arguments.length;t+=1){var e=arguments[t];e&&e.parentNode&&e.parentNode.removeChild(e)}},o.removeChildren=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},o.isNode=function(t){return"object"==typeof Node?t instanceof Node:t&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},o.urlSerialize=function(t){var e,n=[];for(e in t)n.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return n.join("&")},o.composeUrl=function(){for(var t=[],e=null,n=!1,i=0;i<arguments.length;i+=1){var r=arguments[i]||"";if("object"==typeof r){e=o.urlSerialize(r);break}n=0<(r="function"==typeof r?r()||"":r).length&&"/"==r[r.length-1],r=(0===i?r:r.replace(/^\//,"")).replace(/\/$/,"");r&&t.push(r)}return t.join("/")+(n?"/":"")+(e?"?"+e:"")},o.xBindFactory=function(n){return function(t){var e=t.getAttribute("x-bind");e&&(n[e]=t).removeAttribute("x-bind")}},o.createDom=function(t,e,n,r){t=t.createElement("div"),r=r||noop;return t.innerHTML=tmpl("string"==typeof e?e:e.join(""),n||{}),function t(e){for(var n=e.children||[],i=0;i<n.length;i+=1)t(n[i]);return r(e),e}(t).children[0]},o.createStyleTag=function(t,e){t=t.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),t},o.insertStyleTag=function(t,e,n){var i=n.getElementsByTagName("head")[0];n.getElementById(t)||((n=document.createElement("style")).setAttribute("id",t),n.innerHTML=e,i.appendChild(n))},o.createSourceTag=function(t,e){t=t.createElement("source");return t.setAttribute("src",e),t},o.hasValue=function(t){return null!=t&&NaN!==t&&""!==t},o.filterObject=function(t,e){var n,i={};for(n in t)t.hasOwnProperty(n)&&(e&&e(t[n])||t[n])&&(i[n]=t[n]);return i},o.complement=function(t){return function(){return!t.apply(this,arguments)}},o.EMPTY_PIXEL="R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",(this.CeltraPlayerUtils=o).forEach=function(t,e,n){if(t.forEach)t.forEach(e,n);else for(var i in t){var r=t[i];e.call(n,i,r)}},o.isTouchDevice=!!("ontouchstart"in window),o.isTopNode=function(t){return"BODY"===t.tagName||"viewport"===t.id||"celtra-modal"===t.id},o.orientationLockHandler=function(t,e){var n=t.getControlsElement(),i=t.getWrapperElement();i&&(e?(t.isState(CeltraPlayerUtils.PLAYING)?t.__playAfterRotate=!0:t.__playAfterRotate=!1,t.pause(),n&&(n.style.display="none"),i.style.zIndex=-1):(n&&(n.style.display=""),t.__playAfterRotate&&t.play(),i.style.zIndex=CeltraPlayerUtils.ZINDEX_MAX))},o.construct=function(t,e){function n(){return t.apply(this,e)}return n.prototype=t.prototype,new n},o.getUrl=function(t){var t=(!!creative.runtimeParams.secure?t:"insecure"+o.capitaliseFirstLetter(t))+"Url",e=("undefined"!=typeof creative?creative:urls)[t];if(e)return e;throw"Undefined url key "+t},o.ifDefined=function(t,e){return void 0!==t?t:e},o.base64ToArrayBuffer=function(t){for(var e=window.atob(t),n=e.length,i=new Uint8Array(n),r=0;r<n;r++){var o=e.charCodeAt(r);i[r]=o}return i.buffer},o.createSourceObject=function(t,e){return{url:t,mediaType:e}},o.setMediaElementSource=function(n,i,t){var r;1===t.length?i.src=t[0].url:(r=[].slice.apply(i.childNodes||[]).map(function(t){return t.src}),t.forEach(function(t){var e;-1<r.indexOf(t.url)||((e=n.createElement("source")).src=t.url,e.type=o.generateMediaType(t.mediaType),i.appendChild(e))}))},o.generateMediaType=function(t){if(!t||!t.mime)return"";if(creative.runtimeParams.featureFlags.iOS17InlineVideoFix&&deviceInfo.os.ios("17",null))return t.mime;var e=[(e=t.codecs||{}).video,e.audio].filter(function(t){return!!t}).join(", ");return t.mime+(e?'; codecs="'+e+'"':"")}}(),function(){this.StatefulEventEmitter={changeState:function(t){var e=this._state;this._state!=t&&(this._state=t,this.emit("statechange",t,e))},getState:function(){return this._state},isState:function(){return-1!==Array.prototype.slice.apply(arguments).indexOf(this._state)}},extend(this.StatefulEventEmitter,EventEmitter)}(),function(){var r=-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("CriOS");function t(t,e,n){this.intervalId=null,this.containerEl=null,this.externalResize=noop,this.lastWidth=0,this.lastHeight=0,this.lastScrollX=0,this.lastScrollY=0,this.doc=t.ownerDocument,this.win="defaultView"in this.doc?this.doc.defaultView:this.doc.parentWindow,this.initialHostOffset={left:this.win.pageXOffset||document.documentElement.scrollLeft,top:this.win.pageYOffset||document.documentElement.scrollTop},this.containerEl=t;var i=this.containerEl.style;i.position=n?"fixed":"absolute",i.zIndex=CeltraPlayerUtils.ZINDEX_MAX-1,i.width="100%",i.height="100%",i.left="0px",i.top="0px",e||(i.background="#000"),this.containerEl.addEventListener("touchmove",o),this.containerEl.addEventListener("touchstart",o),this.win.document.body.appendChild(this.containerEl),this.resize=function(){var t=this.containerEl.style;t.width=this.lastWidth+"px",t.height=this.lastHeight+"px",t.zIndex=CeltraPlayerUtils.ZINDEX_MAX,this.emit("resize",{width:this.lastWidth,height:this.lastHeight,scrollX:this.lastScrollX,scrollY:this.lastScrollY})}.bind(this),this.tick=function(){window===("undefined"==typeof adapter?creative.adapter:adapter).getTopWindow()&&(this.containerEl.style.width="100%",this.containerEl.style.height="100%");var t=Math.max(this.win.document.documentElement.clientWidth,this.win.innerWidth||0),e=Math.max(this.win.document.documentElement.clientHeight,this.win.innerHeight||0);(this.lastWidth!==t||this.lastHeight!==e||ios("7")&&r)&&(this.lastWidth=t,this.lastHeight=e,defer(this.resize))}.bind(this),this.intervalId=setInterval(this.tick,60),new Tapper(t)}function o(t){var e=null!=typeof adapter?adapter:creative.adapter;"touchstart"==t.type&&e.useNativeClickForTapDetection||t.preventDefault(),t.stopPropagation()}extend(t.prototype,EventEmitter),t.prototype.getElement=function(){return this.containerEl},t.prototype.destroy=function(){this.containerEl&&(this.containerEl.removeEventListener("touchmove",o),this.containerEl.removeEventListener("touchstart",o),clearInterval(this.intervalId),this.containerEl.innerHTML="")},window.FullScreenHandler=t}();;
!function(){function t(e){switch(e){case"video/mp4":return"video.mp4";case"video/webm":return"video.webm";case"video/avi":return"video.avi";case"audio/mp4":return"audio.m4v";default:throw new Error("Unknown mime type")}}var n={startMuted:!1,preload:!1,from:null,to:null,blobHash:null,hasAudio:!0,skipCodecs:[],codecPriority:["vp9","h265","h264","vp8"],transcodingGroup:"inline",customUrlParameters:{},forceMPEG4Video:!1,forceMPEG1Video:!1},a=CeltraPlayerUtils.composeUrl,c=CeltraPlayerUtils.filterObject,s=CeltraPlayerUtils.getUrl,u=(createSourceObject=CeltraPlayerUtils.createSourceObject,generateMediaType=CeltraPlayerUtils.generateMediaType,VideoEngineProvider={},{vp9:{low:["vp9_served_480p"],medium:["vp9_served_720p"],high:["vp9_served_1080p"]},h265:{low:["x265_served_480p"],medium:["x265_served_1080p"],high:["x265_served_1080p"]},h264:{low:["mpeg4HQ"],medium:["mpeg4HQPlus"],high:["mpeg4HD"]},vp8:{low:["webmHQ"],medium:["webmHQ"],high:["webmHD"]}}),l=function(e,r){return!!{h265:deviceInfo.browser.chrome(),vp9:deviceInfo.os.android(null,"7.1")||r.isVideo360&&deviceInfo.browser.firefox()||deviceInfo.browser.safari()&&deviceInfo.deviceType.desktop()}[e]},d=function(){return!deviceInfo.deviceType.mobileDevice()||deviceInfo.os.ios("10",null)&&!deviceInfo.browser.chrome(null,"64")||deviceInfo.os.android()&&deviceInfo.browser.chrome("53",null)&&!deviceInfo.browser.samsung()||deviceInfo.os.android()&&deviceInfo.browser.samsung("6.4",null)},v=(AudioEngineProvider={},function(e){return"undefined"!=typeof creative?(e=creative.videoTranscodingPresets[e]&&creative.videoTranscodingPresets[e].algoVersion,creative.version+(e?"-"+e:"")):null});VideoEngineProvider.createVideoEngineSpec=function(e,r){var r=merge(n,r),i=(r.skipCodecs=r.skipCodecs.filter(function(e){return-1===["h264","vp8"].indexOf(e)}),"1"==r.campaignExplorer&&(r.startMuted=!0),o=e,(i=r).forceMPEG4Video||!i.forceMPEG1Video&&!i.fallbackToMPEG1&&(d()||o)?"html5":"jsVideo"),o={inUserInitiatedThread:e,startMuted:r.videoElement?r.videoElement.muted:r.startMuted};return"jsVideo"==i?merge({clazz:"JsVideoEngine",presets:[(i=r).fallbackToMPEG1?"mpeg1LQVideo":"mpeg1SHQVideo"],engineType:"mpeg1",doAVSync:i.hasAudio&&!i.isTeaser,isTeaser:i.isTeaser,preload:i.preload,options:{}},o):merge(function(r,e){var i="";if(r.isMasterVideo)if(deviceInfo.deviceType.desktop()&&!r.capStreamAtHQPlus)i="high";else i="medium";else if((deviceInfo.deviceType.desktop()||r.isVideo360||r.hqQuality||r.isSnapchatFormat)&&!r.isTeaser)i="medium";else i="low";var o=r.codecPriority.filter(function(e){return r.skipCodecs.indexOf(e)===-1&&!l(e,r)}).map(function(e){return u[e][i]}).reduce(function(e,r){return e.concat(r)},[]).filter(function(e){return creative.videoTranscodingGroups[r.transcodingGroup].indexOf(e)!==-1});if(r.videoElement){var n=document.createElement("video");var d=["","maybe","probably"];var t=o.map(function(e){var r=creative.videoTranscodingPresets[e].mediaType;var i=deviceInfo.browser.chrome()&&e.indexOf("mpeg4")===0?"probably":n.canPlayType(generateMediaType(r));return{id:e,canPlayType:i}}).sort(function(e,r){if(e.canPlayType===r.canPlayType)return 0;return d.indexOf(e.canPlayType)>d.indexOf(r.canPlayType)?-1:1}).shift().id;o=[t]}var a=!deviceInfo.deviceType.desktop()&&r.isVideo360&&e&&!r.startMuted,c;return{clazz:deviceInfo.os.ios(null,"10")&&r.isVideo360?"CrossOriginHtml5VideoEngine":"Html5VideoEngine",presets:o,engineType:"html5",doAVSync:a,isTeaser:r.isTeaser,preload:r.preload,crossOrigin:true,options:{}}}(r,e),o)},VideoEngineProvider.createVideoSourceObjects=function(e,n){var d=e.doAVSync||e.isTeaser;return e.presets.map(function(e){r=n;var r=c(merge({from:r.from,to:r.to,muted:d?"1":null,transform:"VideoStream",celtraCacheBust:v(e)},r.customUrlParameters)),i=creative.videoTranscodingPresets[e].mediaType,o=t(i.mime);return createSourceObject(a(s("cachedApi"),"videoStream",n.blobHash,e,o,r),i)})},window.VideoEngineProvider=VideoEngineProvider,AudioEngineProvider.createAudioEngineSpec=function(e){return e.doAVSync?{clazz:"undefined"!=typeof AudioContext||"undefined"!=typeof webkitAudioContext?"WebAudioEngine":"Html5AudioEngine",preload:e.preload}:null},AudioEngineProvider.createAudioSourceObjects=function(n){return["aacAudio"].map(function(e){var r=n?(r=n,c(merge({from:r.from,to:r.to,transfom:"VideoStream",celtraCacheBust:v(e)},r.customUrlParameters))):{},i=creative.videoTranscodingPresets[e].mediaType,o=t(i.mime);return createSourceObject(a(s("cachedApi"),"videoStream",n.blobHash,e,o,r),i)})},window.AudioEngineProvider=AudioEngineProvider}();;
!function(){function i(){}var a,t,n={fsvp:{attachment:"body",positioning:"screen",type:"layer"}},l={},s=null,d=!1,c=null;function o(){videoEventsAdapter=null,d=!1,a=s=null}function f(){videoEventsAdapter&&(videoEventsAdapter.destroy(),videoEventsAdapter=null),s&&(s.destroy(),a.destroy(),o())}i.init=function(e){o(),l=merge({hideControls:!1,controlsHidden:!1,baseUrl:urls.staticUrl+"runner/FullscreenVideoPlayer/",muteUnmuteEnabled:!((ios("9")||ios("8"))&&tablet())},e||{}),adapter.createPlacements(n,function(){c=adapter.placements.fsvp})},i.play=function(e,t,n){adapter._stopAllMedia("toPlayVideo"),f();d=!1,a=new FullScreenHandler(c.getContainer(),!1,android("4","5")&&!l.forceAbsolutePositioning),0;try{var o=parseFloat(t.file.meta.duration)}catch(e){o=null}t.file.meta&&(l.muteUnmuteEnabled=l.muteUnmuteEnabled&&t.file.meta.hasAudio);function r(e){return new BasicVideoControls(e)}o={autoplay:!1,baseUrl:l.baseUrl,closeFSOnEnd:!0,fullscreenMode:"permanent",autohideTime:3,duration:o},t.file.meta&&(o.videoWidth=t.file.meta.width,o.videoHeight=t.file.meta.height),o=(s=new VideoPlayer(a.getElement(),function(){return{clazz:"Html5VideoEngine",engineType:"html5",videoUrl:t.file.getUrl(),doAVSync:!1,options:{}}},function(e,t){e=new BasicVideoControlsController(e,r,extend(l,t));return e.on("playButtonPressed",function(){s.play()}.bind(this)),e},function(){return!0},o)).createSpecs(!0,!1);s.initialize(o),i.attachListeners(n),videoEventsAdapter=new VideoEventsAdapter(s),e.registerSource(videoEventsAdapter),s.on("userInteraction",function(){e.trackUserInteraction()}),c.setPosition(0,0),c.show(),s.play(),s.redraw()},i.attachListeners=function(e){t=CeltraPlayerUtils.idempotented(function(){e(d)}),s.on("timeupdate",i.onTimeUpdate),s.on("close",i.close),s.on("ended",i.close),s.on("error",i.close),s.on("exitfullscreen",i.close),adapter.once("dismissed",i.close),adapter.once("collapsed",i.close),adapter.on("orientationchange",i.refresh),adapter.on("resize",i.refresh),adapter.once("mediaStopRequested",i.close)},i.removeListeners=function(){s.off("timeupdate",i.onTimeUpdate),s.off("close",i.close),s.off("ended",i.close),s.off("error",i.close),s.off("exitfullscreen",i.close),adapter.off("dismissed",i.close),adapter.off("collapsed",i.close),adapter.off("orientationchange",i.refresh),adapter.off("resize",i.refresh),adapter.off("mediaStopRequested",i.close)},i.onTimeUpdate=function(){.5<s.currentTime&&(d=!0)},i.refresh=function(){s.redraw()},i.close=function(){null!==s&&(c.hide(),i.removeListeners(),s.pause(),s.hide(),t(),defer(f,"undefined"!=typeof ADMARVEL?1e3:100))},window.FullscreenVideoPlayer=i}();;
!function(){this.Html5VideoEngine=function(e,t){var n=merge({},{playsInline:!1,maxTimeupdatesPerSecond:15},t.options),t=(n.startMuted=!!t.startMuted,n.crossOrigin=!!t.crossOrigin,n.videoElement),r=!!t,i=r?t:document.createElement("video"),t=i,o=n;t.setAttribute("x-celtra-media",""),o.playsInline&&(t.setAttribute("webkit-playsinline",""),t.setAttribute("playsinline",""),o.startMuted&&(t.muted=!0)),o.crossOrigin&&(t.crossOrigin="anonymous"),t.preload=o.preload?"auto":"none",CeltraPlayerUtils.setMediaElementSource(document,t,e);for(var u={},a=(extend(u,EventEmitter),function(e){u.emit(e.type,e)}.bind(this)),d=["loadstart","loadedmetadata","durationchange","progress","canplay","play","playing","pause","ended","buffering","endbuffering","muted","unmuted","seeking","seeked","exitfullscreen","webkitendfullscreen","error","canunmute","custominfo","playersourceloading"],s=d.length-1;0<=s;s--)i.addEventListener(d[s],a);function c(){m!==i.volume&&(m=i.volume,u.emit("volumechange",m))}function l(){var e=u.currentTime;g%Math.round(60/n.maxTimeupdatesPerSecond)==0&&u.isPlaying&e!==f&&(f=e,u.emit("timeupdate",e)),g++}var m=i.volume,f=0,g=0,p=(Ticker.frame(c),Ticker.frame(l),Object.defineProperties(u,{currentTime:{get:function(){return this.getCurrentTime()},set:function(e){this.setCurrentTime(e)}},reportsSeeking:{get:function(){return!!i.reportsSeeking}},buffered:{get:function(){return i.buffered}},duration:{get:function(){return i.duration}},muted:{get:function(){return i.muted},set:function(e){i.muted=e}},isPlaying:{get:function(){return!(!(0<this.getCurrentTime())||i.paused||i.ended)}},paused:{get:function(){return i.paused}},activeSrc:{get:function(){return i.currentSrc||i.src}}}),r||(i.videoWidth=n.videoWidth,i.videoHeight=n.videoHeight),u.continuePlaying=function(){i.play()}.bind(this),u.render=function(){!r&&android("4.0","4.2")&&(i.style.height="auto",i.style.minHeight="auto");try{i.load()}catch(e){}return i},i.play?i.play.bind(i):noop),y=i.pause?i.pause.bind(i):noop,v=!0,h=function(){u.emit("autoplaynotpossible")},b=function(){var e;u.pauseEnforced||void 0!==(e=p())&&e.catch(function(e){u.emit("autoplayrejected"),"NotAllowedError"!==e.name&&"AbortError"!==e.name||(Logger("Html5VideoEngine").error("Video Engine - ",e),i.muted=!0,u.emit("forcemuted"),v?(v=!1,b()):(h(),h=noop))})};return u.mute=function(){i.muted=!0},u.unMute=function(){i.muted=!1},u.setCurrentTime=function(e){u.isReady()&&(i.currentTime=e)},u.getCurrentTime=function(){return u.isReady()&&0<i.currentTime?i.currentTime:0},u.isReady=function(){return i&&0!==i.readyState},u.play=function(){u.pauseEnforced=!1,celtra.webkit("534.30")||celtra.webkit("537.36")||fakeclick(function(){b()}.bind(this)),defer(function(){b()}.bind(this)),CeltraPlayerUtils.isNode(i)&&i.addEventListener("progress",i.continuePlaying)},u.pause=function(){CeltraPlayerUtils.isNode(i)&&i.removeEventListener("progress",i.continuePlaying,{},{}),y(),u.pauseEnforced=!0},u.destroy=function(){y();for(var e=d.length-1;0<=e;e--)i.removeEventListener(d[e],a);r||CeltraPlayerUtils.removeElements(i),Ticker.removeFrame(c),Ticker.removeFrame(l)},u}}();;
!function(e){var s=Object.create(EventEmitter),t=window.AudioContext||window.webkitAudioContext,o=null,i=!1,n=!1;extend(s,{init:function(e,t,i){return this._sourceNode=null,this._buffer=null,this._bufferSilence=null,this._encodedBuffer=null,this._emitTimeUpdateInterval=null,this._sourceUrl=e,this._paused=!0,this._pausedAt=0,this._timeDiff=0,this._loadStatus="unstarted",this.loop=!!i,t&&this.load(),this},load:function(){var e;"unstarted"===this._loadStatus&&(this._loadStatus="pending",(e=new XMLHttpRequest).open("GET",this._sourceUrl,!0),e.responseType="arraybuffer",e.onload=function(){this._encodedBuffer=e.response,o&&this._decodeAudioData()}.bind(this),e.send())},unlock:function(){i||(this._iosHack(),this._createAudioContext(),this._createNodeAndPlayFrom(this._bufferSilence,0,this.loop))},playAudio:function(e){this._iosHack(),this._createAudioContext(),this.load();e=null==e?this._pausedAt:e;this.pause(),this._timeDiff=o.currentTime-e,this._paused=!this._buffer,this._createNodeAndPlayFrom(this._buffer||this._bufferSilence,e,this.loop),this._emitTimeUpdate(),i||setTimeout(function(){var e,t;this._sourceNode&&(e=this._sourceNode.playbackState===this._sourceNode.PLAYING_STATE,t=this._sourceNode.playbackState===this._sourceNode.FINISHED_STATE,i=i||!!this._buffer&&(e||t))}.bind(this),0)},pause:function(){clearInterval(this._emitTimeUpdateInterval),this._pausedAt=this.currentTime,this._paused=!0,this._clearSourceNode()},destroy:function(){this.pause(),"function"==typeof o.close&&o.close(),this._sourceNode=null,this._buffer=null,this._bufferSilence=null,this._encodedBuffer=null},_iosHack:function(){ios()&&!n&&(this._createAudioContext(),this._createNodeAndPlayFrom(this._bufferSilence,0,this.loop),"function"==typeof o.close&&(o.close(),o=null),this._createAudioContext(),n=!0)},_createAudioContext:function(){o||(o=new t,this._bufferSilence=o.createBuffer(1,1,o.sampleRate),this._encodedBuffer&&!this._buffer&&this._decodeAudioData())},_createNodeAndPlayFrom:function(e,t,i){this._clearSourceNode(),this._sourceNode=o.createBufferSource(),this._sourceNode.connect(o.destination),this._sourceNode.buffer=e,this._sourceNode.loop=i,"function"==typeof this._sourceNode.noteGrainOn?this._sourceNode.noteGrainOn(0,t,e.duration-t):"function"==typeof this._sourceNode.start?this._sourceNode.start(0,t):this._sourceNode.noteOn(0,t)},_clearSourceNode:function(){if(this._sourceNode){try{"function"==typeof this._sourceNode.stop?this._sourceNode.stop(0):this._sourceNode.noteOff(0)}catch(e){}this._sourceNode.disconnect(),this._sourceNode=null}},_emitTimeUpdate:function(){this.paused||this._buffer&&this.currentTime>=this._buffer.duration?clearInterval(this._emitTimeUpdateInterval):this._emitTimeUpdateInterval=setInterval(this.emit.bind(this,"timeupdate"),250)},_decodeAudioData:function(){o.decodeAudioData(this._encodedBuffer,function(e){this._buffer=e,this._loadStatus="loaded",this.emit("canplay"),this.emit("canplaythrough")}.bind(this))}}),Object.defineProperties(s,{paused:{get:function(){return this._paused}},ended:{get:function(){return!1}},ready:{get:function(){return"loaded"===this._loadStatus}},playedBefore:{get:function(){return i}},currentTime:{get:function(){return this._paused?this._pausedAt:o.currentTime-this._timeDiff},set:function(e){this._pausedAt=e,"loaded"!==this._loadStatus||this._paused||(this.pause(),this.playAudio(e))}}}),e.WebAudioEngine=function(e,t,i){return Object.create(s).init(e,t,!!i)}}(this);;
!function(){this.Html5AudioEngine=function(e,t){var n,o,r;return"undefined"==typeof Audio?null:((n=new Audio).isUnlocked=!1,t?(n.preload="auto",CeltraPlayerUtils.setMediaElementSource(document,n,e),n.start=noop):(n.preload="none",n.start=function(){CeltraPlayerUtils.setMediaElementSource(document,n,e),n.start=noop}),n.ready=!1,r=function(){.3<n.buffered/n.duration&&o()},n.addEventListener("canplay",o=function(e){n.ready=!0}),n.addEventListener("canplaythrough",o),n.addEventListener("progress",r),n.unlock=noop,n.on=n.addEventListener,n.off=n.removeEventListener,n.playedBefore=!1,n.unlock=function(){this.isUnlocked||this.playedBefore||(fakeclick(function(){celtra.webkit("537.36")&&n.play(),n.pause()}),this.isUnlocked=!0)},n.playFrom=function(e){n.start(),n.ready&&(fakeclick(function(){n.play()}),void 0!==e&&(n.currentTime=e,n.playedBefore=!0))},n.destroy=function(){for(this.pause(),this.src=null;this.firstElementChild;)this.removeChild(this.lastElementChild);n.removeEventListener("progress",r),n.removeEventListener("canplay",o),n.removeEventListener("canplaythrough",o)},n.setAttribute("x-celtra-media",""),n)}}();;
!function(){this.AVSyncAudio={init:function(i,t,e){this.onPause=this.onPause.bind(this),this.onEnded=this.onEnded.bind(this),this.onPlay=this.onPlay.bind(this),this.onReplayed=this.onReplayed.bind(this),this.onMuted=this.onMuted.bind(this),this.onUnMuted=this.onUnMuted.bind(this),this.onTimeUpdate=this.onTimeUpdate.bind(this),this.onFirstPlay=this.onFirstPlay.bind(this),this.destroy=this.destroy.bind(this),this.video=i,this.audio=t,this.muted=e,this._lastSyncTime=0,this.video.once("destroy",this.destroy),this.video.once("userplayed",this.onFirstPlay),this.video.on("muted",this.onMuted),this.video.on("unmuted",this.onUnMuted),this.video.on("replayed",this.onReplayed)},attach:function(){this.video.on("pause",this.onPause),this.video.on("ended",this.onEnded),this.video.on("userpaused",this.onPause),this.video.on("seeking",this.onPause),this.video.on("play",this.onPlay),this.video.on("playing",this.onPlay),this.video.on("seeked",this.onPlay),this.video.on("timeupdate",this.onTimeUpdate)},destroy:function(){this.audio.pause(),this.video.off("userplayed",this.onFirstPlayed),this.video.off("userpaused",this.onPause),this.video.off("pause",this.onPause),this.video.off("seeking",this.onPause),this.video.off("ended",this.onEnded),this.video.off("play",this.onPlay),this.video.off("playing",this.onPlay),this.video.off("seeked",this.onPlay),this.video.off("muted",this.onMuted),this.video.off("unmuted",this.onUnMuted),this.video.off("timeupdate",this.onTimeUpdate),this.video.off("replayed",this.onReplayed)},onFirstPlay:function(){var e,s,o,d;this.video.off("userplayed",this.onFirstPlay),this.audio.start(),this.muted||this.audio.ready?(fakeclick(function(){this.audio.load()}.bind(this)),this.attach()):(s=e=!1,o=celtra.webkit("534.30"),d=function(){var i=isMediaPlaying(this.video),t=isMediaPlaying(this.audio);if(t&&i||t&&s||i&&e||e&&s||this.audio.ready){this.attach(),this.video.silentPlay();try{this.video.currentTime=this.audio.currentTime}catch(i){}}else i&&!t&&(this.video.silentPause(),s=!0),!t||i||o||(this.audio.pause(),e=!0),defer(d.bind(this),120)}.bind(this),o?this.audio.playFrom():fakeclick(function(){this.audio.load()}.bind(this)),defer(d,500))},onPause:function(){this.audio.pause()},onEnded:function(){this.audio.pause(),this.audio.ready&&(this.audio.currentTime=0)},onPlay:function(){this.muted||this.audio.playFrom()},onReplayed:function(){this.muted||(this.audio.playFrom(0),this._lastSyncTime=Date.now())},onMuted:function(){this.muted=!0,this.audio.pause()},onUnMuted:function(){this.muted=!1,isMediaPlaying(this.video)&&this.audio.ready?this.audio.playFrom(this.video.currentTime):this.audio.unlock()},onTimeUpdate:function(){var i=isMediaPlaying(this.audio);if(!(!i&&this.audio.playedBefore||this.muted))if(!this.audio.paused||this.muted||this.video.paused){var i=this.video.currentTime-this.audio.currentTime,t=Math.abs(i);if(!(t<.6||this.video.currentTime<1||Date.now()-this._lastSyncTime<3e3))if(this._lastSyncTime=Date.now(),i<0&&t<2)try{this.video.currentTime=this.audio.currentTime}catch(i){}else try{this.audio.currentTime=this.video.currentTime+.3}catch(i){}}else this.audio.playFrom(this.video.currentTime)}}}();;
!function(){this.AVSyncWebAudio={init:function(i,t,e){this.onPause=this.onPause.bind(this),this.onEnded=this.onEnded.bind(this),this.onMuted=this.onMuted.bind(this),this.onUnMuted=this.onUnMuted.bind(this),this.onTimeUpdate=this.onTimeUpdate.bind(this),this.onFirstPlay=this.onFirstPlay.bind(this),this.destroy=this.destroy.bind(this),this.video=i,this.audio=t,this.muted=e,this._lastSyncTime=0,i.once("destroy",this.destroy),i.once("userplayed",this.onFirstPlay),this.video.on("muted",this.onMuted),this.video.on("unmuted",this.onUnMuted)},attach:function(){this.video.on("pause",this.onPause),this.video.on("ended",this.onEnded),this.video.on("userpaused",this.onPause),this.video.on("seeking",this.onPause),this.video.on("timeupdate",this.onTimeUpdate)},destroy:function(){this.audio.pause(),this.video.off("userplayed",this.onFirstPlayed),this.video.off("pause",this.onPause),this.video.off("userpaused",this.onPause),this.video.off("seeking",this.onPause),this.video.off("ended",this.onEnded),this.video.off("muted",this.onMuted),this.video.off("unmuted",this.onUnMuted),this.video.off("timeupdate",this.onTimeUpdate)},onFirstPlay:function(){this.video.off("userplayed",this.onFirstPlay);function i(){t&&!s&&e.silentPause()}var t=!0,e=this.video,s=celtra.webkit("534.30");this.muted||this.audio.ready?(this.audio.load(),this.attach()):(this.video.once("canplay",i),this.video.once("playing",i),this.video.once("timeupdate",i),this.audio.once("canplaythrough",function(){t=!1,this.video.off("canplay",i),this.video.off("playing",i),this.video.off("timeupdate",i),isMediaPlaying(this.video)||this.video.silentPlay(),!isMediaPlaying(this.audio)&&android()&&this.audio.playAudio(),this.attach()}.bind(this)),this.audio.load())},onPause:function(){this.audio.pause()},onEnded:function(){this.audio.pause(),this.audio.currentTime=0},onMuted:function(){this.muted=!0,this.audio.pause()},onUnMuted:function(){this.muted=!1,isMediaPlaying(this.video)?this.audio.playAudio(this.video.currentTime):this.audio.unlock()},onTimeUpdate:function(){if(!this.muted)if(this.audio.paused&&!this.video.paused)this.audio.playAudio(this.video.currentTime);else{var i=this.video.currentTime-this.audio.currentTime,t=Math.abs(i);if(!(t<.6||this.video.currentTime<1||Date.now()-this._lastSyncTime<3e3))if(this._lastSyncTime=Date.now(),i<0&&t<2)try{this.video.currentTime=this.audio.currentTime}catch(i){}else try{this.audio.currentTime=this.video.currentTime}catch(i){}}}}}();;
!function(){function s(e,i,t){this._videoPlayer=e,this._opts=merge({},s.DEFAULTS,t),this.isVisible=!1,this._controlsInitiallyDisabled=!1,this._isFirstPlay=!0,this._playAfterSeeking=!1,this._isMuted=!1,this._spinnerShown=!0,this._cursorHidden=!1,CeltraPlayerUtils.attachHandlers(this,this._videoPlayer,s.PLAYER_EVENTS,!0),this._changeVisibility=this._changeVisibility.bind(this),this.handleUserInteraction=this.handleUserInteraction.bind(this),this._videoControls=i(this.handleUserInteraction)}extend(s.prototype,EventEmitter),s.DEFAULTS={autohideTime:0,progressbar:!0,progressbarColour:"#4589ce",startInFullScreen:!1,controlsHidden:!1,fullscreenMode:"both",minLengthToSeek:30,muteUnmuteEnabled:!0},s.PLAYER_EVENTS={durationchange:"onVPDurationChange",muted:"onVPMuted",unmuted:"onVPUnmuted",progress:"onVPProgress",play:"onVPPlay",playing:"onVPPlaying",pause:"onVPPause",autoplayrejected:"onVPAutoplayRejected",forcemuted:"onVPForceMuted",ended:"onVPEnded",buffering:"onVPBuffering",timeupdate:"onVPTimeupdate",seekto:"onVPSeekto",enterfullscreen:"onVPEnterFullscreen",exitfullscreen:"onVPExitFullscreen",orientationchange:"onVPOrientationChange",canunmute:"onVPCanUnmute",playersourceloading:"onVPPlayerSourceLoading"},extend(s.prototype,{render:function(e){e=this._videoControls.render(e,this._opts);return this.init(),e},init:function(){this._changeVisibilityTimed(!1),this._opts.progressbar||this._videoControls.hide("sliderContainer"),"permanent"===this._opts.fullscreenMode?(this._videoControls.hide("enterFullScreen","exitFullScreen"),this._videoControls.show("close")):!0===this._videoPlayer.isDesktop&&!1===this._videoPlayer.dtCanFullscreen?this._videoControls.hide("close","enterFullScreen","exitFullScreen"):(this._videoControls.hide("close","exitFullScreen"),this._videoControls.show("enterFullScreen")),"disabled"===this._opts.fullscreenMode&&this._videoControls.hide("enterFullScreen","exitFullScreen","close"),this._opts.debug?this._videoControls.show("monitor"):this._videoControls.hide("monitor"),this._opts.muteUnmuteEnabled?(this._videoControls.hide("mute"),this._videoControls.hide("unMute")):this._videoControls.disableMuteUnmuteControls(),this._videoControls.hide("pause","replay","play"),this._opts.isAutoplay||this._videoControls.show("play"),this._spinnerHide(),this._videoPlayer.isDesktop&&this._videoControls.setDTMouseMoveHandler(this._videoPlayer.getWrapperElement())},adjustSizes:function(e){e<80?this._videoControls.addClass("spinner","video-player-spinner-small"):this._videoControls.addClass("spinner","video-player-spinner-big")},reset:function(){this._controlsInitiallyDisabled=!1,this._videoControls.hide("pause","replay"),this._videoControls.show("play"),this._spinnerHide(),defer(function(){this._videoControls.hide("duringPlaySet")}.bind(this),500)},destroy:function(){this._videoControls.destroy()},handleUserInteraction:function(e,i){switch(e){case"vidWrapper":this._changeVisibilityTimed(!0),this._makeControlsDisapear();break;case"wrapper":this._videoPlayer._spinnerShown?this._changeVisibilityTimed(!0):(!this.isVisible||this._videoPlayer.ended||this._spinnerShown||i?this._changeVisibilityTimed(!0):this._videoPlayer.paused?(this._videoPlayer.play(),this.emit("userInteraction",{isUserEngaged:!0})):(this._videoPlayer.pause(),this.emit("userInteraction")),this._makeControlsDisapear());break;case"mute":this._videoPlayer.mute(),this._videoControls.pendingStateOn("mute"),this._makeControlsDisapear(),this.emit("userInteraction");break;case"unMute":this._videoPlayer.unMute(),this._videoControls.pendingStateOn("unMute"),this._makeControlsDisapear(),this.emit("userInteraction",{isUserEngaged:!0});break;case"enterFullScreen":this._videoPlayer.enterFullScreen(),this._makeControlsDisapear(),this.emit("userInteraction",{isUserEngaged:!0});break;case"exitFullScreen":this._videoPlayer.exitFullScreen(),this._makeControlsDisapear(),this.emit("userInteraction");break;case"pause":this._controlsInitiallyDisabled||(this._videoPlayer.pause(),this.emit("userInteraction"));break;case"play":this._controlsInitiallyDisabled||(this.emit("userInteraction",{isUserEngaged:!0}),this.emit("playButtonPressed"));break;case"replay":this._changeVisibilityTimed(!1),this._videoPlayer.replay(),this.emit("userInteraction",{isUserEngaged:!0});break;case"close":this._videoPlayer.close(),this.emit("userInteraction")}},onVPPlayerSourceLoading:function(){this._spinnerShow()},onVPCanUnmute:function(e){},onVPMuted:function(e){this._isMuted=!0,this._videoControls.hide("mute"),this._videoControls.show("unMute"),this._videoControls.pendingStateOff("unMute"),this._videoControls.pendingStateOff("mute")},onVPUnmuted:function(e){this._isMuted=!1,this._videoControls.hide("unMute"),this._videoControls.show("mute"),this._videoControls.pendingStateOff("unMute"),this._videoControls.pendingStateOff("mute")},onVPPlay:function(){this._videoControls.hideAndShowWrapper(),this._isFirstPlay&&(this._isFirstPlay=!1,this._controlsInitiallyDisabled=!0,this._spinnerShow()),this._changeVisibility(!0),this._videoControls.hide("play")},onVPPlaying:function(){var e=this._opts.autohideTime;this._videoControls.hide("play","pause","replay"),e&&this._changeVisibilityTimed(!1,1e3*e)},onVPPause:function(){this._changeVisibilityTimed(!0),this._spinnerShown||this._videoControls.show("play")},onVPAutoplayRejected:function(){this.reset()},onVPForceMuted:function(){this.onVPMuted()},onVPBuffering:function(){this._spinnerShow(),this._videoControls.hide("play")},onVPEnded:function(){this._changeVisibilityTimed(!1),this._videoControls.hide("play","pause"),this._opts.pauseOnEnd||this._videoControls.show("replay")},onVPProgress:function(e){this._progressRatio=e,this._videoControls.setProgressBarWidth(e)},onVPTimeupdate:function(e){var i=this._videoPlayer.duration;this._videoControls.setTimeBarWidth(i&&e/i||0),this._controlsInitiallyDisabled&&(this._controlsInitiallyDisabled=!1),this._videoPlayer.paused||(this._videoControls.hide("play"),this._videoControls.hide("pause"),this._videoControls.hide("replay")),this._spinnerHide()},onVPEnterFullscreen:function(e){this._videoControls.hideAndShowWrapper(),this._videoControls.hide("enterFullScreen"),this._videoControls.show("exitFullScreen"),this._makeControlsDisapear()},onVPOrientationChange:function(e){this._opts.fullscreenLandscapeButtonsHack&&this._videoControls.orientationChange(function(e){e===CeltraPlayerUtils.LANDSCAPE&&this._videoPlayer.isFullScreen?this._elements.close.style.bottom=this._elements.exitFullScreen.style.bottom=this._elements.mute.style.bottom=this._elements.unMute.style.bottom="26px":this._elements.close.style.bottom=this._elements.exitFullScreen.style.bottom=this._elements.mute.style.bottom=this._elements.unMute.style.bottom=""})},onVPExitFullscreen:function(e){this._videoControls.hideAndShowWrapper(),this._videoControls.hide("exitFullScreen"),this._videoControls.show("enterFullScreen"),this._makeControlsDisapear()},onVPSeekto:function(e){this._videoControls.setTimeBarWidth(e)},_changeVisibility:function(e){this._opts.controlsHidden?(this.isVisible=!0,this._videoControls.hide("duringPlaySet")):e?(this._videoControls.show("duringPlaySet"),this._videoPlayer.isDesktop&&this._cursorHidden&&(this._videoControls.showCursor(this._videoPlayer.getWrapperElement()),this._cursorHidden=!1),this.isVisible=!0):(this._videoControls.hide("duringPlaySet"),this._videoPlayer.isDesktop&&this._videoPlayer.isFullScreen&&(this._videoControls.hideCursor(this._videoPlayer.getWrapperElement()),this._cursorHidden=!0),this.isVisible=!1,this._videoPlayer.isDesktop&&(this._videoControls.hasMouseMoved=!0))},_changeVisibilityTimed:function(e,i){clearTimeout(this._changeVisibilityTimeout),i?this._changeVisibilityTimeout=setTimeout(this._changeVisibility.bind(this,e),i):this._changeVisibility(e)},_makeControlsDisapear:function(){var e=this._opts.autohideTime;e&&this._changeVisibilityTimed(!1,1e3*e)},_spinnerHide:function(){this._spinnerShown&&(this._spinnerShown=!1,this._videoControls.hide("spinner"))},_spinnerShow:function(){!this._spinnerShown&&this._opts.canShowSpinner&&(this._spinnerShown=!0,defer(function(){this._spinnerShown&&(this._videoControls.hide("play"),this._videoControls.show("spinner"))}.bind(this),300))}}),this.BasicVideoControlsController=s}();;
!function(){function o(t){this._container=null,this._userInteractionHandler=t,this.onTapHandler=CeltraPlayerUtils.deduplicate(this.onTapHandler,400,this),this.hasMouseMoved=!1}extend(o.prototype,EventEmitter),o.TEMPLATE=['<div class="video-basic-controls-wrapper <%= desktop %> touchable" data-bind="wrapper">','  <div class="video-controls-hiddable" data-bind="duringPlaySet">','    <div class="video-controls-button video-controls-button-shadow video-controls-button-bottom-right touchable" data-bind="mute"><div class="celtra-icon-mute"></div></div>','    <div class="video-controls-button video-controls-button-shadow video-controls-button-bottom-right touchable" data-bind="unMute"><div class="celtra-icon-unmute"></div></div>','    <div class="video-controls-button video-controls-button-shadow video-controls-button-top-right touchable" data-bind="close"><div class="celtra-icon-close"></div></div>','    <div class="video-controls-button video-controls-button-shadow video-controls-button-top-right touchable" data-bind="enterFullScreen"><div class="celtra-icon-enter-full-screen"></div></div>','    <div class="video-controls-button video-controls-button-shadow video-controls-button-top-right touchable" data-bind="exitFullScreen"><div class="celtra-icon-exit-full-screen"></div></div>','    <div class="video-controls-slider-container touchable"  data-bind="sliderContainer">','        <div class="video-controls-progress-bar" data-bind="progressBar"></div>','        <div class="video-controls-time-bar" data-bind="timeBar"></div>',"    </div>","  </div>",'  <div class="video-controls-unhiddable" data-bind="outOfPlaySet">','    <div class="video-sizable"><div class="video-player-spinner-big" data-bind="spinner"></div></div>','    <div class="center-button touchable" data-bind="pause"><div class="celtra-icon-pause"></div></div>','    <div class="center-button touchable" data-bind="play"><div class="celtra-icon-play"></div></div>','    <div class="center-button touchable" data-bind="replay"><div class="celtra-icon-replay"></div></div>',"  </div>","</div>"],extend(o.prototype,{render:function(t,n){var e,i=n.isMasterVideo?[]:["play","replay"];return this._container||(e={},CeltraPlayerUtils.createDom(t,o.TEMPLATE,{desktop:windows("10")?"video-controls-desktop ie-click-event":desktop()?"video-controls-desktop":""},this._getWrapper(e)),this._container=e.wrapper,n.isMasterVideo&&this.hide("outOfPlaySet"),this._container.querySelector("[data-bind=progressBar]").style.backgroundColor=n.progressbarColour,this._container.querySelector("[data-bind=timeBar]").style.backgroundColor=n.progressbarColour,(t="undefined"!=typeof creative?creative:window.creative)&&(e="MRAIDAdapter"===t.adapter.constructor.name,"crop"===n.fitting&&e&&(this._container.querySelector("[data-bind=exitFullScreen]").style.top="50px")),i.forEach(function(t){var e,i;n[t]&&(e=n[t],i=this._getElements(t)[0],removeClass(i,"center-button"),addClass(i,"custom-button"),i.innerHTML='<img src="'+e.getUrl()+'" data-bind="'+t+'" style="width: '+e.width+"px; height: "+e.height+'px;" />')}.bind(this)),this._container.addEventListener("tap",this.onTapHandler)),this._container},show:function(){CeltraPlayerUtils.show.apply(null,this._getElements.apply(this,arguments))},hide:function(){CeltraPlayerUtils.hide.apply(null,this._getElements.apply(this,arguments))},showCursor:function(t){CeltraPlayerUtils.showCursor([t])},hideCursor:function(t){CeltraPlayerUtils.hideCursor([t])},setProgressBarWidth:function(t){t=Math.min(t,1),this._container&&this._container.querySelector("[data-bind=progressBar]")&&(this._container.querySelector("[data-bind=progressBar]").style.width=100*t+"%")},setTimeBarWidth:function(t){t=Math.min(t,1),this._container&&this._container.querySelector("[data-bind=timeBar]")&&(this._container.querySelector("[data-bind=timeBar]").style.width=100*t+"%")},hideAndShowWrapper:function(){this.hide("wrapper"),defer(function(){this.show("wrapper")}.bind(this))},disableMuteUnmuteControls:function(){this._getElements("mute")[0].innerHTML="",this._getElements("unMute")[0].innerHTML=""},pendingStateOn:function(t){addClass(this._getElements(t)[0],"video-controls-pending")},pendingStateOff:function(t){this._container&&removeClass(this._getElements(t)[0],"video-controls-pending")},addClass:function(t,e){t=this._getElements(t)[0];t&&addClass(t,e)},removeClass:function(t,e){t=this._getElements(t)[0];t&&removeClass(t,e)},orientationChange:function(t){t()},onTapHandler:function(t){t.stopPropagation();t=t.target.getAttribute("data-bind");t&&this._userInteractionHandler(t)},setDTMouseMoveHandler:function(e){e.addEventListener("mousemove",function(t){t.stopPropagation();t=t.target,t=t!==e?t.getAttribute("data-bind"):"vidWrapper";this.hasMouseMoved?this.hasMouseMoved=!1:"wrapper"!==t&&"vidWrapper"!==t||this._userInteractionHandler(t,!0)}.bind(this))},_getWrapper:function(i){return function(t){var e=t.getAttribute("data-bind");e&&(i[e]=t)}},_getElements:function(){if(this._container){for(var t,e=[],i=0;i<arguments.length;i++)(t=this._container.querySelector("[data-bind="+arguments[i]+"]"))&&e.push(t);return e}},destroy:function(){this._container&&(this._container.removeEventListener("tap",this.onTapHandler),CeltraPlayerUtils.removeElements(this._container),this._container=null)}}),this.BasicVideoControls=o}();;
!function(i){function t(e,t,i,n,s){this._containerEl=e,this._opts=merge({},o,s),this._videoEngine=null,this._videoEngineSpecProvider=t,this.isUserGazing=n,this._doc=e.ownerDocument,this._win=this._doc.defaultView,this._initialized=!1,this._firstPlay=!0,this.silentPauseActive=!1,this._engineType=null,this._videoPresets=[],this._muted=!0,i&&(this._controlsController=i(this,this._opts),this._controlsController&&this._controlsController.on("userInteraction",this.emit.bind(this,"userInteraction"))),this._aspectRatio=this._opts.videoWidth/this._opts.videoHeight,this.isFullScreen=!this.playsInline(),this.isDesktop=this._opts.isDesktop,this.anchoringPoint=this._opts.anchoringPoint,this.buffered=0,this._state=null,this._posterShown=!0,this._seeked=!1,this._repeated=0,this.playSucceeded=!1,this._playingEmitted=!1,this._firstRenderEmitted=!1,this._timeUpdateCounter=0,this._lastTimeUpdateEmitted=0,this.play=this.play.bind(this),this.silentPlay=this.silentPlay.bind(this),this.pause=this.pause.bind(this),this.silentPause=this.silentPause.bind(this),this.mute=this.mute.bind(this),this.unMute=this.unMute.bind(this),this.redraw=this.redraw.bind(this),this.enterFullScreen=this.enterFullScreen.bind(this),this.exitFullScreen=this.exitFullScreen.bind(this),this.destroy=this.destroy.bind(this),this._onFullscreenChange=this._onFullscreenChange.bind(this),this._init(),this.changeState(CeltraPlayerUtils.UNSTARTED),this._fullScreenAncestors=[]}extend(t.prototype,StatefulEventEmitter),Object.defineProperty(t.prototype,"paused",{get:function(){return this._videoEngine&&this._videoEngine.paused}}),Object.defineProperty(t.prototype,"componentName",{get:function(){return this._opts.componentName}}),Object.defineProperty(t.prototype,"duration",{get:function(){return this.serverReportedDuration||this._videoEngine&&this._videoEngine.duration||0}}),Object.defineProperty(t.prototype,"serverReportedDuration",{get:function(){return this._opts.duration}}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this._videoEngine&&this._videoEngine.getCurrentTime()||0},set:function(e){this._videoEngine&&this._videoEngine.setCurrentTime(e)}}),Object.defineProperty(t.prototype,"reportsSeeking",{get:function(){return!(!this._videoEngine||!this._videoEngine.reportsSeeking)}}),Object.defineProperty(t.prototype,"muted",{get:function(){return this._muted}}),Object.defineProperty(t.prototype,"fullscreen",{get:function(){return this.isFullScreen}}),Object.defineProperty(t.prototype,"engineType",{get:function(){return this._engineType}}),Object.defineProperty(t.prototype,"videoPresets",{get:function(){return this._videoPresets}}),Object.defineProperty(t.prototype,"activeSrc",{get:function(){return this._videoEngine&&this._videoEngine.activeSrc}}),Object.defineProperty(t.prototype,"activePreset",{get:function(){return this._videoPresets&&this._videoPresets.filter(function(e){return this.activeSrc&&~this.activeSrc.indexOf(e)}.bind(this))[0]}}),Object.defineProperty(t.prototype,"engineInitialized",{get:function(){return this._initialized}}),Object.defineProperty(t.prototype,"ended",{get:function(){return this.isState(CeltraPlayerUtils.ENDED)}});var o={canShowSpinner:!0,closeFSOnEnd:!1,fitting:"fit",videoPosition:"center",fullscreenMode:"both",pauseOnEnd:!1,playFrom:null,playTo:null,poster:"data:image/gif;base64,"+CeltraPlayerUtils.EMPTY_PIXEL,repeatTimes:0,videoWidth:160,videoHeight:100},n={loadstart:"onLoadStart",loadedmetadata:"onLoadedMetaData",durationchange:"onDurationChange",progress:"onProgress",timeupdate:["onTimeUpdate","onTimeUpdateRepeat"],canplay:"onCanPlay",play:"onPlay",playing:"onPlaying",pause:"onPause",autoplayrejected:"onAutoplayRejected",autoplaynotpossible:"onAutoplayNotPossible",forcemuted:"onForceMuted",ended:"onEnded",buffering:"onBuffering",endbuffering:"onEndBuffering",muted:"onMuted",unmuted:"onUnMuted",seeking:"onSeeking",seeked:"onSeeked",exitfullscreen:"onExitFullScreen",webkitendfullscreen:"onExitFullScreen",error:"onError",canunmute:"onCanUnMute",custominfo:"onCustomInfo",playersourceloading:"onPlayerSourceLoading",volumechange:"onVolumeChange"};t.DOM=['<div class="video-player-wrapper" x-bind="_wrapperEl">','    <div class="video-player-engine" x-bind="_engineContainerEl"></div>','    <div x-bind="_posterEl" class="video-player-poster" style="background-image: url(\'<%= poster %>\')"></div>','    <div class="video-controls-container" x-bind="_controlsWrapperEl"></div>',"</div>"],t.prototype._init=function(){var e;CeltraPlayerUtils.createDom(this._doc,t.DOM,this._opts,CeltraPlayerUtils.xBindFactory(this)),CeltraPlayerUtils.insertStyleTag("celtra-video-player-style",VideoPlayerCss,this._doc),this._controlsController&&(this._controlsEl=this._controlsController.render(this._doc),this._controlsWrapperEl.appendChild(this._controlsEl)),this._containerEl.appendChild(this._wrapperEl),this._posterShow(),this._controlsController&&this._controlsController.adjustSizes(this._containerEl.clientHeight),this._opts.preload&&(e=this.createSpecs(!1,this._opts.startMuted),this.initialize(e)),this.dtCanFullscreen=this.isDesktop&&this._toggleDesktopFSStateHandlers("add")},t.prototype.setDimensions=function(e,t){this.width=e,this.height=t,this.redraw(),this.emit("rendered")},t.prototype.getVideoElement=function(){return this._videoEngine},t.prototype.getControlsElement=function(){return this._controlsEl},t.prototype.getWrapperElement=function(){return this._wrapperEl},t.prototype._posterHide=function(){this._posterShown&&(this._posterShown=!1,this._posterEl.style.display="none")},t.prototype._posterShow=function(){this._posterShown||(this._posterShown=!0,this._posterEl.style.display="")},extend(t.prototype,{onLoadStart:function(){this.emit("loadstart")},onLoadedMetaData:function(){this.redraw(),this.emit("canunmute")},onCanPlay:function(){this.emit("canplay")},onDurationChange:function(){this.emit("durationchange")},onBuffering:function(){this.changeState(CeltraPlayerUtils.BUFFERING),this.emit("buffering")},onEndBuffering:function(){this.emit("endbuffering")},onPlayerSourceLoading:function(e){(this._opts.autoplay||e)&&this.emit("playersourceloading")},onMuted:function(){this._muted=!0,this.emit("muted")},onUnMuted:function(){this._muted=!1,this.emit("unmuted")},onVolumeChange:function(e){this._muted=0==e,this.emit(this._muted?"muted":"unmuted"),this.emit("volumechange",e)},onProgress:function(){"object"==typeof this._videoEngine.buffered&&0<this._videoEngine.buffered.length?this.buffered=this._videoEngine.buffered.end(0):this.buffered=this._videoEngine.buffered,this.emit("progress",this.buffered/(this.duration||1))},onTimeUpdate:function(e){!this._playingEmitted&&2<this._timeUpdateCounter&&0<this.buffered&&(this._playingEmitted=!0,this.onEndBuffering(),this.changeState(CeltraPlayerUtils.PLAYING),this.emit("playing")),this._timeUpdateCounter+=1;var t=Date.now();3<this._timeUpdateCounter&&70<t-this._lastTimeUpdateEmitted&&(this._lastTimeUpdateEmitted=t,this._posterHide(),this._firstRenderEmitted||(this.emit("firstRender"),this._firstRenderEmitted=!0),this.emit("timeupdate",this._videoEngine.getCurrentTime()))},onTimeUpdateRepeat:function(e){this._opts.playTo&&e>=this._opts.playTo&&(this._hasToBeRepeated()?this._doRepeat():(this.pause(),this._doEnd()))},onPlay:function(){this.emit("play")},onPlaying:function(){this.emit("playing"),this.changeState(CeltraPlayerUtils.PLAYING),this.playSucceeded=!0,this.redraw()},onPause:function(){this.changeState(CeltraPlayerUtils.PAUSED),this.emit("pause")},onAutoplayRejected:function(){this.emit("autoplayrejected")},onAutoplayNotPossible:function(){this.emit("autoplaynotpossible")},onForceMuted:function(){this.emit("forcemuted")},onExitFullScreen:function(){this.exitFullScreen()},onEnded:function(){this._playingEmitted=!1,this._hasToBeRepeated()?this._doRepeat():this._doEnd()},getContainerDimensions:function(){var e;return this.isFullScreen?{width:(e=this.dtCanFullscreen?this._wrapperEl:this._wrapperEl.parentNode).clientWidth,height:e.clientHeight}:{width:this.width,height:this.height}},redraw:function(){var e="fit"!==this._opts.fitting,t=this._aspectRatio,i=this.getContainerDimensions(),n=CeltraPlayerUtils.fitComponent(100*t,100,i.width,i.height,e);switch(this.anchoringPoint){case"top":n.marginVertical=0;break;case"bottom":n.marginVertical=Math.ceil(i.height-n.height)}this._opts.videoElement||(this._wrapperEl.style.background=this._opts.barColor);function s(e){e.width=n.width+"px",e.height=n.height+"px",e.minHeight=n.height+"px",e.left=n.marginHorizontal+"px",e.top=n.marginVertical+"px"}var t=this._opts.videoPosition||"center";t.includes("top")?n.marginVertical=0:t.includes("bottom")&&(n.marginVertical=Math.ceil(i.height-n.height)),t.includes("left")?n.marginHorizontal=0:t.includes("right")&&(n.marginHorizontal=Math.ceil(i.width-n.width));e?(s(this._engineContainerEl.style),s(this._posterEl.style),(t=this._controlsWrapperEl.style).width=i.width+"px",t.height=i.height+"px",t.minHeight=i.height+"px",t.left=0,t.top=0):(s(this._engineContainerEl.style),s(this._posterEl.style),s(this._controlsWrapperEl.style))},onSeeking:function(){this.emit("seeking")},onSeeked:function(e){if(this._seeked){switch(this._seeked=!1,this._stateBeforeSeek){case CeltraPlayerUtils.PLAYING:this.play();break;case CeltraPlayerUtils.PAUSED:this.silentPause()}this._stateBeforeSeek=void 0}this.emit("seeked")},onError:function(){this.emit("error")},onCanUnMute:function(){this.emit("canunmute")},onCustomInfo:function(e){this.emit("custominfo",e)}}),extend(t.prototype,{getState:function(){return this._state},mute:function(){this._videoEngine&&"function"==typeof this._videoEngine.mute&&this._videoEngine.mute(),this.onMuted()},unMute:function(){this._videoEngine&&"function"==typeof this._videoEngine.unMute&&this._videoEngine.unMute(),this.onUnMuted()},silentPlay:function(){this._videoEngine.play()},createSpecs:function(e,t){e=this._videoEngineSpecProvider(e,t),e=merge(e,{options:this._opts}),this._opts.videoStream&&this._opts.videoStream.useRaw&&(e.videoUrl=(creative.secure?creative.cachedApiUrl:creative.insecureCachedApiUrl)+"blobs/"+this._opts.videoStream.blobHash),t=AudioEngineProvider.createAudioEngineSpec(e);return{videoEngineSpec:e,videoSources:e.videoUrl?[CeltraPlayerUtils.createSourceObject(e.videoUrl,null)]:VideoEngineProvider.createVideoSourceObjects(e,this._opts.videoStream),audioEngineSpec:t,audioSources:t?AudioEngineProvider.createAudioSourceObjects(this._opts.videoStream):null}},initialize:function(e){this._createEngines(e),CeltraPlayerUtils.isNode(this._engineEl)&&!this._engineEl.parentNode&&this._engineContainerEl.appendChild(this._engineEl),e.videoEngineSpec.options.videoElement&&(this._wrapperEl.style.background="transparent"),CeltraPlayerUtils.attachHandlers(this,this._videoEngine,n),void 0!==e.videoEngineSpec.startMuted&&(e.videoEngineSpec.startMuted?this.mute():this.unMute()),"fit"===e.videoEngineSpec.options.fitting&&this._engineContainerEl.classList.add("video-player-engine-fit"),this._initialized=!0},play:function(e){null==this._videoEngine?Logger("VideoPlayer").log("Video not initialized!"):(this.isState(CeltraPlayerUtils.UNSTARTED,CeltraPlayerUtils.ENDED)&&this.changeState(CeltraPlayerUtils.BUFFERING),this._firstPlay&&!e&&this.unMute(),this._firstPlay=!1,this._videoEngine.play(),this.emit("userplayed"))},_createEngines:function(e){var t;null===this._videoEngine&&(this._engineType=e.videoEngineSpec.engineType,this._videoPresets=e.videoEngineSpec.presets,"JsVideoEngine"==e.videoEngineSpec.clazz?this._videoEngine=new JsVideoEngine(e.videoSources[0].url,this._engineType,e.videoEngineSpec):"Html5VideoEngine"==e.videoEngineSpec.clazz&&(this._videoEngine=Html5VideoEngine(e.videoSources,e.videoEngineSpec)),null!==e.audioEngineSpec&&(t=null,"WebAudioEngine"==e.audioEngineSpec.clazz?(t=WebAudioEngine(e.audioSources[0].url,e.audioEngineSpec.preload),Object.create(AVSyncWebAudio).init(this,t,e.videoEngineSpec.startMuted)):"Html5AudioEngine"==e.audioEngineSpec.clazz&&(t=Html5AudioEngine(e.audioSources,e.audioEngineSpec.preload),Object.create(AVSyncAudio).init(this,t,e.videoEngineSpec.startMuted))),this._engineEl=this._videoEngine.render(this._doc,{playsInline:this.playsInline()}))},silentPause:function(){this._videoEngine.pause()},pause:function(){this._videoEngine&&this._videoEngine.pause(),this.emit("userpaused"),this._playingEmitted=!1},close:function(){this.playsInline()?this.exitFullScreen():this.emit("close")},replay:function(){this.emit("replayed"),this.setCurrentTime(0),this._playingEmitted=!1,creative.runtimeParams.featureFlags.iOS17InlineVideoReplayFix&&deviceInfo.os.ios("17.4",null)?setTimeout(function(){this.play()}.bind(this),1):this.play()},reset:function(){this._videoEngine.pause(),this._videoEngine.reset(),this._posterShow(),this._controlsController&&this._controlsController.reset(),this._timeUpdateCounter=0,this._playingEmitted=!1},enterFullScreen:function(){if(this._videoEngine){if(this._containerElzIndex=this._containerEl.style.zIndex,this.dtCanFullscreen){var e=this._wrapperEl;(e.requestFullscreen||e.webkitRequestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen).bind(e)()}else{this.isFullScreen=!0;var t=this._wrapperEl;for(this.isState(CeltraPlayerUtils.PAUSED);t&&!t.getAttribute("class").includes("celtra-base-creative-unit");)t=t.parentNode;t.insertBefore(this._wrapperEl,t.firstChild),this._wrapperEl.style.zIndex=CeltraPlayerUtils.ZINDEX_MAX,this.redraw(),this.silentPauseActive=!0,defer(function(){this.silentPauseActive=!1}.bind(this),500),this._initialized&&this._videoEngine.pause()}this._initialized&&this._videoEngine.play(),this.emit("enterfullscreen")}},exitFullScreen:function(){var e;this.dtCanFullscreen?((e=document).exitFullscreen||e.webkitExitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen).bind(e)():(this.isFullScreen=!1,this.isState(CeltraPlayerUtils.PAUSED,CeltraPlayerUtils.ENDED),this._wrapperEl.style.zIndex="",this._containerEl.style.zIndex=this._containerElzIndex,this._containerEl.appendChild(this._wrapperEl),this.silentPauseActive=!0,defer(function(){this.silentPauseActive=!1}.bind(this),500),this.once("pause",CeltraPlayerUtils.validFor(function(){this.play(),this._muted||defer(this.unMute.bind(this),100)}.bind(this),500))),this.redraw(),this.emit("exitfullscreen")},hide:function(){this._wrapperEl&&(this._wrapperEl.style.display="none")},show:function(){this._wrapperEl&&(this._wrapperEl.style.display="")},destroy:function(){this._videoEngine&&(this._videoEngine.pause(),this._videoEngine.destroy(),this._controlsController&&this._controlsController.destroy());var e=function(){CeltraPlayerUtils&&this._wrapperEl&&CeltraPlayerUtils.removeElements(this._wrapperEl),this._toggleDesktopFSStateHandlers("remove"),this._wrapperEl=null}.bind(this);"undefined"!=typeof TouchEventSimulator?defer(e,100):e(),this.emit("destroy")},getDuration:function(){return this.duration},getCurrentTime:function(){return this._videoEngine?this._videoEngine.getCurrentTime():null},setCurrentTime:function(e){this._videoEngine&&this._videoEngine.setCurrentTime(e)},seekTo:function(e){this.emit("seekto",e),this._seeked||(this._stateBeforeSeek=this.getState(),this.getState()===CeltraPlayerUtils.PLAYING&&this.pause()),this._seeked=!0,this._videoEngine.seekToRatio(e)}}),t.prototype._hasToBeRepeated=function(){return this._repeated<this._opts.repeatTimes},t.prototype._doRepeat=function(){this._repeated+=1,this.setCurrentTime(this._opts.playFrom||0),creative.runtimeParams.featureFlags.iOS17InlineVideoReplayFix&&(deviceInfo.os.ios("17.4",null)||deviceInfo.browser.safari("17.4",null))?setTimeout(function(){this.play(),this.emit("repeat")}.bind(this),1):(this.play(),this.emit("repeat"))},t.prototype._doEnd=function(){this._opts.pauseOnEnd?this.pause():this._posterShow(),this._timeUpdateCounter=0,this.changeState(CeltraPlayerUtils.ENDED),this.emit("ended"),this._opts.closeFSOnEnd&&this.isFullScreen&&this.exitFullScreen()},t.prototype._onFullscreenChange=function(){this.isFullScreen?(this.exitFullScreen(),this.isFullScreen=!1):(this.isFullScreen=!0,this.redraw())},t.prototype._toggleDesktopFSStateHandlers=function(e){var t=e+"EventListener",e=["","webkit","moz","ms"].some(function(e){return void 0!==document["on"+e+"fullscreenchange"]&&(document[t]("ms"!==e?e+"fullscreenchange":"MSFullscreenChange",this._onFullscreenChange),!0)}.bind(this));return i[t]&&i[t]("resize",this.redraw),e&&!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)},t.prototype.playsInline=function(){return"permanent"!==this._opts.fullscreenMode},i.VideoPlayer=t}(window);;
!function(){function t(t,i){this.maxPlayingSegmentLength=t,this.callback=i,this.reset()}t.prototype.init=function(t){this._startPlayingPosition=t,this._lastPlayingPosition=t},t.prototype.addEvent=function(t){t>this._lastPlayingPosition&&(this._lastPlayingPosition=t),this._lastPlayingPosition-this._startPlayingPosition>=this.maxPlayingSegmentLength&&this.flush()},t.prototype.flush=function(t){var i,n;null!=this._startPlayingPosition&&(i=this._startPlayingPosition,n=this._lastPlayingPosition,(t||.4<n-i)&&i<n&&(this.callback({from:i,to:n}),this._startPlayingPosition=this._lastPlayingPosition))},t.prototype.reset=function(){this._startPlayingPosition=null,this._lastPlayingPosition=null},window.PlayedSegmentComputationUnit=t}();;
!function(){var o=[void 0,null,0,1];var i={videoStart:function(n,t,i){return t>Math.min(1,.25*i)},videoFirstQuartile:function(n,t,i){i*=.25;return n<i&&i<=t},videoMidpoint:function(n,t,i){i*=.5;return n<i&&i<=t},videoThirdQuartile:function(n,t,i){i*=.75;return n<i&&i<=t},videoComplete:function(n,t,i){return t>Math.max(.75*i,i-2)}};window.QuartileEventsEmitter=function(n){n.QUARTILE_EVENTS=i;var r={},u=(Object.keys(i).forEach(function(n){r[n]=i[n]}),null),t=function(){var n,t=null===u||null!==u&&this.currentTime>u?this.currentTime:u,i=(n=this).serverReportedDuration||(-1!==o.indexOf(n.duration)?null:n.duration);if(null!==i&&null!==u&&t&&t-u<1)for(var e in 0<u&&u<1&&(u=0),r)r[e](u,t,i)&&(this.emit(e,{name:e,label:this.componentName}),delete r[e]);u=t}.bind(n);return n.on("timeupdate",t),n.on("destroy",function(){n.off("timeupdate",t)}),n}}();;
!function(){function t(t,e){for(var i in this._video=t,this._lastObservedDuration=null,this._lastObservedPosition=null,this._intervalId=null,this._firstSegmentEmitted=!1,this._running=!1,this._currentTime=0,this._playedSegmentsCount=0,this.stop=this.stop.bind(this),this.stopAndReset=this.stopAndReset.bind(this),this.start=this.start.bind(this),this.tick=this.tick.bind(this),this.flush=this.flush.bind(this),this.reemitQuartileEvent=function(t){this.emit(t.name,t),this._playedSegmentComputationUnit.flush()}.bind(this),this.trackDurationChange=this.trackDurationChange.bind(this),this.stitchAndTrackVideoPlayedSegment=this.stitchAndTrackVideoPlayedSegment.bind(this),this._viewDirectionsObserver="function"==typeof ViewDirectionsObserver&&this._video instanceof VideoPlayer360?new ViewDirectionsObserver(t,this.getCurrentTime.bind(this)):null,this._playedSegmentComputationUnit=new PlayedSegmentComputationUnit(1,this.stitchAndTrackVideoPlayedSegment),this._lastVideoPlayedSegment={from:0,to:0},this._serverReportedDuration=t.serverReportedDuration,t.serverReportedDuration?(defer(function(){this.emit("videoDurationUpdate",{duration:t.serverReportedDuration})}.bind(this)),this.checkDuration=!1):(this.checkDuration=!0,t.on("durationchange",this.trackDurationChange)),t.on("pause",this.stop),t.on("timeupdate",this.start),t.on("ended",this.stopAndReset),t.on("repeat",this.stopAndReset),t.on("playing",this.start),t.on("seeked",this.start),s().on("mediaStopRequested",this.stop),t.on("muted",this.flush),t.on("unmuted",this.flush),t.on("enterfullscreen",this.flush),t.on("exitfullscreen",this.flush),t.QUARTILE_EVENTS)t.on(i,this.reemitQuartileEvent)}var n=[void 0,null,0,1],r=[100,300,6e3],s=(extend(t.prototype,EventEmitter),function(){return"undefined"!=typeof creative?creative.adapter:adapter});t.prototype.stitchAndTrackVideoPlayedSegment=function(t){t={from:this._lastVideoPlayedSegment.to,to:t.to};this.trackVideoPlayedSegment(t)},t.prototype.trackVideoPlayedSegment=function(t){var e;this._lastVideoPlayedSegment=t,this._serverReportedDuration&&t.from>=this._serverReportedDuration||(e=!this._serverReportedDuration||t.to<this._serverReportedDuration?t.to:this._serverReportedDuration,t=extend({},t,{to:e,name:"videoPlayedSegment",muted:!!this._video.muted,fullscreen:void 0===this._video.fullscreen||this._video.fullscreen,gaze:this._video.isUserGazing()}),this._viewDirectionsObserver&&(t.viewDirections=this._viewDirectionsObserver.getDirections()),this.emit("videoPlayedSegment",t),this._playedSegmentsCount+=1)},t.prototype.getCurrentTime=function(){return this._video&&this._video.currentTime>this._currentTime&&(this._currentTime=this._video.currentTime),this._currentTime},t.prototype.start=function(){this._running||(this._running=!0,this._viewDirectionsObserver&&this._viewDirectionsObserver.start(),s().mediaState.startVideo(),this._firstSegmentEmitted||(this._currentTime=this.getCurrentTime()+.01,this.trackVideoPlayedSegment({from:0,to:this.getCurrentTime()}),this._firstSegmentEmitted=!0),this._playedSegmentComputationUnit.init(this.getCurrentTime()),clearInterval(this._intervalId),this._intervalId=setInterval(this.tick,250))},t.prototype.stopAndReset=function(){this.stop(!0),this._playedSegmentComputationUnit&&(this._playedSegmentComputationUnit.reset(),this._currentTime=0,this._firstSegmentEmitted=!1,this._viewDirectionsObserver&&this._viewDirectionsObserver.reset())},t.prototype.flush=function(){this._playedSegmentComputationUnit&&this._playedSegmentComputationUnit.flush()},t.prototype.stop=function(t){(this._running||t)&&(this._running&&(s().mediaState.stopVideo(),this._running=!1,clearInterval(this._intervalId)),this._viewDirectionsObserver&&this._viewDirectionsObserver.stop(),this._playedSegmentComputationUnit.addEvent(this.getCurrentTime()),this._playedSegmentComputationUnit.flush(t))},t.prototype.trackDurationChange=function(){var t,e,i,s;this.checkDuration&&(t=this._video.duration,e=-1!==n.indexOf(t),i=-1!==r.indexOf(t),s=t!==this._lastObservedDuration,e||i||!s||(this._serverReportedDuration=t,this.emit("videoDurationUpdate",{duration:t}),this._lastObservedDuration=t))},t.prototype.tick=function(){this.trackDurationChange();var t=this.getCurrentTime(),e=Date.now()-(this._lastTickTime||Date.now());t==this._lastObservedPosition&&1e3<e&&this.stop(),this._playedSegmentComputationUnit.addEvent(t),this._lastObservedPosition=t,this._lastTickTime=Date.now()},t.prototype.destroy=function(){var t,e=this._video;for(t in this.stop(),e.off("pause",this.stop),e.off("ended",this.stopAndReset),e.off("playing",this.start),e.off("timeupdate",this.start),e.off("durationchange",this.tick),e.off("muted",this.flush),e.off("unmuted",this.flush),e.off("enterfullscreen",this.flush),e.off("exitfullscreen",this.flush),e.off("durationchange",this.trackDurationChange),e.QUARTILE_EVENTS)e.off(t,this.reemitQuartileEvent);s().off("mediaStopRequested",this.stop),this._playedSegmentComputationUnit.flush()},this.VideoEventsAdapter=t}();;
var CCalendar={saveTheDateAction:function(e,t,a){var n={start:t.start.value,end:t.end.value};t.eventName&&(n.eventName=t.eventName),t.location&&(n.location=t.location),t.reminder&&(n.reminder=t.reminder),t.notes&&(n.notes=t.notes),creative.adapter.sendToEventMonitor("dateSaved",t.triggerId,e.screen.name,n,null,e.initiatedBeforeScreenShown()),e.track({name:"dateSaved",label:t.reportLabel}),creative.adapter._stopAllMedia(),creative.adapter.saveCalendarEvent(t,a)},getEventICSUrl:function(a,e){var t,n={format:"ics"};return["eventName","location","start","end","timezone","reminder","notes"].forEach(function(e){var t;e in a&&("string"==typeof(t="object"==typeof(t=a[e])&&t.hasOwnProperty("value")?t.value:t)&&t.length&&(n[e]=t))}),n.start&&"eventName"in n?(n.end&&10===n.end.length&&(t=new Date(Date.parse(n.end)+864e5),n.end=t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)),urls.cachedApiUrl.replace(/^https:/,e)+"calendar?"+buildQuery(n)):null},getEventGoogleCalendarUrl:function(e){function t(e,t){var a;return a=(e=e)[t=t].value.replace(" ","T"),e.allDay&&(a=a.substr(0,10)+"T"+("start"===t?"00:00:00":"23:59:59"),e.timezone="user"),new Date(a+("user"===e.timezone?(t=a,t=new Date(t).getTimezoneOffset(),e=Math.abs(t),a=Math.floor(e/60),(0<t?"-":"+")+n(a)+":"+n(e-60*a)):"+00:00")).toISOString().replace(/[-:]|(?:\.[0-9]*)/g,"")}function n(e){return("0"+e).slice(-2)}var a="https://calendar.google.com/calendar/"+(desktop()?"render?":"gp#~calendar:view=e&")+"action=TEMPLATE",e={dates:t(e,"start")+"/"+t(e,"end"),location:e.location,text:e.eventName,details:e.notes};return a+"&"+buildQuery(e)},toString:function(){return"[Clazz CCalendar]"}};;
function StateObject(e){Object.defineProperties(this,{values:{enumerable:!1,configurable:!1,writable:!0,value:{}},_isDirty:{enumerable:!1,configurable:!1,writable:!0,value:!1}}),Object.keys(e).forEach(function(t){this.registerValue(t,e[t])},this)}extend(StateObject.prototype,EventEmitter),StateObject.prototype.registerValue=function(r,t){this.values[r]={dirty:!1,value:t},Object.defineProperty(this,r,{get:function(){return this.values[r].value},set:function(t){var e=this.values[r],i=e.value;t!=i&&(e.dirty=!0,e.value=t,this._isDirty=!0,this.emit("change:"+r,t,i))},enumerable:!0})},StateObject.prototype.markClean=function(e){var i=!1;Object.keys(this.values).forEach(function(t){e&&t!==e||(this[t].dirty=!1),i=i||this[t].dirty},this.values),this._isDirty=i},StateObject.prototype.getDirtyValues=function(){for(var t={},e=Object.keys(this.values),i=0;i<e.length;i++)this.values[e[i]].dirty&&(t[e[i]]=this.values[e[i]].value);return t},StateObject.prototype.isDirty=function(t){return void 0===t?this._isDirty:this.values[t].dirty},StateObject.prototype.anyDirty=function(t){1<arguments.length&&(t=Array.prototype.slice.apply(arguments));for(var e=0;e<t.length;e++)if(this.values[t[e]].dirty)return!0;return!1},StateObject.prototype.copy=function(){var t,e={};for(t in this.values)e[t]=this[t];return new StateObject(e)},StateObject.prototype.copyFrom=function(t){for(var e in t.values)this[e]=t[e]};;
function StateAnimation(t,i){this.stateObject=t,this.propertyName=i,this.running=!1,this.lastUpdateTime=null,this.tick=this.tick.bind(this),this._callback=null}function SpringyAnimation(t,i,e){StateAnimation.apply(this,arguments),this.options=extend({},SpringyAnimation.defaults,e||{}),this.state={x:t[i],v:0},this.derivative={dx:0,dv:0}}function EasingAnimation(t,i,e){StateAnimation.apply(this,arguments),this.options=extend({},EasingAnimation.defaults,e||{}),this._startValue=null,this._startTime=null,this._targetValue=null,this._targetTime=null}StateAnimation.prototype.start=function(){this.running||(this.lastUpdateTime=null,this.running=!0,Ticker.frame(this.tick,"update"))},StateAnimation.prototype.pause=function(){Ticker.removeFrame(this.tick,"update"),this.running=!1},StateAnimation.prototype.tick=function(){var t=Date.now();this.update(t-(this.lastUpdateTime||t)),this.lastUpdateTime=t},StateAnimation.prototype.update=function(t){throw new Error("Not implemented")},Object.defineProperty(StateAnimation.prototype,"value",{get:function(){return this.stateObject[this.propertyName]},set:function(t){this.stateObject[this.propertyName]=t},enumerable:!0}),inherit(SpringyAnimation,StateAnimation),SpringyAnimation.defaults={springForce:1e3,damping:20,restThreshold:1},SpringyAnimation.prototype.animateTo=function(t,i,e){this.running&&this.pause(),"function"==typeof i&&(e=i,i=0),this.d=t,this.state.v="number"==typeof i?i:0,this.state.x=this.value,this._callback=e,this.start()},SpringyAnimation.prototype.update=function(t){t=Math.min(.03,t/1e3);Math.abs(this.state.x-this.d)<this.options.restThreshold&&Math.abs(this.state.v)<this.options.restThreshold?(this.pause(),this.value=this.d,this.d=null,defer(this._callback||noop),this._callback=null):(this._integrate(this.state,t),this.value=this.state.x)},SpringyAnimation.prototype._integrate=function(t,i){var e=this._getDerivative(this.state),a=this._getDerivative(this.state,.5*i,e),n=this._getDerivative(this.state,.5*i,a),s=this._getDerivative(this.state,i,n);t.x+=i/6*(e.dx+2*(a.dx+n.dx)+s.dx),t.v+=i/6*(e.dv+2*(a.dv+n.dv)+s.dv)},SpringyAnimation.prototype._getDerivative=function(t,i,e){return void 0===e?{dx:t.v,dv:this._acceleration(t)}:{dx:(t={x:t.x+e.dx*i,v:t.v+e.dv*i}).v,dv:this._acceleration(t,i)}},SpringyAnimation.prototype._acceleration=function(t){return-this.options.springForce*(t.x-this.d)-this.options.damping*t.v},inherit(EasingAnimation,StateAnimation),EasingAnimation.defaults={exp:1.8},EasingAnimation.presets={easeIn:.6,easeOut:1.8,linear:1},EasingAnimation.prototype.animateTo=function(t,i,e){this.running&&this.pause(),this._callback=e,this._startValue=this.value,this._startTime=Date.now(),this._targetValue=t,this._targetTime=i,this.start()},EasingAnimation.prototype.update=function(t){var i=Date.now()-this._startTime,e=this._targetValue-this._startValue;i>=this._targetTime?(this.pause(),this.value=this._targetValue,defer(this._callback||noop),this._startValue=null,this._startTime=null,this._targetValue=null,this._targetTime=null,this._callback=null):this.value=Math.pow(i/this._targetTime,this.options.exp)*e+this._startValue};;
function ViewportManager(t){this.container=t.container,this.width=this.originalWidth=t.width||0,this.height=this.originalHeight=t.height||0,this.iframe=this.container.ownerDocument.defaultView.frameElement,this.init()}extend(ViewportManager.prototype,EventEmitter),ViewportManager.prototype.init=function(){this.container.style.overflow="hidden",this.container.style.position="absolute",this.container.style.left=this.container.style.top=0,this.iframe.style.display="block",this.update()},ViewportManager.prototype.update=function(){this.container.style.width=this.width+"px",this.container.style.height=this.height+"px",this.iframe.style.width=this.width+"px",this.iframe.style.height=this.height+"px",this.iframe.width=this.width,this.iframe.height=this.height},ViewportManager.prototype.setSize=function(t,i){this.width=t,this.height=i,this.update()};;
function Placement(t){this.root=null,this.width={value:100,unit:"%"},this.height={value:100,unit:"%"},this.left={value:0,unit:"px"},this.top={value:0,unit:"px"},this.borders={left:0,right:0,top:0,bottom:0},this._positioning=t||"container",this.origin={horizontal:"left",vertical:"top"},this._usesFixedPositioning=!1,this._minWidth={value:0,unit:"px"},this._minHeight={value:0,unit:"px"},this.touchEventSimulator=null,this.overflow=!1,this._visible=!1,this.isSticky=!1,this.bypassSizing=!1,this.bypassPositioning=!1}extend(Placement.prototype,EventEmitter),Placement.ZINDEX_MAX=2147483647,Placement.prototype.getRootWindow=function(){return this.root.ownerDocument.defaultView},Placement.prototype.attachTo=function(t,e){throw new Error("Placement.attachTo not implemented")},Placement.prototype.getContainer=function(){throw new Error("Placement.getContainer not implemented")},Placement.prototype.getContentWindow=function(){return this.getContainer().ownerDocument.defaultView},Object.defineProperty(Placement.prototype,"creative",{get:function(){return this.getContainer().ownerDocument.defaultView.creative}}),Object.defineProperty(Placement.prototype,"positioning",{get:function(){return this._positioning},set:function(t){this._positioning=t,this.update()}}),Object.defineProperty(Placement.prototype,"visible",{get:function(){return this._visible}}),Object.defineProperty(Placement.prototype,"_canUseFixedPositioning",{get:function(){return this.usesFixedPositioning&&this.supportsFixedPositioning},enumerable:!1}),Placement.prototype.setMinimumSize=function(t,e){t=this._parseLength(t),e=this._parseLength(e);this._minWidth.value=t.value,this._minWidth.unit=t.unit,this._minHeight.value=e.value,this._minHeight.unit=e.unit,this._visible&&this.update()},Placement.prototype.setSize=function(t,e,o){var i,t=this._parseLength(t),e=this._parseLength(e),s=this.getViewportGeometry(),n=extend({},this._minWidth),r=extend({},this._minHeight);o||(this.width={value:t.value,unit:t.unit},this.height={value:e.value,unit:e.unit}),this._visible&&(o="screen"==this.positioning?(i=s.width,s.height):("page"==this.positioning?(i=this.root.ownerDocument.documentElement.offsetWidth,this.root.ownerDocument.documentElement):(i=this.root.parentNode.offsetWidth,this.root.parentNode)).offsetHeight,"%"==t.unit&&(t.value=Math.round(t.value*i/100),t.unit="px"),"%"==e.unit&&(e.value=Math.round(e.value*o/100),e.unit="px"),"%"==n.unit&&(n.value=Math.round(n.value*i/100),n.unit="px"),"%"==r.unit&&(r.value=Math.round(r.value*o/100),r.unit="px"),this.bypassSizing||(this.root.style.width=Math.max(t.value,n.value)+t.unit,this.root.style.height=Math.max(e.value,r.value)+e.unit),this.emit("resized"))},Placement.prototype.getBaseOffset=function(){var t=this.root.ownerDocument.createElement("div"),e=this.root.parentNode,o=(t.style.left=0,t.style.top=0,t.style.position="absolute",t.style.setProperty("display","block","important"),e.appendChild(t),offset(t));return e.removeChild(t),o},Placement.prototype.applyCustomPubClasses=function(){var t=this._getPubClasses();this._usePubClasses=0<t.length,this._usePubClasses&&(this._disableSelfStyling(),this.addClasses.apply(this,t.concat(["celtra-placement"])))},Placement.prototype.usePubClasses=function(){return this._usePubClasses},Placement.prototype._disableSelfStyling=function(){this.bypassPositioning=!("StickyPlacement"===this.constructor.name||this.isSticky),this.bypassSizing=!0,this._clearCSS(),this.bypassPositioning&&(this.root.style.position="relative")},Placement.prototype._getPubClasses=function(){var t=this.creative&&this.creative.customAttributes,e=[];return e=t&&t.hasOwnProperty("cssCustomClass")&&"string"==typeof t.cssCustomClass?t.cssCustomClass.split(","):e},Placement.prototype._clearCSS=function(){this.root.style=""},Placement.prototype.addClasses=function(t){(t=Array.prototype.slice.apply(arguments).filter(function(t){return!!t})).forEach(function(e){try{addClass(this.root,e)}catch(t){console.warn('Class "'+e+'" not added: '+t.message)}}.bind(this))},Placement.prototype.setBorders=function(t,e,o,i){this.root.style.borderLeft=t+"px solid transparent",this.root.style.borderRight=e+"px solid transparent",this.root.style.borderTop=o+"px solid transparent",this.root.style.borderBottom=i+"px solid transparent",this.borders={left:t,right:e,top:o,bottom:i}},Placement.prototype.setPosition=function(t,e,o,i){var s,n=this._parseLength(t),r=this._parseLength(e),h=this.getViewportGeometry(),l=this.getBaseOffset();if(o||(this.left.value=n.value,this.left.unit=n.unit,this.top.value=r.value,this.top.unit=r.unit),this._visible&&!this.bypassPositioning){switch(this.positioning){case"screen":this._canUseFixedPositioning?(this.root.style.position="fixed","left"==this.origin.horizontal?(this.root.style.left=n.value+n.unit,this.root.style.right="auto",this.root.style.marginLeft=""):"center"==this.origin.horizontal?(this.root.style.left=n.value+n.unit,this.root.style.right="auto",this.root.style.marginLeft=i?"":(h.width-this.root.offsetWidth)/2+"px"):(this.root.style.right=n.value+n.unit,this.root.style.left="auto",this.root.style.marginLeft=""),"top"==this.origin.vertical?(this.root.style.top=r.value+r.unit,this.root.style.bottom="auto",this.root.style.marginTop=""):"center"==this.origin.vertical?(this.root.style.top=r.value+r.unit,this.root.style.bottom="auto",this.root.style.marginTop=(h.height-this.root.offsetHeight)/2+"px"):(this.root.style.bottom=r.value+r.unit,this.root.style.top="auto",this.root.style.marginTop="")):(s=u="","%"==n.unit&&(n.value*=h.width/100,n.unit="px"),"%"==r.unit&&(r.value*=h.height/100,r.unit="px"),"left"==this.origin.horizontal?n.value+=h.left:"center"==this.origin.horizontal?(n.value+=h.left,u=(h.width-this.root.offsetWidth)/2+"px"):(a="%"==this.width.unit?this.width.value/100*h.width:this.width.value+this.borders.left+this.borders.right,n.value=h.left+h.width-a-n.value),"top"==this.origin.vertical?r.value+=h.top:"center"==this.origin.vertical?(r.value+=h.top,s=(h.height-this.root.offsetHeight)/2+"px"):(a="%"==this.height.unit?this.height.value/100*h.height:this.height.value+this.borders.top+this.borders.bottom,r.value=h.top+h.height-a-r.value),this.root.style.position="absolute",this.root.style.left=n.value-l.left+"px",this.root.style.top=r.value-l.top+"px",this.root.style.marginLeft=u,this.root.style.marginTop=s,this.root.style.right=this.root.style.bottom="auto");break;case"container":this.root.style.position="absolute","left"==this.origin.horizontal?(this.root.style.left=n.value+n.unit,this.root.style.right="auto",this.root.style.marginLeft=""):"center"==this.origin.horizontal?(this.root.style.left=n.value+n.unit,this.root.style.right="auto","px"==this.height.unit?this.root.style.marginLeft=-Math.round(this.width.value/2)+"px":this.root.style.marginLeft=-this.root.offsetWidth/2+"px"):(this.root.style.left="auto",this.root.style.right=n.value+n.unit,this.root.style.marginLeft=""),"top"==this.origin.vertical?(this.root.style.top=r.value+r.unit,this.root.style.bottom="auto",this.root.style.marginTop=""):"center"==this.origin.vertical?(this.root.style.top=r.value+r.unit,this.root.style.bottom="auto","px"==this.height.unit?this.root.style.marginTop=-Math.round(this.height.value/2)+"px":this.root.style.marginTop=-this.root.offsetHeight/2+"px"):(this.root.style.top="auto",this.root.style.bottom=r.value+r.unit,this.root.style.marginTop="");break;case"page":var a=this.root.ownerDocument.documentElement.clientWidth,u=this.root.ownerDocument.documentElement.clientHeight;"%"==n.unit&&(n.value=Math.round(n.value*a/100),n.unit="px"),"%"==r.unit&&(r.value=Math.round(r.value*u/100),r.unit="px"),this.root.style.position="absolute","left"==this.origin.horizontal?(this.root.style.left=n.value-l.left+"px",this.root.style.top=r.value-l.top+"px"):"center"==this.origin.horizontal?(this.root.style.left=(a-this.root.offsetWidth)/2-l.left+n.value+"px",this.root.style.top=(u-this.root.offsetHeight)/2-l.top+r.value+"px"):(this.root.style.left=a-this.root.offsetWidth-l.left-n.value+"px",this.root.style.top=u-this.root.offsetHeight-l.top-r.value+"px"),this.root.style.right=this.root.style.bottom="auto";break;case"static":this.root.style.position="static",this.root.style.left=this.root.style.top=0,this.root.style.right=this.root.style.bottom="auto",this.root.style.marginLeft=this.root.style.marginTop=""}this.emit("repositioned")}},Placement.prototype.update=function(t){this.setSize(this.width.value+this.width.unit,this.height.value+this.height.unit,!0),this.setPosition(this.left.value+this.left.unit,this.top.value+this.top.unit,!0),defer(t||noop,void 0,void 0,useAsap())},Placement.prototype.supportsFixedPositioning=!0,Object.defineProperty(Placement.prototype,"usesFixedPositioning",{get:function(){return this._usesFixedPositioning},set:function(t){this._usesFixedPositioning=!!t,this.update()},enumerable:!0}),Placement.prototype.hide=function(){this.root.style.display="none",this._visible=!1,this.emit("hidden")},Placement.prototype.show=function(){this.root.style.display="block",this._visible=!0,this.update(),this.emit("shown")},Placement.prototype.destroy=function(){this.emit("destroyed"),this.root&&this.root.parentNode&&this.root.parentNode.removeChild(this.root),this.root=null},Placement.prototype.setZIndex=function(t){"max"==(t=t<0?Placement.ZINDEX_MAX+t:t)&&(t=Placement.ZINDEX_MAX),this.root.style.zIndex=t},Placement.prototype.createElement=function(t){throw new Error("Not implemented")},Placement.prototype.querySelector=function(t){throw new Error("Not implemented")},Placement.prototype.hidePlacementFromScreenReader=function(){},Placement.prototype.getViewportGeometry=function(t){return getViewportGeometry(this.getRootWindow(),t)},Placement.prototype.getPlacementGeometry=function(){var t,e;return"screen"==this.positioning&&this._canUseFixedPositioning?{width:this.root.offsetWidth,height:this.root.offsetHeight,left:this.root.offsetLeft,top:this.root.offsetTop}:(t=offset(this.root),e=this.getViewportGeometry(),{width:this.root.offsetWidth,height:this.root.offsetHeight,left:t.left-e.left,top:t.top-e.top})},Placement.prototype.getGlobalGeometry=function(t){for(var e=this.getRootWindow(),o=this.root.getBoundingClientRect(),i=CRect.adopt(o);e!==t&&e!==e.parent;)o=CRect.adopt(e.frameElement.getBoundingClientRect()),i.left+=o.left,i.top+=o.top,i=i.intersect(o),e=e.parent;return i},Placement.prototype._parseLength=function(t){if(!isNaN(t))return{value:t,unit:"px"};var e=t.match(/^(-?[\d.]+)(px|%)$/);if(e)return{value:parseFloat(e[1],10),unit:e[2]};throw new Error('Cannot parse length "'+t+'"')},Placement.prototype.getUnitGeometry=function(t,e){var e=e?getElementRectRelativeToTopViewport(this.root):this.getPlacementGeometry(),o={left:e.left,top:e.top,width:t.size.width,height:t.size.height},i=t.horizontalPosition||"center",s=t.verticalPosition||"center";return"center"==i?o.left+=(e.width-t.size.width)/2:"right"==i&&(o.left+=e.width-t.size.width),"center"==s?o.top+=(e.height-t.size.height)/2:"bottom"==s&&(o.top+=e.height-t.size.height),o.left=Math.round(o.left),o.top=Math.round(o.top),o},Placement.prototype.getRelativeUnitGeometry=function(t){var e=offset(t.node);return e.width=t.node.offsetWidth,e.height=t.node.offsetHeight,e},Placement.prototype.populate=function(t,e){this.getContainer().appendChild(t),this.emit("populated"),e&&defer(e,void 0,void 0,useAsap())},Placement.prototype._getViewportElement=function(){throw new Error("Not implemented")},Placement.prototype.setBackground=function(t){this.root.style.background=t=null==t?"none":t},Placement.prototype.setOverflow=function(){function o(t){t.preventDefault()}return function(t){var e=this._getViewportElement();t?(e.style.overflowY="auto",ios()&&(e.style.webkitOverflowScrolling="touch",detach(e,"touchmove",o,!1))):(e.style.overflowY="hidden",ios()&&(e.style.webkitOverflowScrolling="auto",attach(e,"touchmove",o,!1)))}}(),Placement.prototype._flash=function(){var t=this.getContainer().ownerDocument,e=this.createElement("div");e.style.cssText="position:absolute;top:0;left:0;width:100%;height:100%;opacity:0.01;background:black;",t.body.appendChild(e),defer(function(){e.parentNode.removeChild(e)})};;
function IframePlacement(t,e,n,r){Placement.apply(this,arguments),this.frame=null,this.vm=null,this.unitScript=e,this.windowVarsByRef=n,this.windowVarsByCopy=r,this._syncInterval=null,this._syncIframeSize=this._syncIframeSize.bind(this)}inherit(IframePlacement,Placement),IframePlacement.create=function(t,e,n,r){e=new IframePlacement(e,"",n,r);return e.root=t.parentNode,e.root.style.display="none",e.startSyncingIframeSize(),e.frame=t,e.setupFrame(),addClass(e.root,"notranslate"),e},IframePlacement.baseHTML='<!DOCTYPE html><html><head><meta charset="utf-8"/><meta name="viewport" content="initial-scale=1,maximum-scale=1"/></head><body><div id="viewport"></div></body></html>',IframePlacement.prototype.setSize=function(){IframePlacement.uber.setSize.apply(this,arguments),this._syncIframeSize()},IframePlacement.prototype.show=function(){IframePlacement.uber.show.apply(this,arguments),this._syncIframeSize()},IframePlacement.prototype._syncIframeSize=function(){this._visible&&this.vm&&(this.root.offsetWidth!=this.vm.width||this.root.offsetHeight!=this.vm.height)&&this.vm.setSize(0|this.root.offsetWidth,0|this.root.offsetHeight)},IframePlacement.prototype.startSyncingIframeSize=function(){this._syncInterval=this._setInterval(this._syncIframeSize,100)},IframePlacement.prototype.stopSyncingIframeSize=function(){this._syncInterval&&this._clearInterval(this._syncInterval),this._syncInterval=null},IframePlacement.prototype.getContainer=function(){if(this.root)return this.querySelector("#viewport");throw new Error("Root node not attached to document yet!")},IframePlacement.prototype._setInterval=function(t,e){return this.windowVarsByRef.adapter.getTopWindow().setInterval(t,e)},IframePlacement.prototype._clearInterval=function(t,e){return this.windowVarsByRef.adapter.getTopWindow().clearInterval(t,e)},IframePlacement.prototype.attachTo=function(t,r){this.root=t.ownerDocument.createElement("div"),this.root.style.overflow="hidden",addClass(this.root,"notranslate"),this.hide(),t.appendChild(this.root),this.startSyncingIframeSize(),this.frame=t.ownerDocument.createElement("iframe"),this.frame.style.border="0px",this.frame.setAttribute("frameborder","0"),this.frame.setAttribute("scrolling","no"),this.frame.setAttribute("allowFullScreen",""),this.root.appendChild(this.frame),defer(function(){if(!this.frame.contentWindow)throw new Error("Can't access contentWindow of an iframe, skip placement initialization.");for(var t in this.frame.contentDocument.open(),this.windowVarsByRef)this.frame.contentWindow[t]=this.windowVarsByRef[t];var e="";for(t in this.windowVarsByCopy)e+="window."+t+" = "+JSON.stringify(this.windowVarsByCopy[t])+";\n";this.frame.contentDocument.write(IframePlacement.baseHTML);var n=this.frame.contentDocument.createElement("script");n.textContent=e+";\n"+this.unitScript,this.frame.contentDocument.body.appendChild(n),attach(this.frame,"load",function(){this.setupFrame(),r&&defer(r,void 0,void 0,useAsap())}.bind(this)),this.frame.contentDocument.close()}.bind(this),void 0,void 0,useAsap())},IframePlacement.prototype.destroy=function(){this.stopSyncingIframeSize(),IframePlacement.uber.destroy.apply(this,arguments)},IframePlacement.prototype.createElement=function(t){return this.frame.contentDocument.createElement(t)},IframePlacement.prototype.querySelector=function(t){return this.frame.contentDocument?this.frame.contentDocument.querySelector(t):null},IframePlacement.prototype.querySelectorAll=function(t){return this.frame.contentDocument?this.frame.contentDocument.querySelectorAll(t):[]},IframePlacement.prototype._getViewportElement=function(){return this.querySelector("#viewport")},IframePlacement.prototype.hidePlacementFromScreenReader=function(){this.frame.tabIndex=-1,this.frame.setAttribute("aria-hidden","true")},IframePlacement.prototype.setupFrame=function(){var t=this.frame.contentDocument.createElement("script");t.textContent="window.touchEventSimulator = new TouchEventSimulator(document);window.touchEventSimulator.init();function __parseJSON(s){return JSON.parse(s);}",this.frame.contentDocument.querySelector("head").appendChild(t),this.touchEventSimulator=this.frame.contentWindow.touchEventSimulator,this.vm=new ViewportManager({container:this._getViewportElement()})};;
function DivPlacement(t){Placement.apply(this,arguments)}inherit(DivPlacement,Placement),DivPlacement.prototype.attachTo=function(t,e){this.root=t.ownerDocument.createElement("div"),this.root.style.overflow="hidden",addClass(this.root,"notranslate"),this.hide(),t.appendChild(this.root),this.touchEventSimulator=new TouchEventSimulator(this.root),this.touchEventSimulator.init(),e&&defer(e,0,"DivPlacement.attachTo defer callback",useAsap())},DivPlacement.prototype.destroy=function(){DivPlacement.uber.destroy.apply(this,arguments),this.touchEventSimulator.stop(),this.touchEventSimulator=null},DivPlacement.prototype.getContainer=function(){return this.root},DivPlacement.prototype.createElement=function(t){return this.root.ownerDocument.createElement(t)},DivPlacement.prototype.querySelector=function(t){return this.root.querySelector(t)},DivPlacement.prototype.querySelectorAll=function(t){return this.root.querySelectorAll(t)},DivPlacement.prototype._getViewportElement=function(){return this.root};;
function StickyPlacement(t,i,e,s,o){IframePlacement.apply(this,arguments),this.stickyOptions=o,this._handleDismissTouchEnd=this._handleDismissTouchEnd.bind(this),this.origin.horizontal="center",this.origin.vertical=this.stickyOptions.stickiness,this.usesFixedPositioning=!0,this._originalDocumentPadding=null}inherit(StickyPlacement,IframePlacement),StickyPlacement.create=function(t,i,e,s,o){i=new StickyPlacement(i,"",e,s,o);return i.root=t.parentNode,i.root.style.display="none",i.startSyncingIframeSize(),i.frame=t,i.setupFrame(),addClass(i.root,"notranslate"),i},StickyPlacement.prototype.setPosition=StickyPlacement.prototype.setZIndex=noop,StickyPlacement.prototype.show=function(){IframePlacement.prototype.show.apply(this,arguments),IframePlacement.prototype.setZIndex.call(this,-20),this.enableDocumentPadding(),this.update()},StickyPlacement.prototype.hide=function(){IframePlacement.prototype.hide.apply(this,arguments),this.disableDocumentPadding()},StickyPlacement.prototype.attachTo=function(){StickyPlacement.uber.attachTo.apply(this,arguments),addClass(this.root,"celtra-placement-sticky")},StickyPlacement.prototype.populate=function(t,i){this.stickyOptions.showDismissButton&&this.once("populated",this.createDismissButton.bind(this)),IframePlacement.prototype.populate.apply(this,arguments)},StickyPlacement.prototype.update=function(t,i){this.root&&this.root.parentNode&&(IframePlacement.prototype.setSize.call(this,this.width.value+this.width.unit,this.height.value+this.height.unit,!0),IframePlacement.prototype.setPosition.call(this,0,0,!0,i),defer(t))},StickyPlacement.prototype.createDismissButton=function(){var viewport=this.getViewportGeometry();with(this.root.style.overflow="visible",this._dismissButton=this.root.ownerDocument.createElement("img"),this._dismissButton.src=this.stickyOptions.baseUrl+"runner/clazzes/CreativeUnit/close-up.svg",this._dismissButton.style)switch(position="absolute",left="auto",right="6px",width="32px",height="32px",zIndex=10,this.stickyOptions.stickiness){case"top":top="auto",bottom="-16px";break;case"bottom":top="-16px",bottom="auto"}deviceInfo.deviceType.mobileDevice()?attach(this._dismissButton,"touchend",this._handleDismissTouchEnd,!1):attach(this._dismissButton,"click",this._handleDismissTouchEnd,!1),this.root.appendChild(this._dismissButton)},StickyPlacement.prototype._handleDismissTouchEnd=function(t){t.preventDefault(),t.stopPropagation(),this.disableDocumentPadding(),(this.stickyOptions.dismissCallback||noop)()},StickyPlacement.prototype.enableDocumentPadding=function(){var t=this.getRootWindow(),i=t.document.documentElement;this._originalDocumentPadding||(this._originalDocumentPadding=t.getComputedStyle(i)["padding-"+this.stickyOptions.stickiness]),i.style["padding-"+this.stickyOptions.stickiness]=this.root.offsetHeight+"px"},StickyPlacement.prototype.disableDocumentPadding=function(){this.getRootWindow().document.documentElement.style["padding-"+this.stickyOptions.stickiness]=this._originalDocumentPadding,this._originalDocumentPadding=null},StickyPlacement.prototype.hideStickyCloseButton=function(){this._dismissButton.style.display="none"},StickyPlacement.prototype.showStickyCloseButton=function(){this._dismissButton.style.display="block"};;
function Format(e,t){this.adapter=e,this.state=null,this.units=t,this.observesViewability=!0,this.observingViewability=function(e){return this.observesViewability&&this.adapter.viewabilityMeasurable["viewable"+e]}.bind(this),this._observesViewableTime=!1,this.observingViewableTime=this.observingViewableTime.bind(this),this.observationAbilities={observingViewability:this.observingViewability,observingViewableTime:this.observingViewableTime},this._allowNonNativeRAFForViewableTime="1"==this.adapter.runtimeParams._allowNonNativeRAFForViewableTime,"Accessibility"in window&&(this._accessibility=new Accessibility),this.adapter.nesting&&this.adapter.nesting.hostileIframe&&this.needsAccessToHostPage()&&this.adapter.trackingCenter.track({name:"userError",userErrorId:"nonFriendlyIFrame"})}extend(Format.prototype,EventEmitter),Object.defineProperty(Format.prototype,"placements",{get:function(){return this.adapter.placements},enumerable:!0}),Format.prototype.observingViewableTime=function(){var e=this.adapter;return this._observesViewableTime&&!!this.observingViewability("00")&&e.raf&&e.raf.environment&&(e.raf.isNative||this._allowNonNativeRAFForViewableTime)&&(e.supportsContainerViewability||e.canMeasureViewportPlacementGeometry)},Format.prototype.transitionTo=function(e,t,i){throw new Error("transitionTo not implemented")},Format.prototype.destroy=function(){for(var e in this.placements)this.adapter.destroyPlacement(e),delete this.placements[e];this.adapter._stopObservingEnvironment(),this.adViewableTimeObserver&&this.adViewableTimeObserver.stop()},Format.prototype.hacks={},Format.prototype._attachInViewToOrderedPlacements=function(e,t,i){var r=i||t;e._outerPlacement=r,this.adapter.canMeasureViewportPlacementGeometry&&(r.inView||(r.inView=new PlacementInView(this.adapter,r)),i&&!t.inView&&(t.inView=new PlacementInView(this.adapter,t,i.inView)),e.inView||(e.inView=new InViewObject(e,t.inView)))},Format.prototype.connectPlacementEventsToUnitBehavior=function(t,i){this.adapter.on("orientationchange",function(){t.update(noop,this.adapter.adBehavior.crossScreenSticky)}.bind(this)),t.on("resized",function(){var e;!t._visible||(e=t.getPlacementGeometry()).width<2&&e.height<2||i.setAvailableSize(e.width,e.height)}.bind(this)),t.on("shown",function(){var e=t.getPlacementGeometry();i.setAvailableSize(e.width,e.height),i.enterRenderTree()}),t.on("hidden",function(){i.exitRenderTree()})},Format.prototype._trackViewportPlacementGeometry=function(e){var t=this.adapter.getTopWindow(),e=e.getGlobalGeometry(t),t=getViewportGeometry(t,"win"),e=CRect.adopt(e),t=(e.left+=t.left,e.top+=t.top,{name:"viewportPlacementGeometry",pageDimensions:this.adapter.getPageDimensions(),viewportPositionRect:t,firstPlacementPositionRect:e});this.adapter.trackingCenter.trackNoLaterThan(t)},Format.prototype.setupViewableTimeObserver=function(){var e,t;this._observesViewableTime="0"!==this.adapter.runtimeParams._trackViewableTime,this.observingViewableTime()&&(e=this.adapter,t=new AdViewableTimeTracker(e.trackingCenter,e.raf.environment,e.getTopWindow()),e.canMeasureViewportPlacementGeometry?this.adViewableTimeObserver=new AdViewableInViewObjectObserver(t):this.adViewableTimeObserver=new AdViewableUnitObserver(t),this.adViewableTimeObserver.registerAdapter(e))},Format.IGNORABLES=["INPUT","TEXTAREA","SELECT"],Format.isElementIgnorable=function(e){return-1<Format.IGNORABLES.indexOf(e.tagName)},Format.prototype.needsAccessToHostPage=function(){return!1},Format.prototype._goToUnit=function(e,t){var i,r=null;for(i in this.units)if(r=this.units[i].localId==e?this.units[i]:r)break;t(r)};;
function UnitViewabilityObserver(e,t,i,r){this.adapter=e,this.win=e.getTopWindow(),this.placement=t,this.element=i,this._listeners=[],this._active=!1,this._currentViewability=null,this._inTimer={},this._ratio=0,this._samplingRect=new CRect,this._lastSamplingTimestamp=0,this._minSamplingTimeDelta=200,this._calc=this._calc.bind(this),this._useIntersectionObserver=!!r,this._asyncComputed={ratio:0,boundingClientRect:{bottom:0,height:0,left:0,right:0,top:0,width:0}}}UnitViewabilityObserver.samplingCount=100,UnitViewabilityObserver.minimumOpacity=.95,UnitViewabilityObserver.prototype._getUnitVisibleGeometry=function(){return this._useIntersectionObserver?this._getIntersectionObserverGeometry():this._getOldObserverGeometry()},UnitViewabilityObserver.prototype._getOldObserverGeometry=function(){var e=this.adapter.getPlacementRect(this.placement),t=this.adapter.getViewportRect(),i=CRect.adopt(this.placement.getContainer().getBoundingClientRect()),r=CRect.adopt(this.element.getBoundingClientRect()),n=r.intersect(i),r=r.map(i,e),n=n?n.map(i,e).intersect(t):null;return{globalUnitRect:r,intersect:n,ratio:n&&0<r.area?n.area/r.area:0}},UnitViewabilityObserver.prototype._getIntersectionObserverGeometry=function(){var e,t,i,r=0;return 0<this._asyncComputed.ratio&&(e=this.adapter.getPlacementRect(this.placement),t=CRect.adopt(this.placement.getContainer().getBoundingClientRect()),i=this._asyncComputed.rect,r=new CRect(i.x,i.y,i.width,i.height).map(t,e)),{globalUnitRect:this._asyncComputed.boundingClientRect,intersect:r,ratio:this._asyncComputed.ratio}},UnitViewabilityObserver.prototype._handleIntersect=function(e,t){e.forEach(function(e){this._asyncComputed={ratio:e.intersectionRatio,rect:e.intersectionRect,boundingClientRect:e.boundingClientRect}}.bind(this))},UnitViewabilityObserver.prototype._intersectionObserverSetUp=function(){var e=this.element,t={threshold:function(e){for(var t=[],i=0;i<=e;i++)t.push(i/e);return t}(50)};this._useIntersectionObserver=new IntersectionObserver(this._handleIntersect.bind(this),t),this._useIntersectionObserver.observe(e)},UnitViewabilityObserver.prototype.computeUnitInteractableRatio=function(e){var t;return this.element.parentNode&&this.placement.root.parentNode&&this.adapter.containerIsViewable&&this.element.ownerDocument.defaultView?((t=this._getUnitVisibleGeometry()).intersect,t=t.ratio,this._ratio=t,this._ratio):0},UnitViewabilityObserver.prototype.addListener=function(e){this._listeners.push(e),this._start()},UnitViewabilityObserver.prototype.removeListener=function(t){this._listeners=this._listeners.filter(function(e){return e!==t}),0===this._listeners.length&&this.stop()},UnitViewabilityObserver.prototype._calc=function(e){var t;this._active&&(t=this._getUnitVisibleGeometry().globalUnitRect,this._currentViewability=this.computeUnitInteractableRatio(e),this._listeners.forEach(function(e){this._currentViewability!==e.previousViewability&&(e.previousViewability=this._currentViewability,e(this._currentViewability,t))},this))},UnitViewabilityObserver.prototype._start=function(){this._active||(this._active=!0,this._useIntersectionObserver&&this._intersectionObserverSetUp(),this.adapter.on("containerViewableChange",this._calc),Ticker.frame(this._calc,"update"))},UnitViewabilityObserver.prototype.stop=function(){if(this._active){for(var e in this._active=!1,this.adapter.off("containerViewableChange",this._calc),Ticker.removeFrame(this._calc,"update"),this._inTimer)this.win.clearTimeout(this._inTimer[e]);this._inTimer={},this._useIntersectionObserver&&this._useIntersectionObserver.unobserve(this.element)}},UnitViewabilityObserver.prototype.waitForViewable=function(r,n){var s=function(e,t){var i=UnitViewabilityObserver.selectCriterion(r,t);(0==i.ratio?0<e:e>=i.ratio)?(t=function(){this.removeListener(s),n(i)}.bind(this),"Core"==r?t():this._inTimer[r]||(this._inTimer[r]=this.win.setTimeout(t,i.time))):this._inTimer[r]&&(this.win.clearTimeout(this._inTimer[r]),this._inTimer[r]=null)}.bind(this);return this.addListener(s),s},UnitViewabilityObserver.prototype.waitForViewableCore=function(e){return this.waitForViewable("Core",e)},UnitViewabilityObserver.prototype.waitForViewableIAB=function(e){return this.waitForViewable("IAB",e)},UnitViewabilityObserver.prototype.waitForVideoViewableIAB=function(e){return this.waitForViewable("IABvideo",e)},UnitViewabilityObserver.prototype.waitForVideoViewableFB=function(e){return this.waitForViewable("FBvideo",e)},UnitViewabilityObserver.LARGE_AD_PIXEL_COUNT=242500,UnitViewabilityObserver.selectCriterion=function(e,t){switch(e){case"IAB":return t&&t.width*t.height>UnitViewabilityObserver.LARGE_AD_PIXEL_COUNT?this.criteria.IABlargeAd:this.criteria.IABsmallAd;case"Core":case"IABvideo":case"FBvideo":return this.criteria[e];default:throw new Error("Unknown viewability criterion.")}},UnitViewabilityObserver.criteria={Core:{name:"Core",ratio:0,time:0},IABsmallAd:{name:"50/1",ratio:.5,time:1e3},IABlargeAd:{name:"30/1",ratio:.3,time:1e3},IABvideo:{name:"50/2",ratio:.5,time:2e3},FBvideo:{name:"50/3",ratio:.5,time:3e3}};;
function PlacementInView(t,e,i){this._init(),this.adapter=t,this.placement=e,this.node=e.getContainer(),this.inViewParent=i,this.outerRectInView=CRect.ZERO,this._lastScrollTime=0,this._isTouchDown=!1,this._autoSwitchObserverRunningState=this._autoSwitchObserverRunningState.bind(this),this.destroy=this.destroy.bind(this),this._onScroll=this._onScroll.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this.hacks={wrongBoundingRectWhileScrolling:deviceInfo.os.ios()&&this.placement.isSticky},this.inViewParent||(this._tick=this._tick.bind(this),this._timestepInterval=200,this._lastRunTime=0,this.adapter.on("containerViewableChange",this._autoSwitchObserverRunningState)),e.on("destroyed",this.destroy),this._autoSwitchObserverRunningState(),e.on("shown",this._autoSwitchObserverRunningState),e.on("hidden",this._autoSwitchObserverRunningState),this.hacks.wrongBoundingRectWhileScrolling&&(this.adapter.getTopWindow().addEventListener("scroll",this._onScroll,!0),this.adapter.getTopWindow().addEventListener("touchstart",this._onTouchStart,!0),this.adapter.getTopWindow().addEventListener("touchend",this._onTouchEnd,!0))}inherit(PlacementInView,InViewObject),PlacementInView.prototype._onScroll=function(){this._lastScrollTime=Date.now()},PlacementInView.prototype._onTouchStart=function(){this._isTouchDown=!0},PlacementInView.prototype._onTouchEnd=function(){this._isTouchDown=!1},PlacementInView.prototype._autoSwitchObserverRunningState=function(){var t=this.placement.visible&&this.adapter.containerIsViewable;t&&!this.active?this.start():!t&&this.active&&(this.stop(),this.rectInView=CRect.ZERO,this.outerRectInView=CRect.ZERO,this.areaInView=0,this.emit("rectInViewChanged",this.rectInView),this.emit("outerRectInViewChanged",this.outerRectInView),Logger("InViewObject").debug(this.placement.constructor.name+", rectInViewChanged: "+this.rectInView.toString()),this.emit("areaInViewRatioChanged",this.areaInView),Logger("InViewObject").debug(this.placement.constructor.name+", areaInViewRatioChanged: "+this.areaInView))},PlacementInView.prototype.getNode=function(){return this.placement.getContainer()},PlacementInView.prototype.getOuterRectInView=function(){return this.outerRectInView},PlacementInView.prototype.getParentRect=function(){return this.inViewParent?this.inViewParent.getOuterRectInView():this.adapter.getViewportRect()},PlacementInView.prototype.computeRectInView=function(){var t,e,i,n;this.hacks.wrongBoundingRectWhileScrolling&&(Date.now()-this._lastScrollTime<100||this._isTouchDown)||(t=this.getNode(),n=this.adapter.getPlacementRect(this.placement),t=t?CRect.adopt(t.getBoundingClientRect()):CRect.ZERO,i=this.getParentRect(),n=(i=(e=this.adapter.getPlacementRect(this.placement)).intersect(i)).zero()?CRect.ZERO:i.map(n,t),this._computeMaxPossibleDimensions(e,this.getParentMaxPossDims()),this.rectInView.equals(n)||(this.rectInView=n,this.emit("rectInViewChanged",n),Logger("InViewObject").debug(this.placement.constructor.name+", rectInViewChanged: "+this.rectInView.toString())),this.outerRectInView.equals(i)||(this.outerRectInView=i,this.emit("outerRectInViewChanged",i),Logger("InViewObject").debug(this.placement.constructor.name+", placementRectInViewChanged: "+this.outerRectInView.toString())))},PlacementInView.prototype.destroy=function(){this.hacks.wrongBoundingRectWhileScrolling&&(this.adapter.getTopWindow().removeEventListener("scroll",this._onScroll,!0),this.adapter.getTopWindow().removeEventListener("touchstart",this._onTouchStart,!0),this.adapter.getTopWindow().removeEventListener("touchend",this._onTouchEnd,!0)),this.stop(),this.adapter.off("containerViewableChange",this._autoSwitchObserverRunningState)},PlacementInView.prototype._start=function(){this.inViewParent?this.inViewParent.on("outerRectInViewChanged",this.computeRectInView):this.adapter.Ticker.frame(this._tick,"update")},PlacementInView.prototype._stop=function(){this.inViewParent?this.inViewParent.off("outerRectInViewChanged",this.computeRectInView):this.adapter.Ticker.removeFrame(this._tick,"update")},PlacementInView.prototype._tick=function(){var t=Date.now();t-this._lastRunTime>this._timestepInterval&&(this.computeRectInView(),this._lastRunTime=t)};;
function Tapper(T,m){var C="undefined"!=typeof creative&&creative.adapter||adapter;function w(t){for(var e=t,a=null;1!=e.nodeType;)e=e.parentNode;for(;e&&1==e.nodeType&&e.tagName;){var n=e.tagName.toLowerCase();if(hasClass(e,"touchable")||"a"===n&&e.href||"button"===n||"img"===n||"input"===n&&e.type&&"button"===e.type.toLowerCase()){a=e;break}e=e.parentNode}return a}function k(t,e){t=t.ownerDocument.createEvent("MouseEvents");t.initEvent("tap",!0,!0),e.dispatchEvent(t)}(m=m||C.useNativeClickForTapDetection)&&(attach(T,"click",function(t){t=w(t.target);t&&k(T,t)},!C.nativeClickEmittedOnSwipe),C.useNativeClickForTapDetection)||attach(T,"touchstart",function(t){var a,n,c,o,r,i,u,h,s,d,l,v,p,e,f,g=w(t.target);g&&(c=!1,celtra.iframe()&&(n=(a=function(){var t=C.getTopWindow();return[t.scrollX,t.scrollY,t.innerWidth,t.innerHeight]})(),c=!0),o=t.targetTouches[0].clientX-10,r=t.targetTouches[0].clientX+10,i=t.targetTouches[0].clientY-10,u=t.targetTouches[0].clientY+10,addClass(g,"touched"),l=d=s=h=!1,v=new Date,p=function(t){var e;h||s||(e=t.targetTouches[0].clientX,t=t.targetTouches[0].clientY,h=c&&n.toString()!=a().toString(),((s=!(o<=e&&e<=r&&i<=t&&t<=u))||h?removeClass:addClass)(g,"touched"))},e=function(t){var e;l||(l=!0,detach(T,"touchmove",p,!1),detach(T,"touchend",arguments.callee,!1),hasClass(g,"touched")&&(e=200<new Date-v&&!deviceInfo.deviceType.desktop(),removeClass(g,"touched"),s||h||d||e||m||k(T,g)))},f=function(){detach(T,"touchend",f,!0),nextFrame(function(){d=!0,e()})},attach(T,"touchcancel",function(t){removeClass(g,"touched"),e(t)},!1),attach(T,"touchmove",p,!1),attach(T,"touchend",e,!1),attach(T,"touchend",f,!0))},!0)};
function CrossScreenFormat(t,e){Format.apply(this,arguments),t.adBehavior.attachInlinePlacementToViewport=!0}inherit(CrossScreenFormat,Format),CrossScreenFormat.extractBreakpoints=function(t){return t.widthBreakpoints},CrossScreenFormat.prototype.setupInlineWebPlacementContainer=function(t,e){var i=this.sticky&&"body"==t.tagName.toLowerCase(),n=null,a=null;"static"!=t.ownerDocument.defaultView.getComputedStyle(t).position||i||(t.style.position="relative"),this.adapter.nesting.iabFriendlyIframe&&this.adapter.preventIABFriendlyIFrameBusting&&!i&&this.adapter.iabWin&&"static"==this.adapter.iabWin.getComputedStyle(this.adapter.iabWin.frameElement).position&&(this.adapter.iabWin.frameElement.style.position="relative"),this.adapter.nesting.iabFriendlyIframe&&!this.adapter.preventIABFriendlyIFrameBusting&&this.adapter.hideIABFriendlyIframe(),t.style.width="100%",t.style.height=this._getContainerHeight(e.minimumSize.height),this.adapter.usePubCSS||(n=e.lockedToVariant?e.lockedToVariant.baseSize.width:t.clientWidth<=1?e.widthBreakpoints[0].width:Math.min(t.offsetWidth,e.widthBreakpoints[0].width),e.lockedToVariant?a=e.lockedToVariant.baseSize.height:0===t.offsetHeight?(this._setHeightFromMatchingBreakpoint=!0,a=this._getMinHeightForFlexiblePlacement(t.offsetWidth,e)):this._setHeightFromMatchingBreakpoint=!1,null!==n&&(t.style.minWidth=n+"px"),null!==a&&(t.style.minHeight=a+"px"),this.adapter.setIABFriendlyIframeSize(n,a||e.minimumSize.height,!0))},CrossScreenFormat.prototype._getContainerHeight=function(t){var e;return this.adapter.nesting.iabFriendlyIframe?"px"===(e=this.adapter.readIABIFrameHeight()).unit&&e.value>=t?e.toString():this.sticky?void 0:"100%":"100%"},CrossScreenFormat.prototype._getMinHeightForFlexiblePlacement=function(t,e){e=this.uvOverrideSize?this.uvOverrideSize.height:(e.variantSelector="widestThenShortest",e.usesUpdatedVariantSelection?e.getVariantForSize(t,this.adapter.getTopWindow().innerHeight).getComputedHeight(t):e.getMatchingBreakpoint(t).height);return e},CrossScreenFormat.getVariantForSize=function(t,e,i){return t.getVariantForSize?t.getVariantForSize(e,i):(t=t.variants,n=e,r=i,t.map(function(t){return{variant:t,rank:function(t,e,i){return e>=t.layouts[0].minSize.width&&i>=t.layouts[0].minSize.height?1:0}(t,n,r)*function(t,e,i){var n=a(t,e,i);return t.layouts[0].minSize.width*t.layouts[0].minSize.height*n*n/(e*i)}(t,n,r)/a(t,n,r)}}).sort(function(t,e){return e.rank-t.rank})[0].variant);function a(t,e,i){return e/i<t.layouts[0].minSize.width/t.layouts[0].minSize.height?e/t.layouts[0].minSize.width:i/t.layouts[0].minSize.height}var n,r};;
function CrossScreenBannerFormat(t,e){CrossScreenFormat.apply(this,arguments),t.adBehavior.interstitial=!1,t.adBehavior.expandable=!1,t.adBehavior.adWillHideIframe=!0,t.adBehavior.canBeInterstitialPlacement=!0,t.adBehavior.crossScreenSticky=this.sticky=this.adapter.supportsSticky&&("top"==this.adapter.runtimeParams.sticky||"bottom"==this.adapter.runtimeParams.sticky),this._formatState=new StateObject({placementWidth:0,placementHeight:0,placementMinHeight:0,placementMarginLeft:0,containerWidth:0}),this._update=this._update.bind(this),this._render=this._render.bind(this),this.thumbnailMode="thumb"==this.adapter.runtimeParams.purpose,this.thumbnailMode?this.setupThumbnail():this.setup()}inherit(CrossScreenBannerFormat,CrossScreenFormat),Object.defineProperty(CrossScreenBannerFormat.prototype,"_useFullWidth",{get:function(){var t=parseInt(this.adapter.runtimeParams.widthBreakpoint,10);return!(!t||!this.adapter.isInlineWebPlacement||this.sticky||this.adapter.usePubCSS||this.adapter.preventIABFriendlyIFrameBusting)&&this.adapter.getViewportGeometry().width<=t},enumerable:!1}),Object.defineProperty(CrossScreenBannerFormat.prototype,"_renderWidth",{get:function(){return this._useFullWidth?this.adapter.getViewportGeometry().width:this._formatState.containerWidth},enumerable:!1}),CrossScreenBannerFormat.prototype.setup=function(){this.setupViewableTimeObserver(),this.adapter.on("ready",function(){this.adapter.on("stateChange",function(t){this.transitionTo(t)}.bind(this)),this.transitionTo("default")}.bind(this))},CrossScreenBannerFormat.prototype.setupThumbnail=function(){this.adapter.on("ready",function(){this.transitionTo("default")}.bind(this))},CrossScreenBannerFormat.prototype.populateBanner=function(t,e){var i=this.units.banner=t.creative.units.banner,a=(i.swipeable=!0,this.adapter.isRxAvailable&&i.createRxState(),this.sticky&&(t.isSticky=!0),this._attachInViewToOrderedPlacements(i,t),i.firstAppearWithoutUserInteraction=!0,this.connectPlacementEventsToUnitBehavior(t,i),i.getNode(function(){t.populate(a,e)}.bind(this))),i=t.creative,i=i.secure?i.staticUrl:i.insecureStaticUrl;"function"==typeof AppleNewsBadge&&(new AppleNewsBadge).createAppleNewsBadge(a,i,function(t){this.adapter.showMessage(t)}.bind(this))},CrossScreenBannerFormat.prototype.transitionTo=function(t,e){if(e=e||noop,null===this.state&&"default"==t)this._transitionFromNullToDefault(e);else{if("default"!=this.state&&null!==this.state||"dismissed"!=t)throw new Error("Invalid state transition request! ("+this.state+" => "+t+")");this.destroy()}this.state=t},CrossScreenBannerFormat.prototype._transitionFromNullToDefault=function(e){this._ensureBannerPlacement(function(t){t.creative.trackCreativeLoaded(this.observationAbilities),this.adapter.triggerLoadedEvent(t.root),this._triggerAppearAfterViewable(t,this.units.banner),this.start(),e()}.bind(this))},CrossScreenBannerFormat.prototype._ensureBannerPlacement=function(r){this.placements.banner?defer(function(){r(this.placements.banner)}.bind(this)):this.adapter.createPlacements({banner:{attachment:"inline",positioning:this.sticky?"static":"container",type:"unit"}},function(){var t=this.placements.banner,e=t.creative.units.banner,i=(this._accessibility&&(this._accessibility.setAccessibilityProperties(e),this._accessibility.createAndPopulateAccessibilityPlacement(this.adapter),t.hidePlacementFromScreenReader()),t.applyCustomPubClasses(),this.adapter.usePubCSS=t.usePubClasses(),t.addClasses("celtra-banner"),this.adapter.runtimeParams.creativeVariantLockSize&&e.lockVariantSelectionToSize(this.adapter.runtimeParams.creativeVariantLockSize),this.adapter.canMeasureViewportPlacementGeometryRelativeToPage&&this._trackViewportPlacementGeometry(t),this.adapter.isInlineWebPlacement&&this.setupInlineWebPlacementContainer(t.root.parentNode,e),t.root.parentNode),i=(this._formatState.containerWidth=i.offsetWidth,i.getBoundingClientRect()),a=(this._formatState.placementMarginLeft=this._useFullWidth?-i.left:0,this.sticky&&!this.adapter.usePubCSS?(e.variantSelector="widestThenShortest",i=t.root.parentNode.offsetWidth,a=e.getVariantForSize(i,e.getLargestComputedHeight(i)),t.setSize("100%",a.getComputedHeight(i))):((this.adapter.isPreviewAdapter||this.adapter.isPreview)&&(e.variantSelector="fittingWidestThenTallest"),t.setSize(this._renderWidth,"100%")),t.setPosition(this._formatState.placementMarginLeft,0),t.show(),t.getPlacementGeometry());e.setAvailableSize(a.width,a.height),this.populateBanner(t,function(){this.adViewableTimeObserver&&this.adViewableTimeObserver.registerUnit(e),e.enterRenderTree(),r(t)}.bind(this))}.bind(this))},CrossScreenBannerFormat.prototype._triggerAppearAfterViewable=function(e,i){this.adapter.viewabilityMeasurable.viewable00?this.adapter.waitForViewableCore(e,i.node,function(t){e.creative.track({name:"viewable00",criterion:t}),this.adViewableTimeObserver&&this.adViewableTimeObserver.readyToShow(),i.appear()}.bind(this)):defer(function(){i.appear()},void 0,void 0,this.adapter.useAsap),this.adapter.viewabilityMeasurable.viewable501&&this.adapter.waitForViewableIAB(e,i.node,function(t){e.creative.track({name:"viewable501",criterion:t})})},CrossScreenBannerFormat.prototype.destroy=function(){this.stop(),CrossScreenBannerFormat.uber.destroy.apply(this)},CrossScreenBannerFormat.prototype.start=function(){this.adapter.Ticker.frame(this._update,"update"),this.adapter.Ticker.frame(this._render,"render")},CrossScreenBannerFormat.prototype.stop=function(){this.adapter.Ticker.removeFrame(this._update,"update"),this.adapter.Ticker.removeFrame(this._render,"render")},CrossScreenBannerFormat.prototype._update=function(){var t,e,i,a,r,n,s,o;this.units.banner&&((t=this.units.banner).updateRxState(this.placements.banner.root),this.adapter.usePubCSS?(e=this.placements.banner.root,this._formatState.placementWidth=e.offsetWidth,this._formatState.placementHeight=e.offsetHeight):(e=this.placements.banner.root.parentNode,this._formatState.containerWidth=e.offsetWidth,i=this._renderWidth,a=e.offsetHeight,r=this._formatState.placementMinHeight,n=t.usesUpdatedVariantSelection?this.placements.banner.getViewportGeometry().height:t.getLargestComputedHeight(i),this.sticky?(t.variantSelector="widestThenShortest",a=r=(s=t.getVariantForSize(i,n)).getComputedHeight(i)):this.adapter.isPreviewAdapter||this.adapter.isPreview?(t.variantSelector="fittingWidestThenTallest",o="string"==typeof(o=e.parentNode.style.height)&&o.length?parseInt(o):n,r=(s=t.getVariantForSize(i,o)).getComputedHeight(i)):this.adapter.isInlineWebPlacement&&(this._setHeightFromMatchingBreakpoint||0===e.offsetHeight)?(t.variantSelector="widestThenShortest",r=(s=t.getVariantForSize(i,n)).getComputedHeight(i),a=Math.max(r,a),this._setHeightFromMatchingBreakpoint||(this._setHeightFromMatchingBreakpoint=!0)):t.getVariantForSize(i,a).scaleUnit&&(t.variantSelector=null,n=e.offsetHeight,s=t.getVariantForSize(i,n),r=a=Math.min(s.getComputedHeight(i),n)),o=e.getBoundingClientRect(),this._formatState.placementMarginLeft=this._useFullWidth?-o.left:0,this._formatState.placementWidth=i,this._formatState.placementHeight=a,this._formatState.placementMinHeight=r))},CrossScreenBannerFormat.prototype._render=function(){var t;this._formatState.isDirty()&&(t=this.placements.banner,this.adapter.usePubCSS||(this.adapter.isInlineWebPlacement&&this._formatState.isDirty("placementMinHeight")&&(t.root.parentNode.style.minHeight=this._formatState.placementMinHeight+"px"),this.sticky&&t.enableDocumentPadding()),t.setSize(this._formatState.placementWidth,this._formatState.placementHeight),t.setPosition(this._formatState.placementMarginLeft,0),this.adapter.setIABFriendlyIframeSize(null,this._formatState.placementMinHeight,!0),this._formatState.markClean())};;
function SDKAdapter(e,t,i,n,r,o,a,s,d,p){function h(e){return this.experiments&&this.experiments.get&&this.experiments.get(e)}function c(e,t){return"1"===t||e&&"treatment"===e.chosenVariant&&"0"!==t}this.runtimeParams=e,this.trackingCenter=t,this.aggregatorTracking=i,this.experiments=n,this.useAsap=c(h("DeferWithAsap"),e._useAsap),this._renderBeforeDomReady=c(h("RenderBeforeDomReady"),e._renderImmediately),this.macros=a,this.perf=p,defer.perf=p,this.ampDetected=!1,this.ampNestingLevel="",this.safeFrameDetected=!1,this.scriptElement=script,this.scriptElement.parentNode.celtra||(this.scriptElement.parentNode.celtra={loaded:!1,viewabilityObservee:null}),this.domApi=this.scriptElement.parentNode.celtra,this.adapterWindow=window,this.tagWindow=this.scriptElement.ownerDocument.defaultView,this.nesting=getWindowNesting(this.tagWindow),this.tagElement=this.scriptElement.parentNode,this.hostElement=this.tagElement,this.storeOpenedOverrideUrls=o,this.urlOpenedOverrideUrls=r,this.urlOpenedUrlAppendage=s,this.clickThroughDestinationUrl=d,this.useNativeClickForTapDetection=!0,this.nativeClickEmittedOnSwipe=deviceInfo.deviceType.desktop()||deviceInfo.os.ios(),this.preventIABFriendlyIFrameBusting=!1,this.providesCloseButton=!1,this.enableCustomStateTransitions=!1,this.adBehavior={interstitial:!1,expandable:!1,expanded:!1,sticky:!1,crossScreenSticky:!1,attachInlinePlacementToViewport:!1,scrollable:!1,subpixelScrollable:!1},this.activeGeometryBaseline={placement:"banner",unit:"banner"},this.isRxAvailable=!1,this.viewabilityMeasurable={viewable00:!1,viewable501:!1},this.canMeasureViewportPlacementGeometry=!1,this.canMeasureViewportPlacementGeometryRelativeToPage=!1,this.canMeasureContainerAreaInViewRatio=!1,this.supportsContainerViewability=!1,this.supportsContainerInitialViewability=!1,this.useFSVP=!0,void 0!==this.runtimeParams.topLayerZIndex&&(t=parseInt(this.runtimeParams.topLayerZIndex,10),!isNaN(t)&&20<t&&(Placement.ZINDEX_MAX=Math.min(Placement.ZINDEX_MAX,t))),this.hacks={useResizeOnScroll:ios("9")},this._hooks={},this.placements={},this.supportsSticky=!1,this._handleResize=this._handleResize.bind(this),this._handleOrientationChange=this._handleOrientationChange.bind(this),this._handleViewportChange=this._handleViewportChange.bind(this),this._handleDetachedFromDocument=this._handleDetachedFromDocument.bind(this),this._updatePlacements=this._updatePlacements.bind(this),this.listenForExpandErrors=this.listenForExpandErrors.bind(this),this._onReportReceived=this._onReportReceived.bind(this),this._keyboardShown=!1,this._initialInnerDims=null,this._onKeyboardShown=this._onKeyboardShown.bind(this),this._onKeyboardHidden=this._onKeyboardHidden.bind(this),this._resizeTimer=null,this._listening=!1,this._touchEventSimulator=null,this.hostContainerSize={width:"100%",height:"100%"},this.mediaState=new MediaState,this.nativeRAFIsSupported=["r","webkitR","mozR","msR"].some(function(e){return e+"equestAnimationFrame"in window}),this.visibilityApiIsSupported=["webkit","moz","ms",""].some(function(e){return(e?e+"Hidden":"hidden")in window.document});var l=function(e){e&&(this.trackingCenter.track({name:"containerBecameViewable"}),this.off("containerViewableChange",l))}.bind(this);defer(function(){var e=this.perf.start("Adapter.startObservingEnvironment");this._startObservingEnvironment(),e.end(),this.supportsContainerInitialViewability&&(this.containerIsViewable?this.trackingCenter.track({name:"containerBecameViewable"}):this.on("containerViewableChange",l))}.bind(this),0,"SDKAdapter defer _startObservingEnvironment",this.useAsap),this.on("containerViewableChange",this.trackingCenter.batchFlush),this.getTopWindow().document.addEventListener("unload",this.trackingCenter.batchFlush),this.getTopWindow().document.addEventListener("beforeunload",this.trackingCenter.batchFlush),this.getTopWindow().document.addEventListener("pagehide",this.trackingCenter.batchFlush),this.trackingCenter.startBatchFlushCycle(1e3),this.on("resize",this._updatePlacements),this._displayed=!1,this.on("displayed",function(){this._displayed=!0}.bind(this)),this.sdkReady=!1,this.canOpenUrlInSameWindow=!1,this._MAX_TRACKING_DURATION=2e3,this._initRequestAnimationFrame(),this.once("domReady",this.perf.marks("Adapter.domReady")),this.once("documentReady",this.perf.marks("Adapter.documentReady")),this.once("sdkReady",this.perf.marks("Adapter.sdkReady")),this.once("ready",this.perf.marks("Adapter.ready")),defer(function(){var e=this.perf.start("Adapter.initSdk");this._initSdk(deferred(function(){e.end(),this.sdkReady=!0,this.emit("sdkReady")}.bind(this),0,"SDKAdapter defer sdkReady",this.useAsap))}.bind(this),0,"SDKAdapter defer _initSdk",this.useAsap),this.on("documentReady",function(){android("4.0")&&this.getTopWindow().setInterval(function(){for(var e in this.placements)this.placements[e]._flash()}.bind(this),250),this.runtimeParams._mraidCheck&&defer(function(){this.collectAndTrackData(function(e){e({isMraid:void 0!==this.tagWindow.mraid})}.bind(this),"mraidCheckEnvironmentInfo")}.bind(this),1e3)}.bind(this)),this.useFixedPositioningForInterstitial=!1,this.isRasterized=!1}extend(SDKAdapter.prototype,EventEmitter),SDKAdapter.prototype.protoLoading={},Object.defineProperties(SDKAdapter.prototype.protoLoading,{dataURIsSupported:{get:function(){return!!runtimeParams.protoLoading&&"supported"===runtimeParams.protoLoading.dataLoadStatus},enumerable:!0},blobURIsSupported:{get:function(){return!!runtimeParams.protoLoading&&"supported"===runtimeParams.protoLoading.blobLoadStatus},enumerable:!0}}),Object.defineProperty(SDKAdapter.prototype,"__CELTRA",{get:function(){return this.getTopWindow().__CELTRA||(this.getTopWindow().__CELTRA={formats:[]}),this.getTopWindow().__CELTRA},enumerable:!0}),Object.defineProperty(SDKAdapter.prototype,"assumeScrollSupported",{get:function(){return!1}}),SDKAdapter.prototype._initRequestAnimationFrame=function(){var e=this.getTopWindow();this.raf=new RequestAnimationFrameWrapper(e),this.Ticker=new CTicker(this.raf,e),this.nextFrame=this.Ticker.raf.nextFrame,this.cancelFrame=this.Ticker.raf.cancelFrame,window.nextFrame=this.Ticker.raf.nextFrame,window.cancelFrame=this.Ticker.raf.cancelFrame,window.Ticker=this.Ticker},SDKAdapter.prototype._startObservingEnvironment=function(){if(!this._listening){try{var e=this.tagWindow,t=0;for(;e;){if((n=e).context&&void 0!==n.context.pageViewId){this.ampDetected=!0,this.ampNestingLevel=t;break}if("$sf"in(i=e)&&i.$sf.ext){this.safeFrameDetected=!0;break}if(e==e.parent)break;e=e.parent,t++}}catch(e){}this.resizeListener=this._createViewportListener(),this.resizeListener.start(this._handleResize,this._handleViewportChange);var i,n,r,o=this._createOrientationObserver(function(e){this.orientationObserver=e,this.orientationObserver.start(),Object.defineProperty(this,"orientation",{get:function(){return this.orientationObserver.getOrientation()}.bind(this),configurable:!0})}.bind(this));o&&(this.orientationObserver=o,this.orientationObserver.start(),Object.defineProperty(this,"orientation",{get:function(){return this.orientationObserver.getOrientation()}.bind(this),configurable:!0})),this.containerViewabilityObserver=this._createContainerViewabilityObserver(),this.containerViewabilityObserver.start(),Object.defineProperty(this,"containerIsViewable",{get:function(){return this.containerViewabilityObserver.isViewable}.bind(this),configurable:!0}),this.documentAttachmentObserver=this._createDocumentAttachmentObserver(),this.documentAttachmentObserver.start(this._handleDetachedFromDocument),"ReportingObserver"in window&&(this._reportingObserver=new ReportingObserverWrapper(this._onReportReceived),this._reportingObserver.start()),this.on("domReady",function(){this._initDocument(deferred(this.emits("documentReady"),0,"SDKAdapter._startObservingEnvironment deferred documentReady",this.useAsap))}.bind(this)),this.once("sdkReady",function(){this.collectAndTrackData(function(e){var t=this.tagElement.parentNode,i={width:this.getTopWindow().innerWidth,height:this.getTopWindow().innerHeight},n={width:this.tagWindow.innerWidth,height:this.tagWindow.innerHeight},i={scope:"global",userAgent:this.getTopWindow().navigator.userAgent,orientation:this.orientation,topmostReachableWindow:i,hostWindow:n,nesting:this.nesting,pageVisibilityApi:this.visibilityApiIsSupported,requestAnimationFrame:this.nativeRAFIsSupported,topWindowNativeRAFSupported:this.raf.isNative,allowNonNativeRAFForViewableTimeUsed:"1"==runtimeParams._allowNonNativeRAFForViewableTime,clientTimeZoneOffsetInMinutes:(new Date).getTimezoneOffset(),supportsContainerViewability:this.supportsContainerViewability,supportsContainerInitialViewability:this.supportsContainerInitialViewability,tagParentWidth:t?t.clientWidth:"",tagParentHeight:t?t.clientHeight:"",ampDetected:this.ampDetected,ampNestingLevel:this.ampNestingLevel,safeFrameDetected:this.safeFrameDetected,fetchSupported:isFetchSupported(),asapEnabled:this.useAsap,nativePromisesSupported:isNativeImplementation(window.Promise),beaconSupported:isBeaconSupported(),IntersectionObserverSupported:"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype,isMutationObserverSupported:isNativeImplementation(window.MutationObserver),webView:deviceInfo.browser.webView(),isWindowOpenNative:"function"==typeof this.getTopWindow().open&&-1<Function.prototype.toString.call(this.getTopWindow().open).indexOf("[native code]")};runtimeParams.protoLoading&&(i.protoLoading=runtimeParams.protoLoading),this.nesting.iframe&&!this.nesting.friendlyIframe||(i.topWindowLocation=this.getTopWindow().location.protocol+"//"+this.getTopWindow().location.host,void 0!==i.topWindowLocation&&(i.topWindowLocationLength=i.topWindowLocation.length,200<i.topWindowLocationLength&&(i.topWindowLocation=i.topWindowLocation.slice(0,200)+"..."))),e(i)}.bind(this),"environmentInfo")}.bind(this)),this._renderBeforeDomReady?this.emit("domReady"):(r=!1,this._waitForDomReady(function(){r||(this.emit("domReady"),r=!0)}.bind(this))),this._listening=!0}},SDKAdapter.prototype._onReportReceived=function(e){throw new Error("SDKAdapter._onReportReceived not implemented!")},SDKAdapter.prototype._initSdk=function(e){e()},SDKAdapter.prototype._initDocument=function(e){e()},SDKAdapter.prototype._onKeyboardShown=function(){this._keyboardShown=!0},SDKAdapter.prototype._onKeyboardHidden=function(){this._keyboardShown=!1,defer(this._updatePlacements)},SDKAdapter.prototype.setIABFriendlyIframeSize=function(){},SDKAdapter.prototype._createViewportListener=function(){var n=this,t={_resizeCallback:null,_viewportChangeCallback:null,start:function(e,t){var i=n.getTopWindow();this._resizeCallback=e,this._viewportChangeCallback=t,i.addEventListener("resize",this._resizeHandler,!1),i.addEventListener("scroll",this._scrollHandler,!1),ios()&&(i.addEventListener("focus",this._focusHandler,!0),i.addEventListener("blur",this._blurHandler,!0))},stop:function(){var e=n.getTopWindow();e.removeEventListener("resize",this._resizeHandler,!1),e.removeEventListener("scroll",this._scrollHandler,!1),ios()&&(e.removeEventListener("focus",this._focusHandler,!0),e.removeEventListener("blur",this._blurHandler,!0))}};return t._resizeHandler=function(){n.hacks.useResizeOnScroll&&(t.numTimesScrollTriggeredAfterResize=0),"undefined"!=typeof window?(this._resizeCallback(),this._viewportChangeCallback(),void 0!==window.admarvelSDKVersion&&defer(this._resizeCallback.bind(this),200)):n.dismiss()}.bind(t),t._scrollHandler=function(){"undefined"!=typeof window?(n.hacks.useResizeOnScroll&&void 0!==t.numTimesScrollTriggeredAfterResize&&(t.numTimesScrollTriggeredAfterResize++,t.numTimesScrollTriggeredAfterResize<=2&&this._resizeCallback()),this._viewportChangeCallback()):n.dismiss()}.bind(t),t._focusHandler=function(e){-1<["INPUT","TEXTAREA"].indexOf(e.target.nodeName)&&(n._keyboardShown=!0)},t._blurHandler=function(){n._keyboardShown=!1;var e=ios("9",null)?100:0;defer(function(){n._keyboardShown||(t._resizeCallback(),t._viewportChangeCallback())},e)},t},SDKAdapter.prototype._createOrientationObserver=function(){var e=this,t=this.getTopWindow(),i={_orientationChangeEventQueued:!1,start:function(){t.addEventListener("orientationchange",this._handler,!1)},stop:function(){t.removeEventListener("orientationchange",this._handler,!1)},getOrientation:function(){return e._normalizeOrientation(t.orientation)||0},_handler:function(){"undefined"!=typeof window?(e.emit("_rawOrientationChange"),i._orientationChangeEventQueued=!0,e.once("resize",i._trigger),setTimeout(i._trigger,1e3)):e.dismiss()},_trigger:function(){i._orientationChangeEventQueued&&(i._orientationChangeEventQueued=!1,defer(e.emits("orientationchange")))}};return i},SDKAdapter.prototype._createContainerViewabilityObserver=function(){var e=this;return{isViewable:!1,start:function(){defer(function(){this.isViewable=!0,e.emit("containerViewableChange",this.isViewable)}.bind(this),void 0,void 0,this.useAsap)},stop:function(){}}},SDKAdapter.prototype.triggerLoadedEvent=function(e){this.domApi.loaded=!0,this.domApi.viewabilityObservee=e,this._dispatchCeltraLoadedEvent(this.tagElement)},SDKAdapter.prototype.triggerClosedEvent=function(){this._dispatchCeltraClosedEvent(this.tagElement)},SDKAdapter.prototype._dispatchCeltraLoadedEvent=function(e){var t=e.ownerDocument.createEvent("HTMLEvents");t.initEvent("celtraLoaded",!0,!1),e.dispatchEvent(t)},SDKAdapter.prototype._dispatchCeltraClosedEvent=function(e){var t=e.ownerDocument.createEvent("HTMLEvents");t.initEvent("celtraClosed",!0,!1),e.dispatchEvent(t)},SDKAdapter.prototype.waitForDisplayed=function(e){if(this._displayed)return defer(e);this.once("displayed",e)},SDKAdapter.prototype.waitForContainerViewable=function(t){if(this.containerIsViewable)return defer(t,void 0,void 0,this.useAsap);var i=function(e){e&&(this.off(i),defer(t,void 0,void 0,this.useAsap))}.bind(this);this.on("containerViewableChange",i)},SDKAdapter.prototype._createDocumentAttachmentObserver=function(){var t=this.tagElement,e=this.getTopWindow(),i=new e.Function("f","return function() { f(); };"),n=new e.Function("f","interval","return setTimeout(f, interval);"),r=new e.Function("f","return requestAnimationFrame(f);");return{_interval:60,_detachmentHandler:null,_timer:null,_topWinTimerTickWrapper:null,_rafRequestId:null,_topWinRafTickWrapper:null,start:function(e){this._detachmentHandler=e,this._topWinTimerTickWrapper=i(this._timerTick.bind(this)),this._timer=n(this._topWinTimerTickWrapper,this._interval),this._topWinRafTickWrapper=i(this._rafTick.bind(this)),this._rafRequestId=r(this._topWinRafTickWrapper)},stop:function(){e.clearTimeout(this._timer),(this._timer=null)!==this._rafRequestId&&(e.cancelAnimationFrame(this._rafRequestId),this._rafRequestId=null)},_timerTick:function(){this._isDetached()?this._detachmentHandler():this._timer=n(this._topWinTimerTickWrapper,this._interval)},_rafTick:function(){this._isDetached()?this._detachmentHandler():this._rafRequestId=r(this._topWinRafTickWrapper)},_isDetached:function(){if(t.parentNode&&t.ownerDocument.defaultView&&window&&window.document){for(var e=t;(e=e.parentNode)&&e!==e.ownerDocument.documentElement;);return!e&&!(this._timer=null)}return!0}}},SDKAdapter.prototype._normalizeOrientation=function(e){var t=this.getTopWindow().navigator.userAgent;return e=["Nexus 10","GT-N8","SM-P60","GT-P5","SCH-19","GT-P7","SM-T9","SM-T8"].some(function(e){return-1!=t.indexOf(e)})&&270==(e+=90)?-90:e},SDKAdapter.prototype._waitForDomReady=function(e){var t=this.getTopWindow().document;"interactive"===t.readyState||"loaded"===t.readyState||"complete"===t.readyState?defer(e,0,"SDKAdapter._waitForDomReady defer cb",this.useAsap):t.addEventListener("DOMContentLoaded",e,!1)},SDKAdapter.prototype.waitForWindowLoad=function(e){function t(){n||(n=!0,e())}var i=this.getTopWindow(),n=!1;"complete"===i.document.readyState?defer(e,0,"SDKAdapter.waitForWindowLoad readyState === complete cb",this.useAsap):(i.setTimeout(t,3e4),i.addEventListener("load",t,!1))},SDKAdapter.prototype._stopObservingEnvironment=function(){this._listening&&(this.resizeListener.stop(this._handleResize),this.orientationObserver.stop(),this.documentAttachmentObserver.stop(),this._reportingObserver&&this._reportingObserver.stop(),this._listening=!1)},SDKAdapter.prototype.setMinimumSize=function(e,t){},SDKAdapter.prototype._handleResize=function(){var t=!1;this.emit("beforeResize",function(e){t=e}),t?defer(function(){this.emit("resize")}.bind(this),700):this.emit("resize")},SDKAdapter.prototype._handleViewportChange=function(){this.emit("viewportChange")},SDKAdapter.prototype._handleOrientationChange=function(e){this.emit("orientationchange",e)},SDKAdapter.prototype._handleDetachedFromDocument=function(){this.dismiss()},SDKAdapter.prototype._updatePlacements=function(e){if(e=e||noop,this._keyboardShown)return e();var t,i=0,n=this;function r(){--i||(e&&e(),defer(n.emits("placementsUpdated"),void 0,void 0,this.useAsap))}for(t in this.placements)i++,"undefined"!=typeof window&&this.placements[t].update(r,this.adBehavior.crossScreenSticky)},SDKAdapter.prototype._stopAllMedia=function(e){this._stopMediaTagsInPlacements(),this.emit("mediaStopRequested",e)},SDKAdapter.prototype._stopMediaTagsInPlacements=function(){for(var e in this.placements)for(var t=this.placements[e].querySelectorAll("audio,video"),i=0;i<t.length;i++)t[i].hasAttribute("x-celtra-media")||"function"!=typeof t[i].pause||t[i].pause()},SDKAdapter.prototype.createPlacements=function(n,e){var r,t,i=Object.keys(n),o=Object.keys(this.placements),i=i.filter(function(e){return-1==o.indexOf(e)}),a=this.perf.start("Adapter.createPlacements",i);0==i.length?(a.end(),defer(e,0,"SDKAdapter.createPlacements defer no placements callback",this.useAsap)):(r=new TaskScheduler,t=this.useAsap,r.when(i).run(function(){a.end(),defer(e,0,"SDKAdapter.createPlacements defer callback",t)}),i.forEach(function(t){var e=n[t],e={attachment:e.attachment,positioning:e.positioning,type:e.type},i=this.perf.start("Adapter.createPlacement",{name:t,descriptor:e});this.createPlacement(n[t],function(e){i.end(),this.placements[t]=e,defer(r.notifies(t),0,"SDKAdapter.createPlacements defer scheduler notifies",this.useAsap)}.bind(this))},this))},SDKAdapter.prototype.createPlacement=function(e,t){throw new Error("SDKAdapter.createPlacement not implemented!")},SDKAdapter.prototype.destroyPlacement=function(e){for(var t in this.placements)t==e&&(this.placements[t].destroy(),delete this.placements[t])},SDKAdapter.prototype.hook=function(e,t){this._hooks[e]=t},SDKAdapter.prototype.waitForHook=function(e,t){var i=Array.prototype.slice.call(arguments,1);this._hooks[e]?this._hooks[e].apply(null,i):t()},SDKAdapter.prototype.getPlacementRect=function(e){return this.nesting.iabFriendlyIframe&&this.preventIABFriendlyIFrameBusting?e.root?getElementRectRelativeToTopViewport(e.root):CRect.ZERO:e.root?CRect.adopt(e.root.getBoundingClientRect()):CRect.ZERO},SDKAdapter.prototype.getViewportRect=function(){var e=this.getTopWindow();return CRect.adopt({left:0,top:0,width:e.innerWidth,height:e.innerHeight})},SDKAdapter.prototype.expand=function(e,t){throw new Error("SDKAdapter.expand not implemented!")},SDKAdapter.prototype.collapse=function(e){throw new Error("SDKAdapter.collapse not implemented!")},SDKAdapter.prototype.dismiss=function(e){throw new Error("SDKAdapter.dismiss not implemented!")},SDKAdapter.prototype.resize=function(e,t){throw new Error("SDKAdapter.resize not implemented!")},SDKAdapter.prototype.playVideoInPlayer=function(e,t,i){throw new Error("SDKAdapter.playVideoInPlayer not implemented!")},SDKAdapter.prototype.callPhone=function(e){window.location.href="tel:"+encodeURIComponent(e)},SDKAdapter.prototype.openBrowserSameWindowInHostileIFrame=function(e){window.top.location.href=e},SDKAdapter.prototype.getApp=function(e){throw new Error("SDKAdapter.getApp not implemented!")},SDKAdapter.prototype.canSaveImage=function(){throw new Error("SDKAdapter.canSaveImage not implemented!")},SDKAdapter.prototype.saveImage=function(e,t,i){throw new Error("SDKAdapter.saveImage not implemented!")},SDKAdapter.prototype.getVideoCapabilities=function(){return{}},SDKAdapter.prototype.sendToEventMonitor=function(e,t,i,n,r){},SDKAdapter.prototype.notifycreativeRendered=function(){},SDKAdapter.prototype.getTopWindow=function(){if(this._topWindow)return this._topWindow;var e=window;try{for(;void 0!==e.parent.location.href&&e.parent.document!==e.document;)e=e.parent}catch(e){}return this._topWindow=e},SDKAdapter.prototype.inNativeFullscreen=function(){return["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].some(function(e){e=this.getTopWindow().document[e];return e&&null!==e}.bind(this))},SDKAdapter.prototype.trackEventsAndOpenBrowser=function(e,t,i,n){if(!e)return this.trackingCenter.track({name:"userError",userErrorId:"exitUriIsEmpty"}),(i||noop)();var r=!1,o=function(){r||(r=!0,this.openBrowser(e,t,n),i&&i())}.bind(this);this._stopAllMedia(),!this.canOpenUrlInSameWindow||t?(this.trackingCenter.flush(),o()):(this.trackingCenter.flush(o),defer(o,this._MAX_TRACKING_DURATION))},SDKAdapter.prototype.openBrowser=function(e,t,i){t?this._tryOpenInNewWindow(e,i):this._tryOpenInSameWindow(e,i)},SDKAdapter.prototype._openInNewWindow=function(e){try{var t=this.getTopWindow().open(e);return!(!t||t.closed||void 0===t.closed)}catch(e){return!1}},SDKAdapter.prototype._tryOpenInNewWindow=function(e,t){return!!this._openInNewWindow(e,t)||(this.aggregatorTracking.trackAggregator("openBrowserFailed",1,{targetWindow:"new"}),!1)},SDKAdapter.prototype._openInSameWindow=function(e){throw new Error("SDKAdapter._openInSameWindow not implemented!")},SDKAdapter.prototype._tryOpenInSameWindow=function(e,t){try{return this._openInSameWindow(e,t),!0}catch(e){return this.aggregatorTracking.trackAggregator("openBrowserFailed",1,{targetWindow:"same"}),!1}},SDKAdapter.prototype.getPageDimensions=function(){var e=this.getTopWindow().document,t=e.body,e=e.documentElement;return{height:Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight),width:Math.max(t.scrollWidth,t.offsetWidth,e.clientWidth,e.scrollWidth,e.offsetWidth)}},SDKAdapter.prototype.saveCalendarEvent=function(e,t){e=e;var i=deviceInfo.os.ios()?(i=adapter.hacks.useDefaultProtocolForSaveCalendar?"https:":"webcal:",{url:CCalendar.getEventICSUrl(e,i),openInNewWindow:!1}):{url:CCalendar.getEventGoogleCalendarUrl(e),openInNewWindow:!0};i&&i.url?(this.openBrowser(i.url,i.openInNewWindow),t(!0)):t(!1)},SDKAdapter.prototype.startObscuringContent=function(){},SDKAdapter.prototype.stopObscuringContent=function(){},SDKAdapter.prototype.setOrientationLock=function(){return!1},SDKAdapter.prototype.autoLock=function(){return!1},SDKAdapter.prototype._getDefaultLockOrientation=function(){return"a"},SDKAdapter.prototype.determineLockOrientation=function(){var e=creative.unitSizes.modal,t=(this.runtimeParams.lockOrientation||this._getDefaultLockOrientation()).toLowerCase();function i(){return this.orientation%180==0?"portrait":"landscape"}return"n"===t?"noOrientation":"l"===t?"landscape":"p"===t?"portrait":"a"===t&&e?e.width<e.height?"portrait":e.width>e.height?"landscape":i():i()},SDKAdapter.prototype.collectAndTrackData=function(e,t){if("function"!=typeof e)throw new Error("The dataCollector param was not a function.");if(void 0===t)throw new Error("The eventName param was not defined.");var i=1e3;defer(function(){try{e(function(e){e.name=t,this.trackingCenter.trackNoLaterThan(e,i)}.bind(this))}catch(e){this.trackingCenter.trackNoLaterThan({name:t,error:e.message+"\n"+e.stack},i)}}.bind(this),void 0,void 0,this.useAsap)},SDKAdapter.prototype._createViewportElement=function(){var e=document.createElement("div");return e.id="viewport",e.style.cssText="position: absolute; left: 0; top: 0; width: 100%; height: 100%; overflow: visible;",this.tagWindow.document.body.appendChild(e),e},SDKAdapter.prototype.getViewportGeometry=function(e){return getViewportGeometry(this.getTopWindow(),e)},SDKAdapter.prototype._getViewportElement=function(){return this.viewport},SDKAdapter.prototype.listenForExpandErrors=function(){},SDKAdapter.prototype.enableScroll=function(){},SDKAdapter.prototype.disableScroll=function(){};;
function BrowserAdapter(e,t,i){BrowserAdapter.uberConstructor.apply(this,arguments),this.isSingleOccupant=!1,this.hasDeadZones=ios("7"),this.isRxAvailable=!0,this.canOpenUrlInSameWindow=!0,this.on("ready",this.onReadyCallback.bind(this)),this.commentsExtensionsEnabled=1==this.runtimeParams.standalonePreview||1==this.runtimeParams.campaignExplorer,this.isPreview="1"==this.runtimeParams.mobilePreview||"1"==this.runtimeParams.standalonePreview}inherit(BrowserAdapter,SDKAdapter),Object.defineProperty(BrowserAdapter.prototype,"assumeScrollSupported",{get:function(){return this.getTopWindow().document.body.scrollHeight>this.getTopWindow().innerHeight&&!this.nesting.hostileIframe}}),BrowserAdapter.prototype.onReadyCallback=function(){this._setupMouseLeaveObserver(),defer(this.emits("displayed"),void 0,"BrowserAdapter emits displayed on ready",this.useAsap)},BrowserAdapter.prototype._setupMouseLeaveObserver=function(){var o;deviceInfo.deviceType.desktop()||("ontouchstart"in(o=this.getTopWindow())||navigator.msMaxTouchPoints||attach(o.document,"mouseout",function(e){e=e||o.event;var t=o.document.documentElement,i=Math.max(t.clientWidth,o.innerWidth||0),t=Math.max(t.clientHeight,o.innerHeight||0),r=e.clientX||e.pageX,n=e.clientY||e.pageY;e.toElement&&"HTML"!==e.toElement.tagName||!(r<1||i-1<r||n<1||t-1<n)||Object.keys(this.placements).forEach(function(e){this.placements[e].touchEventSimulator&&this.placements[e].touchEventSimulator.cancelInteraction()},this)}.bind(this),!1))},BrowserAdapter.prototype._enableClickShield=function(){var t=500,i=Math.round(1e4*Math.random()),r=this.getTopWindow(),e=r.document,n=(r.document.documentElement,e.createElement("div")),o=e.createElement("script"),s=new Date,i=(n.id="celtra-click-shield-"+i,n.style.position="absolute",n.style.left=n.style.top=0,n.style.width="100%",n.style.height="100%",n.style.background="none",n.style.zIndex=Placement.ZINDEX_MAX,n.style.webkitTapHighlightColor="rgba(0,0,0,0)",n.addEventListener("click",a,!0),e.body.appendChild(n),o.type="text/javascript","window.setTimeout(function() { var shield = document.getElementById('"+n.id+"'); if (shield) { shield.parentNode.removeChild(shield); }}, "+t+");");try{o.appendChild(e.createTextNode(i))}catch(e){o.text=i}function a(e){e.preventDefault(),e.stopPropagation(),l()}function l(e){n&&n.parentNode&&(n.removeEventListener("click",a,!0),n.parentNode.removeChild(n),n=null)}n.appendChild(o),r.requestAnimationFrame(function e(){if(!n)return;new Date-s>t?l():r.requestAnimationFrame(e)}),defer(l,t)},BrowserAdapter.prototype._createContainerViewabilityObserver=function(){var t=this,i=this.getTopWindow().document,r={isSupported:!1,propertyName:"",eventName:"",isVisible:function(){return!this.isSupported||!i[this.propertyName]},init:function(){["webkit","moz","ms",""].forEach(function(e){var t=e?e+"Hidden":"hidden";t in i&&(this.isSupported=!0,this.propertyName=t,this.eventName=e+"visibilitychange")},this)}},e=(r.init(),this.useAsap),n={isViewable:!1,start:function(){r.isVisible()&&defer(o,void 0,"BrowserAdapter observer start",e),r.isSupported&&i.addEventListener(r.eventName,o)},stop:function(){r.isSupported&&i.removeEventListener(r.eventName,o)}},o=function(){var e=this.isViewable;this.isViewable=r.isVisible(),e!=this.isViewable&&t.emit("containerViewableChange",this.isViewable)}.bind(n);return n},BrowserAdapter.prototype._downsizePlacements=function(){for(var e in this.placements)"screen"!==this.placements[e].positioning||this.placements[e].preventDownsizeHack||this.placements[e].setSize(1,1,!0)},BrowserAdapter.prototype._getUnitViewabilityObserver=function(e,t){var i=-1!==["newGeometryWithSampling","newGeometryWithoutSampling"].indexOf(this.experiments.get("UseNewUnitViewabilityLogic")&&this.experiments.get("UseNewUnitViewabilityLogic").chosenVariant),r="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype;return this._unitViewabilityObserver||(this._unitViewabilityObserver=new UnitViewabilityObserver(this,e,t,i&&r)),this._unitViewabilityObserver},BrowserAdapter.prototype.waitForViewableCore=function(e,t,i){return this._getUnitViewabilityObserver(e,t).waitForViewableCore(i)},BrowserAdapter.prototype.waitForViewableIAB=function(e,t,i){return this._getUnitViewabilityObserver(e,t).waitForViewableIAB(i)},BrowserAdapter.prototype.removeViewabilityListener=function(e,t,i){this._getUnitViewabilityObserver(e,t).removeListener(i)},BrowserAdapter.prototype._getActivePlacementOrUnitGeometry=function(){var e,t=this.placements[this.activeGeometryBaseline.placement];if(!t)return null;t.visible?e=t.getPlacementGeometry():(t.root.style.visibility="hidden",t.root.style.display="block",e=t.getPlacementGeometry(),t.root.style.display="none",t.root.style.visibility="");t=t.creative&&t.creative.unitSizes&&t.creative.unitSizes[this.activeGeometryBaseline.unit];return 0===e.height&&t&&(e.height=t.height),0===e.width&&t&&(e.width=t.width),e},BrowserAdapter.prototype._getWindowForPreviewMessaging=function(){return this.adBehavior.requiresTopWindowParentForPreviewMessaging?this.getTopWindow().parent:this.getTopWindow()},BrowserAdapter.prototype._disableScrollHandler=function(e){-1==["INPUT","TEXTAREA","SELECT"].indexOf(e.target.tagName)&&e.preventDefault()};;
function MobileWebAdapter(e,t,i,n){if(MobileWebAdapter.uberConstructor.apply(this,arguments),this.isMobileWebAdapter=!0,this.isInlineWebPlacement=!(this.isSingleOccupant||this.nesting.hostileIframe||this.nesting.friendlyIframe&&!this.nesting.iabFriendlyIframe),this.muteSoundIfVideoStartedOnTouchStartEvent=android(),this.unitScript=unitScript,this.requiredDeviceType=requiredDeviceType,this.trackingCenter=t,this.aggregatorTracking=i,this.__CELTRA.stickyPresent&&this.runtimeParams.sticky)return t.track({name:"userError",userErrorId:"multipleStickyAds"}),defer(this.dismiss.bind(this));if(this.runtimeParams.sticky&&(this.__CELTRA.stickyPresent=!0),this.hacks.needsConstantFlashing=kindleSilk("1")||/\bHTC.One.S\b/.test(navigator.userAgent),this.hacks.requiresHidingInputsAndLinks=android()&&(/HTC/g.test(navigator.userAgent)||"hiding"==this.runtimeParams.focusableHighlightFix),this.hacks.fixFocusablesHighlighting=android("4.0"),this.hacks.requiresWrappingPlacementWithComments=windows("10"),this.hacks.useDefaultProtocolForSaveCalendar=deviceInfo.os.ios()&&deviceInfo.browser.safari()&&!deviceInfo.browser.facebookApp(),this.providesCloseButton=!1,this.enableCustomStateTransitions=!(/Windowshop/.test(navigator.userAgent)&&kindle()),this.preventIABFriendlyIFrameBusting="1"===this.runtimeParams.preventIFrameBusting&&("undefined"!=typeof BannerFormat||"undefined"!=typeof CrossScreenBannerFormat||"undefined"!=typeof ExpandableBannerFormat||"undefined"!=typeof CrossScreenExpandableFormat),this.nesting.iframe&&!this.nesting.iabFriendlyIframe||(this.viewabilityMeasurable={viewable00:!0,viewable501:this.visibilityApiIsSupported},this.canMeasureViewportPlacementGeometry=!0,this.supportsContainerViewability=!0,this.supportsContainerInitialViewability=!0),this.nesting.iframe&&!this.nesting.iabFriendlyIframe||this.runtimeParams.sticky||(this.canMeasureViewportPlacementGeometryRelativeToPage=!0),this.win=this.tagWindow,this.nesting.iabFriendlyIframe){var r=this.tagWindow;try{for(;r!==r.parent&&getWindowNesting(r.parent).iabFriendlyIframe;)r=r.parent}catch(e){}this.iabWin=r,this.readIABIFrameHeight=function(){var e=this.tagWindow.frameElement,e=e.style.height||e.getAttribute("height")||"0",t=parseInt(e,10),i="%"===e.slice(-1)?"%":"px";return{value:t,unit:i,toString:function(){return t+i}}},this.preventIABFriendlyIFrameBusting||(this.win=this.iabWin.parent,this.hostElement=this.win.document.createElement("div"),this.iabWin.frameElement.parentNode.insertBefore(this.hostElement,this.iabWin.frameElement.nextSibling))}addClass(this.hostElement,"celtra-ad-inline-host"),this.hacks.requiresWrappingPlacementWithComments&&(this.hostElement.parentNode.insertBefore(this.win.document.createComment("ie10hack"),this.hostElement),this.hostElement.parentNode.insertBefore(this.win.document.createComment("ie10hack"),this.hostElement.nextSibling)),this._parentPageHighlightStyle=null,this._downsizePlacements=this._downsizePlacements.bind(this),this._updatePlacements=this._updatePlacements.bind(this),this._topListenerAttached=!1,this._hasBeenViewable=!1,this.useFSVP=!(this.nesting.hostileIframe&&!deviceInfo.os.ios()&&!this.adBehavior.interstitial),this.restoreScrollOnCollapse=!deviceInfo.deviceType.desktop(),this.hostElement.activeAdapter||((this.hostElement.activeAdapter=this).supportsSticky=!0,this.on("documentReady",function(){this.hacks.needsConstantFlashing&&this.getTopWindow().setInterval(function(){for(var e in this.placements)this.placements[e]._flash()}.bind(this),200),this.adBehavior.adWillHideIframe||this.preventIABFriendlyIFrameBusting||this.hideIABFriendlyIframe(),this.useFSVP&&"undefined"!=typeof FullscreenVideoPlayer&&FullscreenVideoPlayer.init({baseUrl:(this.runtimeParams.secure?urls.staticUrl:urls.insecureStaticUrl)+"runner/FullscreenVideoPlayer/"}),this.emit("ready")}.bind(this)),this.trackViewableAreaRatio=this.trackViewableAreaRatio.bind(this),this._viewableAreaRatio=0,this.useFixedPositioningForInterstitial=deviceInfo.os.ios()||deviceInfo.deviceType.desktop())}inherit(MobileWebAdapter,BrowserAdapter),MobileWebAdapter.prototype.hideIABFriendlyIframe=function(){this.adBehavior.interstitial||this.nesting.iabFriendlyIframe&&(this.iabWin.frameElement.style.display="none")},MobileWebAdapter.prototype.setMinimumSize=function(e,t){this.hostElement.style.minWidth=e+"px",this.runtimeParams.sticky||(this.hostElement.style.minHeight=t+"px")},MobileWebAdapter.prototype.setIABFriendlyIframeSize=function(e,t,i){this.nesting.iabFriendlyIframe&&this.iabWin&&this.preventIABFriendlyIFrameBusting&&(null!==e&&(this.iabWin.frameElement.style.minWidth=e+"px"),null!==t&&(this.iabWin.frameElement.style.minHeight=t+"px"),this.iabWin.frameElement.style.width="100%",e=this.readIABIFrameHeight(),i&&"px"===e.unit&&e.value>=t?this.iabWin.frameElement.style.height=e.toString():this.iabWin.frameElement.style.height="100%")},MobileWebAdapter.prototype._createViewportListener=function(){var e;return android()||kindleSilk()?((e=new ViewportObserver(this.getTopWindow())).on("keyboardShown",this._onKeyboardShown),e.on("keyboardHidden",this._onKeyboardHidden),this.on("_rawOrientationChange",this._downsizePlacements)):(e=MobileWebAdapter.uber._createViewportListener.apply(this),ios("8",null)&&(e._resizeHandler=deferred(e._resizeHandler),e._scrollHandler=deferred(e._scrollHandler))),e},MobileWebAdapter.prototype.createPlacement=function(e,t){var i,n,r={trackingCenter:this.trackingCenter,aggregatorTracking:this.aggregatorTracking,experiments:this.experiments,adapter:this,console:console,runtimeParams:this.runtimeParams,celtraDeviceInfoRuntimeParams:this.runtimeParams.deviceInfo,nextFrame:this.nextFrame,cancelFrame:this.cancelFrame,Ticker:this.Ticker,macros:this.macros,perf:this.perf},s={urls:urls,urlOpenedOverrideUrls:this.urlOpenedOverrideUrls,storeOpenedOverrideUrls:this.storeOpenedOverrideUrls,urlOpenedUrlAppendage:this.urlOpenedUrlAppendage,clickThroughDestinationUrl:this.clickThroughDestinationUrl},a=null;switch(this._initialInnerDims={height:adapter.getTopWindow().innerHeight,width:adapter.getTopWindow().innerWidth},e.type){case"unit":a=-1<["top","bottom"].indexOf(runtimeParams.sticky)&&"static"==e.positioning?(e.positioning="screen",e.attachment="body",i={stickiness:runtimeParams.sticky,showDismissButton:"1"==runtimeParams.showDismissButton||"1"==runtimeParams.showStickyCloseButton,baseUrl:runtimeParams.secure?urls.staticUrl:urls.insecureStaticUrl,dismissCallback:function(){this.placements.banner.creative.units.banner.trackCreativeDismissed(),this.dismiss()}.bind(this)},new StickyPlacement(e.positioning,this.unitScript,r,s,i)):new IframePlacement(e.positioning,this.unitScript,r,s);break;case"layer":a=new DivPlacement(e.positioning);break;default:throw new Error("I can't do that, Dave.")}a.root&&a.root.parentNode||(n="node"==e.attachment?e.parentNode:"placement"==e.attachment?e.placement.root:"inline"==e.attachment?this.isInlineWebPlacement||!this.adBehavior.attachInlinePlacementToViewport?this.hostElement:(this.viewport||(this.viewport=this._createViewportElement()),this.viewport):(this.adBehavior.interstitial&&this.nesting.friendlyIframe&&!this.nesting.iabFriendlyIframe&&"1"==this.runtimeParams._nobust?this.tagWindow:this.getTopWindow()).document.body,a.attachTo(n,function(){defer(function(){t&&t(a),a instanceof IframePlacement&&this._reportingObserver&&this._reportingObserver.createChildObserverAndStartObserving(a.getContentWindow())}.bind(this),void 0,void 0,o)}.bind(this))),(ios()||kindleSilk())&&a.once("populated",function(){!(a instanceof IframePlacement)&&(a instanceof IframePlacement||this._topListenerAttached)||(a.getContainer().ownerDocument.addEventListener("focus",this._onKeyboardShown,!0),a.getContainer().ownerDocument.addEventListener("blur",this._onKeyboardHidden,!0),this._topListenerAttached=!0)}.bind(this));var o=this.useAsap},MobileWebAdapter.prototype.getTopWindow=function(){return this.nesting.hostileIframe?this.tagWindow:SDKAdapter.prototype.getTopWindow.apply(this)},MobileWebAdapter.prototype.expand=function(e,t){this._stopAllMedia(),this.nesting.hostileIframe?(this._tryOpenInNewWindow(this.placements.banner.creative.wrapRedirectPageUrl(this.getModalUrl())),e&&e()):(this.animateExpansion=""!=t.animation&&this.enableCustomStateTransitions,this._preExpandScroll={x:this.win.scrollX,y:this.win.scrollY},this.waitForHook("beforeExpand",function(){this._enableClickShield(),defer(function(){this.emit("stateChange","expanded")}.bind(this)),e&&e()}.bind(this)))},MobileWebAdapter.prototype.collapse=function(e){this._stopAllMedia(),this.waitForHook("beforeCollapse",function(){this.restoreScrollOnCollapse&&this._preExpandScroll&&this.win.scrollTo(this._preExpandScroll.x,this._preExpandScroll.y),this._enableClickShield(),defer(function(){this.emit("stateChange","default")}.bind(this)),e&&e()}.bind(this))},MobileWebAdapter.prototype.dismiss=function(e,t){this._stopAllMedia();var i={};t&&Object.keys(t).forEach(function(e){i[e]=t[e]}),this.waitForHook("beforeDismiss",function(){this.Ticker.stop(),this._stopObservingEnvironment(),this.emit("stateChange","dismissed"),this.trackingCenter.flush(),this.hostElement&&this.hostElement.parentNode&&(this._enableClickShield(),this.hostElement.parentNode.removeChild(this.hostElement)),this.__CELTRA.stickyPresent&&(this.runtimeParams.sticky||this.adBehavior.sticky)&&(this.__CELTRA.stickyPresent=!1),(e||noop)()}.bind(this),i)},MobileWebAdapter.prototype.resize=function(e,t){var i={};t&&Object.keys(t).forEach(function(e){i[e]=t[e]}),this._enableClickShield(),this.waitForHook("beforeResize",e,i)},MobileWebAdapter.prototype._onReportReceived=function(e){switch(e){case"heavyAdCPUIntervention":case"heavyAdNetworkIntervention":this.isPreview?this._getWindowForPreviewMessaging().postMessage({name:"heavyAdIntervention",type:e,adBehavior:{placementGeometry:this._getActivePlacementOrUnitGeometry(),positioning:this.adBehavior.interstitial?"interstitial":this.runtimeParams.sticky||"inline"}},"*"):(this.trackingCenter.track({name:"userError",userErrorId:e}),this.trackingCenter.flushWithBeacon()),this.dismiss();break;default:console.warn("Received unknown report!")}},MobileWebAdapter.prototype.playVideoInPlayer=function(e,t,i){this.useFSVP?FullscreenVideoPlayer.play(e,t,i):(this.openBrowserSameWindowInHostileIFrame(t.file.getUrl()),i(!0))},MobileWebAdapter.prototype.callPhone=function(e){var t;/Chrome/.test(navigator.userAgent)||deviceInfo.os.ios("9",null)?((t=document.createElement("a")).href="tel:"+encodeURIComponent(e),t.addEventListener("click",function(e){t.parentNode.removeChild(t)}),deviceInfo.browser.safari()&&this.nesting.hostileIframe&&(t.target="_top"),this.getTopWindow().document.body.appendChild(t),t.click()):MobileWebAdapter.uber.callPhone.apply(this,arguments)},MobileWebAdapter.prototype._openInSameWindow=function(e){this.nesting.hostileIframe?this.openBrowserSameWindowInHostileIFrame(e):this.getTopWindow().location.href=e},MobileWebAdapter.prototype.getApp=function(e){this.openBrowser(e)},MobileWebAdapter.prototype.canSaveImage=function(){return!(!desktop()&&!android())},MobileWebAdapter.prototype.saveImage=function(e,t,i){this.openBrowser(e+"?transform=download&name="+t),i()},MobileWebAdapter.prototype.getVideoCapabilities=function(){return{videoElement:this.scriptElement.getRootNode().getElementById("celtra-video-slot")}},MobileWebAdapter.prototype.startObscuringContent=function(){this.hacks.fixFocusablesHighlighting&&(this._parentPageHighlightStyle&&this.stopObscuringContent(),this._parentPageHighlightStyle=this.getTopWindow().document.createElement("style"),this._parentPageHighlightStyle.textContent="a, input, textarea, select { -webkit-tap-highlight-color: rgba(255, 0, 0, 0) !important; }input, textarea, select { visibility: hidden !important; }",this.getTopWindow().document.querySelector("head").appendChild(this._parentPageHighlightStyle))},MobileWebAdapter.prototype.stopObscuringContent=function(){this.hacks.fixFocusablesHighlighting&&(this._parentPageHighlightStyle&&this._parentPageHighlightStyle.parentNode&&this._parentPageHighlightStyle.parentNode.removeChild(this._parentPageHighlightStyle),this._parentPageHighlightStyle=null)},MobileWebAdapter.prototype._stopObservingEnvironment=function(){this._unitViewabilityObserver&&this._unitViewabilityObserver.stop(),MobileWebAdapter.uber._stopObservingEnvironment.apply(this,arguments)},MobileWebAdapter.prototype.waitForViewableIAB=function(e,t,i){this._getUnitViewabilityObserver(e,t).waitForViewableIAB(i),this.experiments.get("TrackViewableAreaChange")&&this._setupViewableAreaChangeObserver()},MobileWebAdapter.prototype.trackViewableAreaRatio=function(){var e={name:"viewableAreaRatio",ratio:this._viewableAreaRatio};this.trackingCenter.track(e)},MobileWebAdapter.prototype._setupViewableAreaChangeObserver=function(){var i=!1,n=this.getTopWindow(),r=!0,s=0,a=0,o=0,h=function(){var e={name:"largestViewableAreaRatio",ratio:a=s};this.trackingCenter.track(e)}.bind(this),e=function(e,t){this._viewableAreaRatio=e,s<e&&(s=e),r?(r=!1,this.trackViewableAreaRatio(),h()):!i&&o<30&&(i=!0,o++,n.setTimeout(function(){i=!1,a<s&&h(),this.trackViewableAreaRatio()}.bind(this),1e3))}.bind(this);this._unitViewabilityObserver.addListener(e)},MobileWebAdapter.prototype._removeDisableScrollEventListeners=function(e){if(e){var t;t=this.useNativeClickForTapDetection?["touchmove","wheel"]:["touchstart","touchmove","touchend","wheel"];for(var i=0;i<t.length;i++)e.removeEventListener(t[i],this._disableScrollHandler,{passive:!1})}},MobileWebAdapter.prototype._addDisableScrollEventListeners=function(e){if(e){var t;t=this.useNativeClickForTapDetection?["touchmove","wheel"]:["touchstart","touchmove","touchend","wheel"];for(var i=0;i<t.length;i++)e.addEventListener(t[i],this._disableScrollHandler,{passive:!1})}},MobileWebAdapter.prototype.enableScroll=function(e){this._removeDisableScrollEventListeners(e),this._removeDisableScrollEventListeners(this.getTopWindow().document)},MobileWebAdapter.prototype.disableScroll=function(e){this._addDisableScrollEventListeners(e),this._addDisableScrollEventListeners(this.getTopWindow().document)};;
function ViewportObserver(t){this.win=t,this.handler=null,this.keyboardShown=!1,this.resizeDelay=200,this.heightCutoff=120,this.dimensions={portrait:{left:0,top:0,width:null,height:0},landscape:{left:0,top:0,width:null,height:0}},this.triggerTimer=this.triggerTimer.bind(this),this.commitDimensions=this.commitDimensions.bind(this),this._resizeTimer=null}extend(ViewportObserver.prototype,EventEmitter),Object.defineProperty(ViewportObserver.prototype,"isPortrait",{get:function(){return void 0!==this.win.orientation?0==this.win.orientation||180==this.win.orientation:this.win.innerWidth<this.win.innerHeight},enumerable:!0}),Object.defineProperty(ViewportObserver.prototype,"isLandscape",{get:function(){return!this.isPortrait},enumerable:!0}),Object.defineProperty(ViewportObserver.prototype,"orientation",{get:function(){return this.isPortrait?"portrait":"landscape"},enumerable:!0}),Object.defineProperty(ViewportObserver.prototype,"fullInnerHeigth",{get:function(){return"portrait"==this.orientation?adapter._initialInnerDims.height:adapter._initialInnerDims.width},enumerable:!0}),ViewportObserver.prototype.start=function(t,i){this._resizeCallback=t,this._viewportUpdateCallback=i,this.win.addEventListener("orientationchange",this.triggerTimer),this.win.addEventListener("resize",this.triggerTimer),this.win.addEventListener("scroll",this.triggerTimer),this.commitDimensions()},ViewportObserver.prototype.stop=function(){this._resizeCallback=null,this._viewportUpdateCallback=null,this.win.removeEventListener("orientationchange",this.triggerTimer),this.win.removeEventListener("resize",this.triggerTimer),this.win.removeEventListener("scroll",this.triggerTimer),clearTimeout(this._resizeTimer)},ViewportObserver.prototype.triggerTimer=function(t){clearTimeout(this._resizeTimer),this._resizeTimer=this.win.setTimeout(this.commitDimensions,this.resizeDelay)},ViewportObserver.prototype.commitDimensions=function(){var t=this.getViewportGeometry(),i=this.dimensions[this.orientation],e=function(){return android()&&adapter._initialInnerDims&&(this._keyboardShown=!!(this.fullInnerHeigth!=t.height&&this.fullInnerHeigth-t.height>=this.heightCutoff)),this._keyboardShown}.bind(this);null!==i.width||e()?i.width==t.width&&(i.height-this.heightCutoff>t.height?(this.keyboardShown=!0,this.emit("keyboardShown")):(this.keyboardShown=!1,this.emit("keyboardHidden")),this._resizeCallback(),this._viewportUpdateCallback(),this.updateDimensions()):(this._resizeCallback(),this._viewportUpdateCallback())},ViewportObserver.prototype.updateDimensions=function(){var t=this.dimensions[this.orientation],i=this.getViewportGeometry();t.left=i.left,t.top=i.top,t.width=(null===t.width?i:t).width,t.height=Math.max(i.height,t.height)},ViewportObserver.prototype.getViewportGeometry=function(){return getViewportGeometry(this.win,"win")};;
function Accessibility(){this._altText=null,this._url=null,this._language=null,this._unit=null,this._placementNode=null,this._handleUrlClick=this._handleUrlClick.bind(this)}Accessibility.prototype.createAndPopulateAccessibilityPlacement=function(e){!e.placements.accessibility&&this._altText&&e.createPlacements({accessibility:{attachment:"inline",type:"layer"}},function(){var t=e.placements.accessibility;this._placementNode=t.getContainer(),this._applyAccessibilityPropertiesToPlacement(),this._placementNode.addEventListener("click",this._handleUrlClick),t.on("destroyed",function(){this._placementNode.removeEventListener("click",this._handleUrlClick)}.bind(this)),t.show()}.bind(this))},Accessibility.prototype.setAccessibilityProperties=function(t){var e=t.getAccessibilityProperties();e&&(this._unit=t,this._altText=e.altText,this._url=e.url,this._language=e.language)},Accessibility.prototype._applyAccessibilityPropertiesToPlacement=function(){this._setAltTextToPlacement(),this._setPlacementPropertiesForScreenReader(),this._createAccessibilityUrlElement(),this._setLanguage()},Accessibility.prototype._setAltTextToPlacement=function(){var t;this._altText&&(t=this._getLabel(),this._placementNode.setAttribute("aria-label",t+this._altText))},Accessibility.prototype._setPlacementPropertiesForScreenReader=function(){this._placementNode.tabIndex=0,this._placementNode.setAttribute("role","link"),this._placementNode.style.zIndex=-2147483647},Accessibility.prototype._createAccessibilityUrlElement=function(){var t;this._url&&(t=document.createElement("a"),this._setAccessibilityUrlElementProperties(t),this._placementNode.appendChild(t))},Accessibility.prototype._setAccessibilityUrlElementProperties=function(t){t.href=this._url,t.tabIndex=-1,t.setAttribute("target","_blank"),t.setAttribute("aria-hidden",!0)},Accessibility.prototype._handleUrlClick=function(t){this._unit.openAccessibilityUrl(this._url)},Accessibility.prototype._setLanguage=function(){this._placementNode.setAttribute("lang",this._language)},Accessibility.prototype._getLabel=function(){return Accessibility.labels[this._language]},Accessibility.labels={en:"Advertisement: ",fr:"Publicit: ",de:"Werbung: ",ru:" : ",ar:": ",ja:": ","zh-Hans":": ","zh-Hant":": ",it:"Pubblicit: ",es:"Anuncio publicitario: ",tr:"Reklamclk: "};;

            Logger.initFromRuntimeParams(runtimeParams);

            var urls = {"creativeUrl":"https://ads.celtra.com/compiled/e4907978/","apiUrl":"https://hub.celtra.com/api/","cachedApiUrl":"https://cache-ssl.celtra.com/api/","staticUrl":"https://cache-ssl.celtra.com/api/static/v7902e76a/","qrUrl":"https://qr.celtra.com/api/","insecureCreativeUrl":"http://ads.celtra.com/compiled/e4907978/","insecureApiUrl":"http://hub.celtra.com/api/","insecureCachedApiUrl":"http://cache.celtra.com/api/","insecureStaticUrl":"http://cache.celtra.com/api/static/v7902e76a/","insecureQrUrl":"http://qr.celtra.com/api/","trackingUrl":"https://track.celtra.com/","insecureTrackingUrl":"http://track.celtra.com/","geoUrl":"https://geo.celtra.com/","insecureGeoUrl":"http://geo.celtra.com/","customAudiencesUrl":"https://audiences.celtra.com","insecureCustomAudiencesUrl":"http://audiences.celtra.com","shareUrl":"https://hub-user.celtra.com/share/","insecureShareUrl":"http://hub-user.celtra.com/share/"};
            urls.resourceUrl = runtimeParams.secure ? urls.staticUrl : urls.insecureStaticUrl;

            var shouldBatchTrackers = !!'1';

            var trackingCenter = new TrackingCenter(
                runtimeParams.sessionId,
                runtimeParams.accountId,
                runtimeParams.purpose,
                runtimeParams.secure ? urls.trackingUrl : urls.insecureTrackingUrl,
                trackers,
                runtimeParams._batchTrackers === '1' || shouldBatchTrackers
            );

            if (runtimeParams.fallbackSdkUsed === '1') {
                trackingCenter.track({
                    name : 'fallbackSdkUsed',
                    sdk  : 'MobileWeb'
                });
            }

            var aggregatorTracking = new AggregatorTracking(trackingCenter);

            var experiments = new Experiments(runtimeParams.variantChoices, trackingCenter);

            var trackingLoadingTimesExperiment = experiments.get('TrackingLoadingTimes');

            var perf = new PerformanceTracker(trackingCenter, experiments);

            if (runtimeParams.clientTimestamp) {
                // Do it manually instead of using var p = perf.start() + p.end() pattern because we want to log
                // times from before PerformanceTracker is available
                perf.collect({
                    name: 'redirectDownload',
                    type: 'interval',
                    id: null,
                    startTime: parseFloat(runtimeParams.clientTimestamp) * 1000,
                    endTime: runtimeParams.redirectJsClientTimestamp * 1000,
                    args: []
                });
            }

            perf.collect({
                name: 'payloadDownload',
                type: 'interval',
                id: null,
                startTime: runtimeParams.redirectJsClientTimestamp * 1000,
                endTime: runtimeParams.payloadJsClientTimestamp * 1000,
                args: []
            });

            var unitName = 'banner';
            var requiredDeviceType = 'Any';

            perf.collect({
                name: 'payLoadDownloadedToAdapter.new',
                type: 'interval',
                id: null,
                startTime: runtimeParams.payloadJsClientTimestamp * 1000,
                endTime: Date.now(),
                args: []
            });

            var perfAdapterNew = perf.start('Adapter.new');
            var adapter = new MobileWebAdapter(runtimeParams, trackingCenter, aggregatorTracking, experiments, urlOpenedOverrideUrls, storeOpenedOverrideUrls, macros, urlOpenedUrlAppendage, clickThroughDestinationUrl, perf);
            perfAdapterNew.end();
            trackingCenter.windowForPixels = adapter.getTopWindow();

            var perfFormatNew = perf.start('Format.new');
            var format = new CrossScreenBannerFormat(adapter, {"banner":{"size":null,"variants":[{"backgroundColor":"rgba(229,224,218,0)","layouts":[{"minSize":{"width":1280,"height":650}}]}]}});
            perfFormatNew.end();
        </script></body></html>